<!doctype html><html><head><meta charset="utf-8" /><title>Geometric Search Trees</title><link href="assets/index.css" rel="stylesheet" /><script src="assets/toc.js" defer></script><script src="assets/pretty_previews.js" type="module" defer></script><script src="assets/defs.js" type="module" defer></script><link href="assets/katex.min.css" rel="stylesheet" /><link href="assets/pseudocode.css" rel="stylesheet" /><script src="assets/pseudocode.js" type="module" defer></script><meta name="viewport" content="width=device-width, initial-scale=1"><script>
    /*to prevent Firefox FOUC, this must be here*/
    let FF_FOUC_FIX;
  </script></head><body><div id="wrapContent"><h1 id="title"><a class="hsection" data-ref="title" data-hl="true" data-hsection-level="0" href="#title">Geometric Search Trees</a></h1><section data-hsection="title"><ol class="toc onlyLeft"><li data-hsection="introduction" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="introduction" data-hl="true" href="#introduction">Introduction</a><ol></ol></li><li data-hsection="related_work" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="related_work" data-hl="true" href="#related_work">Related Work</a><ol></ol></li><li data-hsection="preliminaries" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="preliminaries" data-hl="true" href="#preliminaries">Preliminaries</a><ol><li data-hsection="prelims_data_structures" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="prelims_data_structures" data-hl="true" href="#prelims_data_structures">Data Structures</a><ol></ol></li><li data-hsection="prelim_geometric_distribution" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="prelim_geometric_distribution" data-hl="true" href="#prelim_geometric_distribution">Pseudorandom Geometric Distributions</a><ol></ol></li><li data-hsection="prelims_zip_trees" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="prelims_zip_trees" data-hl="true" href="#prelims_zip_trees">Zip-Trees</a><ol></ol></li></ol></li><li data-hsection="sec_gtrees" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="sec_gtrees" data-hl="true" href="#sec_gtrees">G-Trees</a><ol><li data-hsection="analysis" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="analysis" data-hl="true" href="#analysis">Analysis</a><ol><li data-hsection="gtree_height" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_height" data-hl="true" href="#gtree_height">G-Tree Height</a><ol></ol></li><li data-hsection="gtree_node_size" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_node_size" data-hl="true" href="#gtree_node_size">G-Node Size</a><ol></ol></li><li data-hsection="gtree_size" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_size" data-hl="true" href="#gtree_size">G-Tree Size</a><ol></ol></li></ol></li><li data-hsection="old_gtrees" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="old_gtrees" data-hl="true" href="#old_gtrees">Well-Known G-Trees</a><ol><li data-hsection="gtree_zip_trees" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_zip_trees" data-hl="true" href="#gtree_zip_trees">Zip-Trees as G-Trees</a><ol></ol></li><li data-hsection="gtree_zipzip_trees" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_zipzip_trees" data-hl="true" href="#gtree_zipzip_trees">Zip-Zip-Trees and Beyond</a><ol></ol></li><li data-hsection="gtree_treaps" data-hlevel="3"><a class="hsection" data-hsection-level="3" data-ref="gtree_treaps" data-hl="true" href="#gtree_treaps">Treaps as G-Trees</a><ol></ol></li></ol></li><li data-hsection="new_gtrees" data-hlevel="2"><a class="hsection" data-hsection-level="2" data-ref="new_gtrees" data-hl="true" href="#new_gtrees">Novel G-Trees</a><ol></ol></li></ol></li><li data-hsection="implementation" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="implementation" data-hl="true" href="#implementation">Algorithms</a><ol></ol></li><li data-hsection="conclusion" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="conclusion" data-hl="true" href="#conclusion">Conclusion</a><ol></ol></li><li data-hsection="bibliography" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="bibliography" data-hl="true" href="#bibliography">References</a><ol></ol></li><li data-hsection="experiments" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="experiments" data-hl="true" href="#experiments">Appendix A: Code</a><ol></ol></li><li data-hsection="variants" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="variants" data-hl="true" href="#variants">Appendix B: G-Tree Variants</a><ol></ol></li><li data-hsection="explicit_implementations" data-hlevel="1"><a class="hsection" data-hsection-level="1" data-ref="explicit_implementations" data-hl="true" href="#explicit_implementations">Appendix C: Explicit Insertion and Deletion</a><ol></ol></li></ol><div><div class="authors"><div class="author"><div class="authorName">Carson Farmer</div><div class="authorAffiliation">Textile, Inc</div><div class="authorEmail"><a href="mailto:carson@textile.io">carson@textile.io</a></div></div><div class="author"><div class="authorName"><a href="https://aljoscha-meyer.de/">Aljoscha Meyer</a></div><div class="authorAffiliation">TU Berlin</div><div class="authorEmail"><a href="mailto:research@aljoscha-meyer.de">research@aljoscha-meyer.de</a></div></div></div></div><div><section class="abstract"><p>We describe G-trees, a family of randomized, history-independent search tree data structures. The G-trees encompass several independently-discovered data structures such as zip-trees, zip-zip-trees, and dense skip-trees. The family further contains novel trees of arity greater than two, which are significantly more efficient in the presence of cache hierarchies or block storage than zip-trees. Traditionally, such randomized trees have been significantly more complex than their binary counterparts, whereas our <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-ary G-trees have no additional conceptual overhead at all. We generalize the zip and unzip operations of zip-trees to provide a uniform, simple, and efficient implementation technique for all members of our family of data structures.</p></section></div><h2 id="introduction"><a class="hsection" data-ref="introduction" data-hl="true" data-hsection-level="1" href="#introduction">1 Introduction</a></h2><section data-hsection="introduction"><p>Randomized set data structures eschew self-balancing logic for simpler, probabilistic item organization. When deriving the necessary randomness via pseudorandom functions of the stored items themselves, the resulting graphs depend on the stored set only, but not the order of insertions and deletions. This <dfn id="history_independent"><a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independence</a></dfn> ensures that no information about previously deleted items can be reconstructed<a class="bib" data-ref="naor2001anti" data-preview-anchor="previews/naor2001anti.html?def§naor2001anti" href="g_trees/assets/references/naor2001anti.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Naor</span> &#38; <span style="font-variant:small-caps;">Teague</span>, 2001)</span></a>, and it enables <a class="bib" data-ref="pugh1989incremental" data-preview-anchor="previews/pugh1989incremental.html?def§pugh1989incremental" href="g_trees/assets/references/pugh1989incremental.pdf"><span class="bibText">efficient set fingerprinting</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span> &#38; <span style="font-variant:small-caps;">Teitelbaum</span>, 1989)</span></a> when using the data structure as a <a class="bib" data-ref="merkle1989certified" data-preview-anchor="previews/merkle1989certified.html?def§merkle1989certified" href="g_trees/assets/references/merkle1989certified.pdf"><span class="bibText">merkle-tree</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Merkle</span>, 1989)</span></a>.</p><p>For these reasons, randomized search trees and related data structures have been studied for decades. The most prominent such data structures are <dfn id="treap"><a data-ref="treap" data-preview-anchor="previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a></dfn><a class="bib" data-ref="seidel1996randomized" data-preview-anchor="previews/seidel1996randomized.html?def§seidel1996randomized" href="g_trees/assets/references/seidel1996randomized.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Seidel</span> &#38; <span style="font-variant:small-caps;">Aragon</span>, 1996)</span></a>, <dfn id="skip_list"><a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a></dfn><a class="bib" data-ref="pugh1990skip" data-preview-anchor="previews/pugh1990skip.html?def§pugh1990skip" href="g_trees/assets/references/pugh1990skip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span>, 1990)</span></a>, and, more recently, <dfn id="zip_informal"><a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a></dfn><a class="bib" data-ref="tarjan2021zip" data-preview-anchor="previews/tarjan2021zip.html?def§tarjan2021zip" href="g_trees/assets/references/tarjan2021zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Tarjan</span> <span style="font-variant:normal;">et al.</span></span>, 2021)</span></a>. All three are different takes on approximating the distribution of items in perfectly balanced binary search trees.</p><p>While <em>binary</em> trees are highly efficient in theory, they are less efficient on actual hardware than trees that store more than one item per vertex. Unfortunately, generalizing binary randomized data structures to higher-arity counterparts has proven more difficult than in the case of deterministically self-balancing trees. Providing a simple such generalization is the impetus for our work. <a class="figure" data-ref="fig_search_performance" data-preview-anchor="previews/fig_search_performance.html?def§fig_search_performance" href="#fig_search_performance">Figure&nbsp;1</a> plots lookup performance of a <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-tree</a> versus a 32-ary tree of ours; our tree is roughly twice as fast (note the logarithmic y-axis). On secondary storage, we can expect the performance difference to be even more pronounced.</p><figure class="wide" id="fig_search_performance"><img alt="A plot showing search performance of a zip-tree versus a 32-zip-tree; the latter is roughly twice as fast." src="/g_trees/assets/graphics/performance.svg" /><figcaption><p><a class="figure" data-ref="fig_search_performance" data-preview-anchor="/g_trees/previews/fig_search_performance.html?def§fig_search_performance" href="#fig_search_performance">Figure&nbsp;1</a>: Lookup Performance</p><p>Benchmarking search times for 100 randomly chosen items in randomly generated <a data-ref="zip_informal" data-preview-anchor="/g_trees/previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> (red, top line) and 32-zip-trees (green, lower line). The latter is a novel variant of <a data-ref="zip_informal" data-preview-anchor="/g_trees/previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> that arises naturally from our generalization of <a data-ref="zip_informal" data-preview-anchor="/g_trees/previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> to <a data-ref="gtree_informal" data-preview-anchor="/g_trees/previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a>.</p></figcaption></figure><p>We present the <dfn id="gtree_informal"><a data-ref="gtree_informal" data-preview-anchor="/g_trees/previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">geometric search trees</a></dfn> (<dfn id="gtree_informal"><a data-ref="gtree_informal" data-preview-anchor="/g_trees/previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a></dfn>), a family of randomized search trees that provides a unified perspective on several independently researched data structures, including <a data-ref="zip_informal" data-preview-anchor="/g_trees/previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a>, <dfn id="zipzip"><a data-ref="zipzip" data-preview-anchor="/g_trees/previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a></dfn><a class="bib" data-ref="gila2023zip" data-preview-anchor="/g_trees/previews/gila2023zip.html?def§gila2023zip" href="/g_trees/assets/references/gila2023zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Gila</span> <span style="font-variant:normal;">et al.</span></span>, 2023)</span></a>, <dfn id="skip_tree"><a data-ref="skip_tree" data-preview-anchor="/g_trees/previews/skip_tree.html?def§skip_tree" data-hl="true" href="#skip_tree">skip-trees</a></dfn><a class="bib" data-ref="messeguer1997skip" data-preview-anchor="/g_trees/previews/messeguer1997skip.html?def§messeguer1997skip" href="/g_trees/assets/references/messeguer1997skip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Messeguer</span>, 1997)</span></a>, <dfn id="dense_skip_tree"><a data-ref="dense_skip_tree" data-preview-anchor="/g_trees/previews/dense_skip_tree.html?def§dense_skip_tree" data-hl="true" href="#dense_skip_tree">dense skip-trees</a></dfn><a class="bib" data-ref="spiegel2009dense" data-preview-anchor="/g_trees/previews/spiegel2009dense.html?def§spiegel2009dense" href="/g_trees/assets/references/spiegel2009dense.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Spiegel</span> &#38; <span style="font-variant:small-caps;">Reynolds Jr</span>, 2009)</span></a>, <dfn id="mst"><a data-ref="mst" data-preview-anchor="/g_trees/previews/mst.html?def§mst" data-hl="true" href="#mst">merkle-search-trees</a></dfn><a class="bib" data-ref="auvolat2019merkle" data-preview-anchor="/g_trees/previews/auvolat2019merkle.html?def§auvolat2019merkle" href="/g_trees/assets/references/auvolat2019merkle.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Auvolat</span> &#38; <span style="font-variant:small-caps;">Taïani</span>, 2019)</span></a>, and <dfn id="prolly_tree"><a data-ref="prolly_tree" data-preview-anchor="/g_trees/previews/prolly_tree.html?def§prolly_tree" data-hl="true" href="#prolly_tree">prolly-trees</a></dfn><a class="bib" data-ref="boodman2016prolly" data-preview-anchor="/g_trees/previews/boodman2016prolly.html?def§boodman2016prolly" href="https://github.com/attic-labs/noms/blob/master/doc/intro.md#prolly-trees-probabilistic-b-trees"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Boodman</span> <span style="font-variant:normal;">et al.</span></span>, 2016)</span></a>. Our framework allows us to trivially define efficient trees that store a bounded number of items per vertex. These trees are arguably the first such randomized search trees whose conceptual complexity is just as low as that of their binary counterparts.</p><p>Our key insight is to take a byproduct of the usual definition of <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a>, turn it into a defining property of its own, and to then generalize it. <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">Zip-trees</a> assign geometrically chosen <a data-ref="rank_informal" data-preview-anchor="previews/rank_informal.html?def§rank_informal" data-hl="true" href="#rank_informal">ranks</a> to their items, and use these <a data-ref="rank_informal" data-preview-anchor="previews/rank_informal.html?def§rank_informal" data-hl="true" href="#rank_informal">ranks</a> for probabilistic balancing. A consequence of their balancing mechanism is that certain sequences of items with colliding <a data-ref="rank_informal" data-preview-anchor="previews/rank_informal.html?def§rank_informal" data-hl="true" href="#rank_informal">ranks</a> form sorted linked lists. It turns out we can view and even <em>define</em> <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> as collections of such linked lists.</p><p>From this definition, which is based on arranging <em>sorted linked lists</em> in a certain fashion, it is only a small step to arranging <em>arbitrary set data structures</em> in the same fashion. This yields our <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a>, a family of trees that is parameterized over a secondary search data structure. Using simple linked lists as the underlying data structure yields the <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a>. Recursively instantiating the <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a> with other <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a> yields a natural (and efficient) generalization of the <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a>. And finally, using linked lists of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> items per vertex yields a generalization of the <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> where each node can store up to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> items.</p><p>The <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a> not only define a unique tree shape for any set of items with associated ranks, they also offer a unified means of implementation. We provide generalizations of the zipping and unzipping algorithms of the original <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a>, and use them to implement insertion and deletion. These general algorithms can be applied to all <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a> whose underlying set data structure supports splitting at arbitrary keys and joining two non-overlapping sets. The algorithms perform a number of splits or joins proportional to the number of distinct ranks in the tree, which is logarithmic in the total number of items with high probability.</p><p>We give an overview of related work in <a class="hsection" data-hsection-level="1" data-ref="related_work" data-hl="true" href="#related_work">Section&nbsp;2</a>, before introducing preliminary definitions and notation in <a class="hsection" data-hsection-level="1" data-ref="preliminaries" data-hl="true" href="#preliminaries">Section&nbsp;3</a>. We present the <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">geometric trees</a> in <a class="hsection" data-hsection-level="1" data-ref="sec_gtrees" data-hl="true" href="#sec_gtrees">Section&nbsp;4</a>, including a thorough <a class="hsection" data-hsection-level="2" data-ref="analysis" data-hl="true" href="#analysis">analysis</a> and a an overview of <a class="hsection" data-hsection-level="2" data-ref="old_gtrees" data-hl="true" href="#old_gtrees">old</a> and <a class="hsection" data-hsection-level="2" data-ref="new_gtrees" data-hl="true" href="#new_gtrees">novel</a> <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a>. <a class="hsection" data-hsection-level="1" data-ref="implementation" data-hl="true" href="#implementation">Section&nbsp;5</a> describes efficient algorithms for mutating <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a>.</p></section><h2 id="related_work"><a class="hsection" data-ref="related_work" data-hl="true" data-hsection-level="1" href="#related_work">2 Related Work</a></h2><section data-hsection="related_work"><p><span class="marginale">The practically-minded reader can safely skip ahead to <a class="hsection" data-hsection-level="1" data-ref="preliminaries" data-hl="true" href="#preliminaries">Section&nbsp;3</a>, whereas the more academically inclined may wish to stick around for <a class="hsection" data-hsection-level="1" data-ref="related_work" data-hl="true" href="#related_work">Section&nbsp;2</a>, where we outline the current state of the art and contextualize our contributions.</span>Data structures whose exact shape is determined solely by their contents and not by the order of insertion and deletion operations have been studied for decades. This property has been given several names, such as <a class="bib" data-ref="snyder1977uniquely" data-preview-anchor="previews/snyder1977uniquely.html?def§snyder1977uniquely" href="https://ieeexplore.ieee.org/document/4567936"><span class="bibText">unique representation</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Snyder</span>, 1977)</span></a>, <a class="bib" data-ref="auvolat2019merkle" data-preview-anchor="previews/auvolat2019merkle.html?def§auvolat2019merkle" href="g_trees/assets/references/auvolat2019merkle.pdf"><span class="bibText">structural unicity</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Auvolat</span> &#38; <span style="font-variant:small-caps;">Taïani</span>, 2019)</span></a>, <a class="bib" data-ref="driscoll1994fully" data-preview-anchor="previews/driscoll1994fully.html?def§driscoll1994fully" href="g_trees/assets/references/driscoll1994fully.pdf"><span class="bibText">confluent persistence</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Driscoll</span> <span style="font-variant:normal;">et al.</span></span>, 1994)</span></a>, and <a class="bib" data-ref="naor2001anti" data-preview-anchor="previews/naor2001anti.html?def§naor2001anti" href="g_trees/assets/references/naor2001anti.pdf"><span class="bibText">anti-persistence or history-independence</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Naor</span> &#38; <span style="font-variant:small-caps;">Teague</span>, 2001)</span></a>. Deterministically self-balancing <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> set data structures necessarily take super-logarithmic time to update under arbitrary insertions and deletions<a class="bib" data-ref="snyder1977uniquely" data-preview-anchor="previews/snyder1977uniquely.html?def§snyder1977uniquely" href="https://ieeexplore.ieee.org/document/4567936"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Snyder</span>, 1977)</span></a>. Hence, several <em>probabilistic</em> <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> data structures have been devised which support membership queries and update operations in logarithmic time with high probability.</p><p>Well-known such (pseuso-) randomized set data structures include <dfn id="hash_trie"><a data-ref="hash_trie" data-preview-anchor="previews/hash_trie.html?def§hash_trie" data-hl="true" href="#hash_trie">hash tries</a></dfn> (as presented, for example, by Pugh and Teitelbaum<a class="bib" data-ref="pugh1989incremental" data-preview-anchor="previews/pugh1989incremental.html?def§pugh1989incremental" href="g_trees/assets/references/pugh1989incremental.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span> &#38; <span style="font-variant:small-caps;">Teitelbaum</span>, 1989)</span></a>), <a data-ref="treap" data-preview-anchor="previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a><a class="bib" data-ref="seidel1996randomized" data-preview-anchor="previews/seidel1996randomized.html?def§seidel1996randomized" href="g_trees/assets/references/seidel1996randomized.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Seidel</span> &#38; <span style="font-variant:small-caps;">Aragon</span>, 1996)</span></a>, and <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a><a class="bib" data-ref="pugh1990skip" data-preview-anchor="previews/pugh1990skip.html?def§pugh1990skip" href="g_trees/assets/references/pugh1990skip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span>, 1990)</span></a>. More recently, <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a> <a class="bib" data-ref="tarjan2021zip" data-preview-anchor="previews/tarjan2021zip.html?def§tarjan2021zip" href="g_trees/assets/references/tarjan2021zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Tarjan</span> <span style="font-variant:normal;">et al.</span></span>, 2021)</span></a> and <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a> <a class="bib" data-ref="gila2023zip" data-preview-anchor="previews/gila2023zip.html?def§gila2023zip" href="g_trees/assets/references/gila2023zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Gila</span> <span style="font-variant:normal;">et al.</span></span>, 2023)</span></a> have been proposed as more efficient variants of <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a>.</p><p>All these data structures approximate the vertex distribution of <em>binary</em> balanced search trees. While binary search trees are theoretically efficient, CPU caches or block-sized reads from secondary storage make it so that trees that store more than a single item per vertex outperform binary trees in practice. Theoretical models to capture this behavior in the analysis of algorithms and data structures include <a class="bib" data-ref="aggarwal1988input" data-preview-anchor="previews/aggarwal1988input.html?def§aggarwal1988input" href="g_trees/assets/references/aggarwal1988input.pdf"><span class="bibText">external memory models</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Aggarwal</span> &#38; <span style="font-variant:small-caps;">Vitter</span>, 1988)</span></a> and <a class="bib" data-ref="frigo1999cache" data-preview-anchor="previews/frigo1999cache.html?def§frigo1999cache" href="g_trees/assets/references/frigo1999cache.pdf"><span class="bibText">cache-oblivious models</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Frigo</span> <span style="font-variant:normal;">et al.</span></span>, 1999)</span></a>.</p><p>Several attempts have been made to find randomized data structures that perform well in an external memory model. Golovin<a class="bib" data-ref="golovin2009b" data-preview-anchor="/g_trees/previews/golovin2009b.html?def§golovin2009b" href="/g_trees/assets/references/golovin2009b.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Golovin</span>, 2009)</span></a> has proposed <dfn id="b_treap"><a data-ref="b_treap" data-preview-anchor="/g_trees/previews/b_treap.html?def§b_treap" data-hl="true" href="#b_treap">bushy treaps</a></dfn> (<dfn id="b_treap"><a data-ref="b_treap" data-preview-anchor="/g_trees/previews/b_treap.html?def§b_treap" data-hl="true" href="#b_treap">B-treaps</a></dfn>) to approximate the behavior of B-trees via treaps. Unfortunately, <a data-ref="b_treap" data-preview-anchor="/g_trees/previews/b_treap.html?def§b_treap" data-hl="true" href="#b_treap">B-treaps</a> are complicated enough that even their author recommends using simpler alternatives such as the <dfn id="b_skip_list"><a data-ref="b_skip_list" data-preview-anchor="/g_trees/previews/b_skip_list.html?def§b_skip_list" data-hl="true" href="#b_skip_list">B-skip-list</a></dfn><a class="bib" data-ref="golovin2010b" data-preview-anchor="/g_trees/previews/golovin2010b.html?def§golovin2010b" href="/g_trees/assets/references/golovin2010b.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Golovin</span>, 2010)</span></a>. The <a data-ref="b_skip_list" data-preview-anchor="/g_trees/previews/b_skip_list.html?def§b_skip_list" data-hl="true" href="#b_skip_list">B-skip-list</a> still involves a tuning parameter beyond the probability distribution for assigning node levels, a nontrivial invariant, and virtual memory management via hash tables rather than simple usage of pointers. In short, the conceptual complexity goes far beyond that of binary <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> or <a data-ref="treap" data-preview-anchor="/g_trees/previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a>.</p><p>Safavi and Seybold<a class="bib" data-ref="safavi2023b" data-preview-anchor="/g_trees/previews/safavi2023b.html?def§safavi2023b" href="/g_trees/assets/references/safavi2023b.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Safavi</span> &#38; <span style="font-variant:small-caps;">Seybold</span>, 2023)</span></a> propose <dfn id="rbst"><a data-ref="rbst" data-preview-anchor="/g_trees/previews/rbst.html?def§rbst" data-hl="true" href="#rbst">randomized-block-search-trees</a></dfn> (<dfn id="rbst"><a data-ref="rbst" data-preview-anchor="/g_trees/previews/rbst.html?def§rbst" data-hl="true" href="#rbst">RBSTs</a></dfn>) as another generalization of binary <a data-ref="treap" data-preview-anchor="/g_trees/previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a> that performs well in an external-memory model. The construction involves multiple tuning parameters, two distinct layers of data structure internals, and a highly nontrivial complexity analysis.</p><p>Bender et al<a class="bib" data-ref="bender2016anti" data-preview-anchor="/g_trees/previews/bender2016anti.html?def§bender2016anti" href="/g_trees/assets/references/bender2016anti.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Bender</span> <span style="font-variant:normal;">et al.</span></span>, 2016)</span></a> first specify a history-independent <dfn id="pma"><a data-ref="pma" data-preview-anchor="/g_trees/previews/pma.html?def§pma" data-hl="true" href="#pma">packed-memory array</a></dfn> (<dfn id="pma"><a data-ref="pma" data-preview-anchor="/g_trees/previews/pma.html?def§pma" data-hl="true" href="#pma">PMA</a></dfn>), and then build a <a data-ref="history_independent" data-preview-anchor="/g_trees/previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> B-tree analogon and an external-memory skip-list on top of the <a data-ref="pma" data-preview-anchor="/g_trees/previews/pma.html?def§pma" data-hl="true" href="#pma">PMA</a>. So there is again a two-layered aproach; the <a data-ref="pma" data-preview-anchor="/g_trees/previews/pma.html?def§pma" data-hl="true" href="#pma">PMA</a> introduces a significant chunk of conceptual complexity that is not part of regular <a data-ref="treap" data-preview-anchor="/g_trees/previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a> or <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a>.</p><p>Some proponents of randomized data structures claim that a significant advantage over self-balancing data structures is their greater simplicity<a class="bib" data-ref="pugh1990skipseidel1996randomized" data-preview-anchor="previews/pugh1990skipseidel1996randomized.html?def§pugh1990skipseidel1996randomized" href="g_trees/assets/references/pugh1990skip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span>, 1990; <span style="font-variant:small-caps;">Seidel</span> &#38; <span style="font-variant:small-caps;">Aragon</span>, 1996)</span></a>. It seems safe to say that none of the external-memory constructions we have just listed retain this advantage.</p><p>All prior work that <em>does</em> achieve sufficient simplicity buys it at the price of vertices that must store a dynamic, unbounded number of items. The <a data-ref="skip_tree" data-preview-anchor="previews/skip_tree.html?def§skip_tree" data-hl="true" href="#skip_tree">skip-trees</a><a class="bib" data-ref="messeguer1997skip" data-preview-anchor="previews/messeguer1997skip.html?def§messeguer1997skip" href="g_trees/assets/references/messeguer1997skip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Messeguer</span>, 1997)</span></a> are the first such data structure, effectively converting a <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a> into a tree: each vertex stores sequences of items that are being skipped-over together in the corresponding <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a>. The relatively unknown <a data-ref="dense_skip_tree" data-preview-anchor="previews/dense_skip_tree.html?def§dense_skip_tree" data-hl="true" href="#dense_skip_tree">dense skip-trees</a><a class="bib" data-ref="spiegel2009dense" data-preview-anchor="previews/spiegel2009dense.html?def§spiegel2009dense" href="g_trees/assets/references/spiegel2009dense.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Spiegel</span> &#38; <span style="font-variant:small-caps;">Reynolds Jr</span>, 2009)</span></a> provide two optimizations: expected node size can be increased by flipping coins of success probabilities <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> and empty vertices are eliminated from the tree. The <a data-ref="mst" data-preview-anchor="previews/mst.html?def§mst" data-hl="true" href="#mst">merkle-search-trees</a> (<a data-ref="mst" data-preview-anchor="previews/mst.html?def§mst" data-hl="true" href="#mst">MSTs</a>)<a class="bib" data-ref="auvolat2019merkle" data-preview-anchor="previews/auvolat2019merkle.html?def§auvolat2019merkle" href="g_trees/assets/references/auvolat2019merkle.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Auvolat</span> &#38; <span style="font-variant:small-caps;">Taïani</span>, 2019)</span></a> independently reinvent <a data-ref="skip_tree" data-preview-anchor="previews/skip_tree.html?def§skip_tree" data-hl="true" href="#skip_tree">skip-trees</a> with flexible probabilities similar to <a data-ref="dense_skip_tree" data-preview-anchor="previews/dense_skip_tree.html?def§dense_skip_tree" data-hl="true" href="#dense_skip_tree">dense skip-trees</a>, but without the compression of empty vertices. Additionally, <a data-ref="prolly_tree" data-preview-anchor="previews/prolly_tree.html?def§prolly_tree" data-hl="true" href="#prolly_tree">prolly-trees</a> <a class="bib" data-ref="boodman2016prolly" data-preview-anchor="previews/boodman2016prolly.html?def§boodman2016prolly" href="https://github.com/attic-labs/noms/blob/master/doc/intro.md#prolly-trees-probabilistic-b-trees"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Boodman</span> <span style="font-variant:normal;">et al.</span></span>, 2016)</span></a> provide a slightly different take, where a rolling hash function over the keys/values is used to determine the set of items in each node, rather than via explicit split and join operations.</p><p>None of these data structures can provide a non-probabilistic upper bound on the number of items per vertex. This hampers efficient implementation; and adversarial data suppliers can trivially produce <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> items in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> expected time that must all be stored in the same vertex.</p></section><h2 id="preliminaries"><a class="hsection" data-ref="preliminaries" data-hl="true" data-hsection-level="1" href="#preliminaries">3 Preliminaries</a></h2><section data-hsection="preliminaries"><p>Here, we define fundamental terminology, and provide proper definitions and background for <a data-ref="zip_informal" data-preview-anchor="previews/zip_informal.html?def§zip_informal" data-hl="true" href="#zip_informal">zip-trees</a>.</p><h3 id="prelims_data_structures"><a class="hsection" data-ref="prelims_data_structures" data-hl="true" data-hsection-level="2" href="#prelims_data_structures">3.1 Data Structures</a></h3><section data-hsection="prelims_data_structures"><p>A <dfn id="tree"><a data-ref="tree" data-preview-anchor="/g_trees/previews/tree.html?def§tree" data-hl="true" href="#tree">tree</a></dfn> data structure for items from some universe <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="tree_u"><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span></span> is either the <dfn id="tree_empty"><a data-ref="tree_empty" data-preview-anchor="/g_trees/previews/tree_empty.html?def§tree_empty" data-hl="true" href="#tree_empty">empty tree</a></dfn>, or a <dfn id="vertex"><a data-ref="vertex" data-preview-anchor="/g_trees/previews/vertex.html?def§vertex" data-hl="true" href="#vertex">vertex</a></dfn> consisting of a sequence of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> <dfn id="item"><a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a></dfn> from <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span> and a sequence of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="tree" data-preview-anchor="/g_trees/previews/tree.html?def§tree" data-hl="true" href="#tree">trees</a> called its <dfn id="child"><a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a></dfn>.</p><p>We write <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span> for the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>,</span> and <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span><span class="rb1 close">]</span></span> for the <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>-th <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> of <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>.</span> We write <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>children</span> for the <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a> of <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>,</span> and <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>children</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span><span class="rb1 close">]</span></span> for the <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>-th <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">child</a> of <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>.</span> Indexing always starts at zero.</p><p>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" id="tree_t"><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span></span> be a <a data-ref="tree" data-preview-anchor="/g_trees/previews/tree.html?def§tree" data-hl="true" href="#tree">tree</a>. The set of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>, its <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a>, <em>their</em> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a>, and so on, is called the set of <dfn id="subtree"><a data-ref="subtree" data-preview-anchor="/g_trees/previews/subtree.html?def§subtree" data-hl="true" href="#subtree">subtrees</a></dfn> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>. We say <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> is of <dfn id="tree_arity"><a data-ref="tree_arity" data-preview-anchor="/g_trees/previews/tree_arity.html?def§tree_arity" data-hl="true" href="#tree_arity">arity</a></dfn> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> if all <a data-ref="subtree" data-preview-anchor="/g_trees/previews/subtree.html?def§subtree" data-hl="true" href="#subtree">subtrees</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> have at most <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a>.</p><p>If <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> is a binary tree, we refer to its first child as its <dfn id="left"><a data-ref="left" data-preview-anchor="/g_trees/previews/left.html?def§left" data-hl="true" href="#left">left</a></dfn> child, and to its second child as its <dfn id="right"><a data-ref="right" data-preview-anchor="/g_trees/previews/right.html?def§right" data-hl="true" href="#right">right</a></dfn> child.</p><p>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="enclosing" id="item_lte"><span class="enclosing" data-ref="item_lte" data-preview-anchor="/g_trees/previews/item_lte.html?def§item_lte" data-hl="true"><a href="#item_lte"><span class="mrel">⪯</span></a></span></span></span></span></span> be a <a href="https://en.wikipedia.org/wiki/Total_order">total order</a> on <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span>, and let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" id="tree_c"><span class="enclosing" data-ref="tree_c" data-preview-anchor="/g_trees/previews/tree_c.html?def§tree_c" data-hl="true"><a href="#tree_c"><span class="mord mathnormal">c</span></a></span></span></span></span></span> be the number of <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span>. Then <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> is a <dfn id="search_tree"><a data-ref="search_tree" data-preview-anchor="/g_trees/previews/search_tree.html?def§search_tree" data-hl="true" href="#search_tree">search tree</a></dfn> <span class="marginale">In a <a data-ref="search_tree" data-preview-anchor="/g_trees/previews/search_tree.html?def§search_tree" data-hl="true" href="#search_tree">search tree</a>, intuitively speaking, the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> are sorted from left to right. That is, an <a href="https://en.wikipedia.org/wiki/Tree_traversal#In-order,_LNR">in-order traversal</a> yields a sorted sequence.</span> (with respect to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span>) if it is the <a data-ref="tree_empty" data-preview-anchor="/g_trees/previews/tree_empty.html?def§tree_empty" data-hl="true" href="#tree_empty">empty tree</a>, or if<ul><li><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span> is sorted with respect to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span>,</li><li>all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>children</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span><span class="rb1 close">]</span></span> are less than <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span><span class="rb1 close">]</span></span>,</li><li>for all <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6986em;vertical-align:-0.0391em;"></span><span class="enclosing" id="searchtree_i"><span class="enclosing" data-ref="searchtree_i" data-preview-anchor="/g_trees/previews/searchtree_i.html?def§searchtree_i" data-hl="true"><a href="#searchtree_i"><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="tree_c" data-preview-anchor="/g_trees/previews/tree_c.html?def§tree_c" data-hl="true"><a href="#tree_c"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>children</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="enclosing" data-ref="searchtree_i" data-preview-anchor="/g_trees/previews/searchtree_i.html?def§searchtree_i" data-hl="true"><a href="#searchtree_i"><span class="mord mathnormal">i</span></a></span></span></span></span><span class="rb1 close">]</span></span> are less than <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="searchtree_i" data-preview-anchor="/g_trees/previews/searchtree_i.html?def§searchtree_i" data-hl="true"><a href="#searchtree_i"><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><span class="rb1 close">]</span></span> and greater than <span class="nowrap"><span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="searchtree_i" data-preview-anchor="/g_trees/previews/searchtree_i.html?def§searchtree_i" data-hl="true"><a href="#searchtree_i"><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><span class="rb1 close">]</span></span>,</span> and</li><li>all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>children</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="tree_c" data-preview-anchor="/g_trees/previews/tree_c.html?def§tree_c" data-hl="true"><a href="#tree_c"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><span class="rb1 close">]</span></span> are greater than <span class="nowrap"><span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span><span class="rb1 open">[</span><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="tree_c" data-preview-anchor="/g_trees/previews/tree_c.html?def§tree_c" data-hl="true"><a href="#tree_c"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span><span class="rb1 close">]</span></span>.</li></ul></p><p>We call <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> a <dfn id="heap"><a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heap</a></dfn><span class="marginale">In a <a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heap</a>, intuitively speaking, no <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> is a descendant of a lesser item.</span> if it is the <a data-ref="tree_empty" data-preview-anchor="/g_trees/previews/tree_empty.html?def§tree_empty" data-hl="true" href="#tree_empty">empty tree</a>, or if<ul><li>the greatest <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> in all strict <a data-ref="subtree" data-preview-anchor="/g_trees/previews/subtree.html?def§subtree" data-hl="true" href="#subtree">subtrees</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> is less than or equal to the least <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> amongst <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span><span class="deemph">.</span>items</span>, and</li><li>all <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="enclosing" data-ref="tree_t" data-preview-anchor="/g_trees/previews/tree_t.html?def§tree_t" data-hl="true"><a href="#tree_t"><span class="mord mathnormal">t</span></a></span></span></span></span> are themselves <a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heaps</a>.</li></ul></p></section><h3 id="prelim_geometric_distribution"><a class="hsection" data-ref="prelim_geometric_distribution" data-hl="true" data-hsection-level="2" href="#prelim_geometric_distribution">3.2 Pseudorandom Geometric Distributions</a></h3><section data-hsection="prelim_geometric_distribution"><p>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="geo_p"><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span></span> be a probability.<span class="marginale">In plain language: take a coin that shows heads with probability <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span>. Flip until it shows heads. Count the total number of flips.</span> A <dfn id="geometric_distribution"><a data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a></dfn> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true"><a href="#geometric_distribution"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span><span class="mclose">)</span></span></span></span> is a discrete probability distribution where the random variable <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="geo_x"><span class="enclosing" data-ref="geo_x" data-preview-anchor="/g_trees/previews/geo_x.html?def§geo_x" data-hl="true"><a href="#geo_x"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></a></span></span></span></span></span> takes on value <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="enclosing" id="geo_k"><span class="enclosing" data-ref="geo_k" data-preview-anchor="/g_trees/previews/geo_k.html?def§geo_k" data-hl="true"><a href="#geo_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="mord mathbb">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">+</span></span></span></span></span></span></span></span></span></span></span></span> with probability <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="enclosing" data-ref="geo_x" data-preview-anchor="/g_trees/previews/geo_x.html?def§geo_x" data-hl="true"><a href="#geo_x"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geo_k" data-preview-anchor="/g_trees/previews/geo_k.html?def§geo_k" data-hl="true"><a href="#geo_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="geo_k" data-preview-anchor="/g_trees/previews/geo_k.html?def§geo_k" data-hl="true"><a class="mtight" href="#geo_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>. We can interpret <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="geo_k" data-preview-anchor="/g_trees/previews/geo_k.html?def§geo_k" data-hl="true"><a href="#geo_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span> as the outcome of a series of Bernoulli trials with success probability <span class="nowrap"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span>,</span> where the rank <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="geo_k" data-preview-anchor="/g_trees/previews/geo_k.html?def§geo_k" data-hl="true"><a href="#geo_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span> represents the total number of trials until (and including) a first success. As is customary, we often write <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="geo_q"><span class="enclosing" data-ref="geo_q" data-preview-anchor="/g_trees/previews/geo_q.html?def§geo_q" data-hl="true"><a href="#geo_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span> for the failure probability of the Bernoulli trial.</p><p>The expected value of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="geo_x" data-preview-anchor="/g_trees/previews/geo_x.html?def§geo_x" data-hl="true"><a href="#geo_x"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></a></span></span></span></span> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" id="geo_expected"><span class="enclosing" data-ref="geo_expected" data-preview-anchor="/g_trees/previews/geo_expected.html?def§geo_expected" data-hl="true"><a href="#geo_expected"><span class="mord mathnormal" style="margin-right:0.05764em;">E</span></a></span></span><span class="mopen">[</span><span class="enclosing" data-ref="geo_x" data-preview-anchor="/g_trees/previews/geo_x.html?def§geo_x" data-hl="true"><a href="#geo_x"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></a></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3262em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a class="mtight" href="#geo_p"><span class="mord mathnormal mtight">p</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3262em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="enclosing mtight" data-ref="geo_q" data-preview-anchor="/g_trees/previews/geo_q.html?def§geo_q" data-hl="true"><a class="mtight" href="#geo_q"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="nowrap"><a class="bib" data-ref="forbes2011statistical" data-preview-anchor="/g_trees/previews/forbes2011statistical.html?def§forbes2011statistical" href="https://link.springer.com/book/10.1007/1-84628-168-7"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Forbes</span> <span style="font-variant:normal;">et al.</span></span>, 2011)</span></a><span class="sidenoteCounter">1</span></span><span class="marginale"><span class="sidenoteCounter">1</span>Most people would actually look this up <a href="https://en.wikipedia.org/wiki/Geometric_distribution#Moments_and_cumulants">on Wikipedia</a> rather than in a textbook.</span>.</p><p>We often wish to pseudorandomly map items from some universe <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="geo_u"><span class="enclosing" data-ref="geo_u" data-preview-anchor="/g_trees/previews/geo_u.html?def§geo_u" data-hl="true"><a href="#geo_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span></span> to geometrically distributed <dfn id="rank"><a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a></dfn>. To this end, we require a rank function <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="enclosing" id="fn_rank"><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a class="mtight" href="#geo_p"><span class="mord mathnormal mtight">p</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="geo_u" data-preview-anchor="/g_trees/previews/geo_u.html?def§geo_u" data-hl="true"><a href="#geo_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span>, such that <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a class="mtight" href="#geo_p"><span class="mord mathnormal mtight">p</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="/g_trees/previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span></a></span><span class="mclose">)</span></span></span></span> for any <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="enclosing" id="geo_arg_u"><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="/g_trees/previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="geo_u" data-preview-anchor="/g_trees/previews/geo_u.html?def§geo_u" data-hl="true"><a href="#geo_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span> is drawn independently from a random geometric distribution <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true"><a href="#geometric_distribution"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span><span class="mclose">)</span></span></span></span>. We simply write <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="/g_trees/previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span></a></span><span class="mclose">)</span></span></span></span> when <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span> is unimportant or clear from context.</p><p>In practice, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord"><span class="enclosing" data-ref="fn_rank" data-preview-anchor="previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">1/2</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span></a></span><span class="mclose">)</span></span></span></span> can be implemented by hashing <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span></a></span></span></span></span> with a secure hash function and counting the number of trailing zeros in the binary representation of the digest. This can also be interpreted as the largest power of two that divides the digest of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="geo_arg_u" data-preview-anchor="previews/geo_arg_u.html?def§geo_arg_u" data-hl="true"><a href="#geo_arg_u"><span class="mord mathnormal">u</span></a></span></span></span></span>, as used by Pugh and Teitelbaum<a class="bib" data-ref="pugh1989incremental" data-preview-anchor="previews/pugh1989incremental.html?def§pugh1989incremental" href="g_trees/assets/references/pugh1989incremental.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Pugh</span> &#38; <span style="font-variant:small-caps;">Teitelbaum</span>, 1989)</span></a>. Auvolat and Taïani<a class="bib" data-ref="auvolat2019merkle" data-preview-anchor="previews/auvolat2019merkle.html?def§auvolat2019merkle" href="g_trees/assets/references/auvolat2019merkle.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Auvolat</span> &#38; <span style="font-variant:small-caps;">Taïani</span>, 2019)</span></a> generalize this construction to distributions <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2025em;vertical-align:-0.3574em;"></span><span class="enclosing" data-ref="geometric_distribution" data-preview-anchor="previews/geometric_distribution.html?def§geometric_distribution" data-hl="true"><a href="#geometric_distribution"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></a></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.6426em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.782em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3574em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span> by counting trailing or leading zeroes in the base-<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> representation of uniformly distributed pseudorandom integers. This is equivalent to counting all-zero groupings of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> successive digits in a binary representation.</p></section><h3 id="prelims_zip_trees"><a class="hsection" data-ref="prelims_zip_trees" data-hl="true" data-hsection-level="2" href="#prelims_zip_trees">3.3 Zip-Trees</a></h3><section data-hsection="prelims_zip_trees"><p>We can now give a formal definition of <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a><a class="bib" data-ref="tarjan2021zip" data-preview-anchor="/g_trees/previews/tarjan2021zip.html?def§tarjan2021zip" href="/g_trees/assets/references/tarjan2021zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Tarjan</span> <span style="font-variant:normal;">et al.</span></span>, 2021)</span></a>. Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1815em;vertical-align:-0.487em;"></span><span class="mord"><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.7538em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.487em;"><span></span></span></span></span></span></span></span></span></span> be a rank function. The <dfn id="zip_tree"><a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a></dfn> of some set <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="zip_s"><span class="enclosing" data-ref="zip_s" data-preview-anchor="/g_trees/previews/zip_s.html?def§zip_s" data-hl="true"><a href="#zip_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span></span> is the unique <a data-ref="search_tree" data-preview-anchor="/g_trees/previews/search_tree.html?def§search_tree" data-hl="true" href="#search_tree">search tree</a> whose set of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_s" data-preview-anchor="/g_trees/previews/zip_s.html?def§zip_s" data-hl="true"><a href="#zip_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span>, and which is a <a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heap</a> when ordering by <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> first, <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> second. Equivalently, it must be a <a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heap</a> with respect to <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> such that <a data-ref="left" data-preview-anchor="/g_trees/previews/left.html?def§left" data-hl="true" href="#left">left</a> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a> always have strictly lesser <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> than their parents. <a class="figure" data-ref="fig_ziptree_basic" data-preview-anchor="/g_trees/previews/fig_ziptree_basic.html?def§fig_ziptree_basic" href="#fig_ziptree_basic">Figure&nbsp;2</a> gives an example.<span class="marginale">The example tree is taken from a <a href="https://stackoverflow.com/questions/61944198/what-is-a-zip-tree-and-how-does-it-work">stackoverflow answer</a>, the interested reader can find there a detailed description of the isomorphism to <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> for that same example tree.</span></p><figure id="fig_ziptree_basic"><img alt="A rendering of a zip tree." src="/g_trees/assets/graphics/ziptreeBasic.svg" /><figcaption><p><a class="figure" data-ref="fig_ziptree_basic" data-preview-anchor="/g_trees/previews/fig_ziptree_basic.html?def§fig_ziptree_basic" href="#fig_ziptree_basic">Figure&nbsp;2</a>: A Zip-Tree</p><p><a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">Items</a> are the numbers in the vertices, <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> are the gray numbers above the vertices. <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">Items</a> are increasing from left to right (the tree is a <a data-ref="search_tree" data-preview-anchor="/g_trees/previews/search_tree.html?def§search_tree" data-hl="true" href="#search_tree">search tree</a> with respect to <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>), <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> are decreasing from top to bottom (the tree is a <a data-ref="heap" data-preview-anchor="/g_trees/previews/heap.html?def§heap" data-hl="true" href="#heap">heap</a> with respect to <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a>), and no <a data-ref="vertex" data-preview-anchor="/g_trees/previews/vertex.html?def§vertex" data-hl="true" href="#vertex">vertex</a> has a <a data-ref="left" data-preview-anchor="/g_trees/previews/left.html?def§left" data-hl="true" href="#left">left</a> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">child</a> of equal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> (yielding a unique tree shape).</p></figcaption></figure></section></section><h2 id="sec_gtrees"><a class="hsection" data-ref="sec_gtrees" data-hl="true" data-hsection-level="1" href="#sec_gtrees">4 G-Trees</a></h2><section data-hsection="sec_gtrees"><p>We derive our <a data-ref="gtree_informal" data-preview-anchor="previews/gtree_informal.html?def§gtree_informal" data-hl="true" href="#gtree_informal">G-trees</a> by generalizing <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>. To do so, we start with a non-standard definition of <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>:</p><figure class="theoremlike" id="zip_tree_recursive"><p>Define the <dfn id="partition"><a data-ref="partition" data-preview-anchor="/g_trees/previews/partition.html?def§partition" data-hl="true" href="#partition">partition item</a></dfn> of a set <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="enclosing" id="partition_s"><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span> as the least element of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> among those of maximal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>. The <dfn id="zip_tree_rec"><a data-ref="zip_tree_rec" data-preview-anchor="/g_trees/previews/zip_tree_rec.html?def§zip_tree_rec" data-hl="true" href="#zip_tree_rec">zip-tree</a></dfn> of any set <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> with <a data-ref="partition" data-preview-anchor="/g_trees/previews/partition.html?def§partition" data-hl="true" href="#partition">partition item</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="partition_p"><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span></span></span></span></span> is the binary <a data-ref="tree" data-preview-anchor="/g_trees/previews/tree.html?def§tree" data-hl="true" href="#tree">tree</a> whose <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span></span></span></span>, whose <a data-ref="left" data-preview-anchor="/g_trees/previews/left.html?def§left" data-hl="true" href="#left">left</a> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">child</a> is the <a data-ref="zip_tree_rec" data-preview-anchor="/g_trees/previews/zip_tree_rec.html?def§zip_tree_rec" data-hl="true" href="#zip_tree_rec">zip-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span><span class="mclose">}</span></span></span></span> (i.e., all items in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> which precede <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span></span></span></span>), and whose <a data-ref="right" data-preview-anchor="/g_trees/previews/right.html?def§right" data-hl="true" href="#right">right</a> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">child</a> is the <a data-ref="zip_tree_rec" data-preview-anchor="/g_trees/previews/zip_tree_rec.html?def§zip_tree_rec" data-hl="true" href="#zip_tree_rec">zip-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≻</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span><span class="mclose">}</span></span></span></span> (i.e., all items in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="partition_s" data-preview-anchor="/g_trees/previews/partition_s.html?def§partition_s" data-hl="true"><a href="#partition_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> which succeed <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="partition_p" data-preview-anchor="/g_trees/previews/partition_p.html?def§partition_p" data-hl="true"><a href="#partition_p"><span class="mord mathnormal">ρ</span></a></span></span></span></span>).</p><figcaption><p><a class="figure" data-ref="zip_tree_recursive" data-preview-anchor="/g_trees/previews/zip_tree_recursive.html?def§zip_tree_recursive" href="#zip_tree_recursive">Definition&nbsp;1</a>: Zip-Tree, Recursively</p></figcaption></figure><p>This recursive definition reveals an interesting property of zip trees: <dfn id="colliding"><a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a></dfn> ranks. From this definition, it is easy to see that the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of maximal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> form a linked list of <a data-ref="right" data-preview-anchor="/g_trees/previews/right.html?def§right" data-hl="true" href="#right">right</a> <a data-ref="child" data-preview-anchor="/g_trees/previews/child.html?def§child" data-hl="true" href="#child">children</a> at the root of the <a data-ref="zip_tree_rec" data-preview-anchor="/g_trees/previews/zip_tree_rec.html?def§zip_tree_rec" data-hl="true" href="#zip_tree_rec">zip-tree</a>. The same holds recursively in all <a data-ref="subtree" data-preview-anchor="/g_trees/previews/subtree.html?def§subtree" data-hl="true" href="#subtree">subtrees</a> as well. We can characterize these linked lists of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of equal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> as a sequence <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="enclosing" id="colliding_q"><span class="enclosing" data-ref="colliding_q" data-preview-anchor="/g_trees/previews/colliding_q.html?def§colliding_q" data-hl="true"><a href="#colliding_q"><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="enclosing" id="colliding_q0"><span class="enclosing" data-ref="colliding_q0" data-preview-anchor="/g_trees/previews/colliding_q0.html?def§colliding_q0" data-hl="true"><a href="#colliding_q0"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="enclosing" id="colliding_q1"><span class="enclosing" data-ref="colliding_q1" data-preview-anchor="/g_trees/previews/colliding_q1.html?def§colliding_q1" data-hl="true"><a href="#colliding_q1"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing" id="colliding_qk"><span class="enclosing" data-ref="colliding_qk" data-preview-anchor="/g_trees/previews/colliding_qk.html?def§colliding_qk" data-hl="true"><a href="#colliding_qk"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span></span></span></span></span> of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> <a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> in a superset <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="enclosing" id="colliding_s"><span class="enclosing" data-ref="colliding_s" data-preview-anchor="/g_trees/previews/colliding_s.html?def§colliding_s" data-hl="true"><a href="#colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">⊇</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="colliding_q" data-preview-anchor="/g_trees/previews/colliding_q.html?def§colliding_q" data-hl="true"><a href="#colliding_q"><span class="mord mathnormal">Q</span></a></span></span></span></span> if all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="colliding_q" data-preview-anchor="/g_trees/previews/colliding_q.html?def§colliding_q" data-hl="true"><a href="#colliding_q"><span class="mord mathnormal">Q</span></a></span></span></span></span> have equal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, and there is no <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="enclosing" id="colliding_nope"><span class="enclosing" data-ref="colliding_nope" data-preview-anchor="/g_trees/previews/colliding_nope.html?def§colliding_nope" data-hl="true"><a href="#colliding_nope"><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="colliding_s" data-preview-anchor="/g_trees/previews/colliding_s.html?def§colliding_s" data-hl="true"><a href="#colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> of greater <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> such that <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="colliding_q0" data-preview-anchor="/g_trees/previews/colliding_q0.html?def§colliding_q0" data-hl="true"><a href="#colliding_q0"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="enclosing" data-ref="colliding_nope" data-preview-anchor="/g_trees/previews/colliding_nope.html?def§colliding_nope" data-hl="true"><a href="#colliding_nope"><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="colliding_qk" data-preview-anchor="/g_trees/previews/colliding_qk.html?def§colliding_qk" data-hl="true"><a href="#colliding_qk"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span><span class="enclosing normalText"><span class="mord text"><span class="mord">.</span></span></span></span></span></span> <a class="figure" data-ref="fig_ziptree_colliding" data-preview-anchor="/g_trees/previews/fig_ziptree_colliding.html?def§fig_ziptree_colliding" href="#fig_ziptree_colliding">Figure&nbsp;3</a> visualizes the linked lists formed by maximal sets of <a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in a <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a>.</p><figure id="fig_ziptree_colliding"><img alt="A rendering of a zip tree, highlighting maximal colliding sequences in different colors." src="/g_trees/assets/graphics/ziptreeColliding.svg" /><figcaption><p><a class="figure" data-ref="fig_ziptree_colliding" data-preview-anchor="/g_trees/previews/fig_ziptree_colliding.html?def§fig_ziptree_colliding" href="#fig_ziptree_colliding">Figure&nbsp;3</a>: Colliding Sequences</p><p>The same <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a> as in <a class="figure" data-ref="fig_ziptree_basic" data-preview-anchor="/g_trees/previews/fig_ziptree_basic.html?def§fig_ziptree_basic" href="#fig_ziptree_basic">Figure&nbsp;2</a>, highlighting linked lists of <a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> <span style="color: #ff8000">three</span>, <span style="color: #fb3199">two</span>, <span style="color: #00b9f2">two</span>, and <span style="color: #ffbfbf">one</span>. All other <a data-ref="vertex" data-preview-anchor="/g_trees/previews/vertex.html?def§vertex" data-hl="true" href="#vertex">vertices</a> form <a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> sequences of length one.</p></figcaption></figure><p>We can even <em>define</em> <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> in terms of maximal <a data-ref="colliding" data-preview-anchor="previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> sequences, by using all <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> of maximal <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> as <a data-ref="partition" data-preview-anchor="previews/partition.html?def§partition" data-hl="true" href="#partition">partition items</a> in a single construction step:</p><figure class="theoremlike" id="zip_tree_colliding"><p>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="enclosing" id="zip_colliding_s"><span class="enclosing" data-ref="zip_colliding_s" data-preview-anchor="/g_trees/previews/zip_colliding_s.html?def§zip_colliding_s" data-hl="true"><a href="#zip_colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span> be a set, and let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="zip_colliding_m"><span class="enclosing" data-ref="zip_colliding_m" data-preview-anchor="/g_trees/previews/zip_colliding_m.html?def§zip_colliding_m" data-hl="true"><a href="#zip_colliding_m"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="enclosing mtight" data-ref="zip_colliding_m" data-preview-anchor="/g_trees/previews/zip_colliding_m.html?def§zip_colliding_m" data-hl="true"><a class="mtight" href="#zip_colliding_m"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></a></span><span class="mord mtight">∣</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> be the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of maximal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_colliding_s" data-preview-anchor="/g_trees/previews/zip_colliding_s.html?def§zip_colliding_s" data-hl="true"><a href="#zip_colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span>. The <dfn id="zip_tree_col"><a data-ref="zip_tree_col" data-preview-anchor="/g_trees/previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">zip-tree</a></dfn> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_colliding_s" data-preview-anchor="/g_trees/previews/zip_colliding_s.html?def§zip_colliding_s" data-hl="true"><a href="#zip_colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> is a pair, containing:<ul><li><span class="marginale">To emphasize: the linked list is not a list of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> only, but a list of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a>-<a data-ref="zip_colliding_left_subtree" data-preview-anchor="/g_trees/previews/zip_colliding_left_subtree.html?def§zip_colliding_left_subtree" data-hl="true" href="#zip_colliding_left_subtree">subtree</a>-pairs.</span>a linked list of the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_colliding_m" data-preview-anchor="/g_trees/previews/zip_colliding_m.html?def§zip_colliding_m" data-hl="true"><a href="#zip_colliding_m"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></a></span></span></span></span> in ascending order, paired with their <a data-ref="zip_colliding_left_subtree" data-preview-anchor="/g_trees/previews/zip_colliding_left_subtree.html?def§zip_colliding_left_subtree" data-hl="true" href="#zip_colliding_left_subtree">left subtrees</a>, where the <dfn id="zip_colliding_left_subtree"><a data-ref="zip_colliding_left_subtree" data-preview-anchor="/g_trees/previews/zip_colliding_left_subtree.html?def§zip_colliding_left_subtree" data-hl="true" href="#zip_colliding_left_subtree">left subtree</a></dfn> of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the <a data-ref="zip_tree_col" data-preview-anchor="/g_trees/previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">zip-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_colliding_s" data-preview-anchor="/g_trees/previews/zip_colliding_s.html?def§zip_colliding_s" data-hl="true"><a href="#zip_colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7474em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≻</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≻</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>, and</li><li>a single <dfn id="zip_colliding_right_subtree"><a data-ref="zip_colliding_right_subtree" data-preview-anchor="/g_trees/previews/zip_colliding_right_subtree.html?def§zip_colliding_right_subtree" data-hl="true" href="#zip_colliding_right_subtree">right subtree</a></dfn>, which is the <a data-ref="zip_tree_col" data-preview-anchor="/g_trees/previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">zip-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="zip_colliding_s" data-preview-anchor="/g_trees/previews/zip_colliding_s.html?def§zip_colliding_s" data-hl="true"><a href="#zip_colliding_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8943em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="enclosing mtight" data-ref="zip_colliding_m" data-preview-anchor="/g_trees/previews/zip_colliding_m.html?def§zip_colliding_m" data-hl="true"><a class="mtight" href="#zip_colliding_m"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></a></span><span class="mord mtight">∣</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span>.</li></ul></p><figcaption><p><a class="figure" data-ref="zip_tree_colliding" data-preview-anchor="/g_trees/previews/zip_tree_colliding.html?def§zip_tree_colliding" href="#zip_tree_colliding">Definition&nbsp;2</a>: Zip-Tree, Via Colliding Sequences</p></figcaption></figure><p><a class="figure" data-ref="fig_ziptree_lists" data-preview-anchor="previews/fig_ziptree_lists.html?def§fig_ziptree_lists" href="#fig_ziptree_lists">Figure&nbsp;4</a> vizualizes this perspective on <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>. Note how the linked-list pointers are exactly the pointers between <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> of equal <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, whereas both <a data-ref="zip_colliding_left_subtree" data-preview-anchor="previews/zip_colliding_left_subtree.html?def§zip_colliding_left_subtree" data-hl="true" href="#zip_colliding_left_subtree">left</a> and <a data-ref="zip_colliding_right_subtree" data-preview-anchor="previews/zip_colliding_right_subtree.html?def§zip_colliding_right_subtree" data-hl="true" href="#zip_colliding_right_subtree">right child</a> pointers always involve a strict decrease in <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>. In that sense, the <a data-ref="zip_tree_col" data-preview-anchor="previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">list-based definition</a> fixes an asymmetry of the <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">original definition</a>, which only requires strictly decreasing <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> for <a data-ref="left" data-preview-anchor="previews/left.html?def§left" data-hl="true" href="#left">left</a> <a data-ref="child" data-preview-anchor="previews/child.html?def§child" data-hl="true" href="#child">children</a>.</p><figure class="wide" id="fig_ziptree_lists"><img alt="A rendering of a zip tree as a collection of maximal colliding lists." src="/g_trees/assets/graphics/ziptreeOfLists.svg" /><figcaption><p><a class="figure" data-ref="fig_ziptree_lists" data-preview-anchor="/g_trees/previews/fig_ziptree_lists.html?def§fig_ziptree_lists" href="#fig_ziptree_lists">Figure&nbsp;4</a>: Zip-Trees as Lists</p><p>A <a data-ref="zip_tree_col" data-preview-anchor="/g_trees/previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">zip-tree</a>, interpreted as a collection of sorted linked lists. Linked list pointers are <span style="color: #808080;">dashed</span>, child pointers are solid. The colorless vertices are linked lists of length one. The three layers of the layout correspond to the three different <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a>. Note that the graph is isomorphic to that of <a class="figure" data-ref="fig_ziptree_colliding" data-preview-anchor="/g_trees/previews/fig_ziptree_colliding.html?def§fig_ziptree_colliding" href="#fig_ziptree_colliding">Figure&nbsp;3</a>, we simply interpret its structure in a different way.</p></figcaption></figure><p>From this non-standard characterization of <a data-ref="zip_tree_col" data-preview-anchor="previews/zip_tree_col.html?def§zip_tree_col" data-hl="true" href="#zip_tree_col">zip-trees</a>, there is a natural generalization: rather than representing maximal sequences of <a data-ref="colliding" data-preview-anchor="previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> (and the <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a>’ <a data-ref="zip_colliding_left_subtree" data-preview-anchor="previews/zip_colliding_left_subtree.html?def§zip_colliding_left_subtree" data-hl="true" href="#zip_colliding_left_subtree">left subtrees</a>) with sorted linked lists, we can represent them with arbitrary set data structures:</p><figure class="theoremlike" id="def_gtree"><p>Let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="enclosing" id="gtree_s"><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="tree_u" data-preview-anchor="/g_trees/previews/tree_u.html?def§tree_u" data-hl="true"><a href="#tree_u"><span class="mord mathnormal" style="margin-right:0.10903em;">U</span></a></span></span></span></span> be a set, and let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="gtree_m"><span class="enclosing" data-ref="gtree_m" data-preview-anchor="/g_trees/previews/gtree_m.html?def§gtree_m" data-hl="true"><a href="#gtree_m"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="enclosing mtight" data-ref="gtree_m" data-preview-anchor="/g_trees/previews/gtree_m.html?def§gtree_m" data-hl="true"><a class="mtight" href="#gtree_m"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></a></span><span class="mord mtight">∣</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> be the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of maximal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span>, and let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" id="gtree_g"><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span></span> be a data structure for representing sets. The <dfn id="gtree"><a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">geometric search tree</a></dfn> (<dfn id="gtree"><a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a></dfn>) of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span> using <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> is a pair, containing:<ul><li><span class="marginale">To emphasize: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> does not store <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> only, but <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a>-<a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">subtree</a>-pairs.</span>an instance of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> storing the <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_m" data-preview-anchor="/g_trees/previews/gtree_m.html?def§gtree_m" data-hl="true"><a href="#gtree_m"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></a></span></span></span></span> in ascending order, paired with their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a>, where the <dfn id="gtree_left_subtree"><a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a></dfn> of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is the <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7474em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≻</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≻</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>, and</li><li>a single <dfn id="gtree_right_subtree"><a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a></dfn>, which is the <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8943em;vertical-align:-0.3552em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="enclosing mtight" data-ref="gtree_m" data-preview-anchor="/g_trees/previews/gtree_m.html?def§gtree_m" data-hl="true"><a class="mtight" href="#gtree_m"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></a></span><span class="mord mtight">∣</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≺</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span>.</li></ul></p><figcaption><p><a class="figure" data-ref="def_gtree" data-preview-anchor="/g_trees/previews/def_gtree.html?def§def_gtree" href="#def_gtree">Definition&nbsp;3</a>: Geometric Search Tree</p></figcaption></figure><p>This generalization turns out to be remarkably powerful. We can express several well-known data structures as <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> (<a class="hsection" data-hsection-level="2" data-ref="old_gtrees" data-hl="true" href="#old_gtrees">Section&nbsp;4.2</a>), we find novel, cache-efficient data structures amongst the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> (<a class="hsection" data-hsection-level="2" data-ref="new_gtrees" data-hl="true" href="#new_gtrees">Section&nbsp;4.3</a>), and we can derive efficient implementation techniques for all of them (<a class="hsection" data-hsection-level="1" data-ref="implementation" data-hl="true" href="#implementation">Section&nbsp;5</a>).</p><p>We can regard any <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> from two perspectives. First, as a high-level tree of maximal <a data-ref="colliding" data-preview-anchor="/g_trees/previews/colliding.html?def§colliding" data-hl="true" href="#colliding">colliding</a> sequences. We refer to the nodes of this conceptual tree as <dfn id="gnode"><a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a></dfn>. The height of this tree is equal to the number of distinct ranks of the underlying set, which is in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span> with high probability (we give an analysis in <a class="hsection" data-hsection-level="2" data-ref="analysis" data-hl="true" href="#analysis">Section&nbsp;4.1</a>). <a class="figure" data-ref="fig_gnodes" data-preview-anchor="/g_trees/previews/fig_gnodes.html?def§fig_gnodes" href="#fig_gnodes">Figure&nbsp;5</a> visualizes our running example from this perspective.</p><p>And second, given a specific set data structure <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span>, we can study the resulting in-memory graphs with pointers as edges. If <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> is the type of sorted linked lists, for example, these concrete graphs are isomorphic to the <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> (compare <a class="figure" data-ref="fig_ziptree_lists" data-preview-anchor="/g_trees/previews/fig_ziptree_lists.html?def§fig_ziptree_lists" href="#fig_ziptree_lists">Figure&nbsp;4</a>, which we can interpret as depicting a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> using sorted linked lists).</p><figure class="wide" id="fig_gnodes"><img alt="A rendering of a G-tree, collapsing each G-node into a single vertex." src="/g_trees/assets/graphics/gtree.svg" /><figcaption><p><a class="figure" data-ref="fig_gnodes" data-preview-anchor="/g_trees/previews/fig_gnodes.html?def§fig_gnodes" href="#fig_gnodes">Figure&nbsp;5</a>: High-Level View — G-Nodes</p><p>A <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> from a high-level view: we disregard the internal structure of its <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>, rendering them as single vertices. We neither know nor care about the choice of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span>. The set of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> is identical to that of <a class="figure" data-ref="fig_ziptree_lists" data-preview-anchor="/g_trees/previews/fig_ziptree_lists.html?def§fig_ziptree_lists" href="#fig_ziptree_lists">Figure&nbsp;4</a>.</p></figcaption></figure><p>When we select the <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of each <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> as a pseudorandom function of the <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> itself, a tree of <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> is uniquely determined by the set of its <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a>. Hence, if <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> is <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a>, so is the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>.</p><p>When interpreted as trees of <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>, the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> are exactly the <a data-ref="dense_skip_tree" data-preview-anchor="previews/dense_skip_tree.html?def§dense_skip_tree" data-hl="true" href="#dense_skip_tree">dense skip-trees</a> of Spiegel and Reynolds Jr<a class="bib" data-ref="spiegel2009dense" data-preview-anchor="previews/spiegel2009dense.html?def§spiegel2009dense" href="g_trees/assets/references/spiegel2009dense.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Spiegel</span> &#38; <span style="font-variant:small-caps;">Reynolds Jr</span>, 2009)</span></a>. Spiegel and Reynolds Jr never consider the internal structure of the <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>, however, thus missing the instantiations that we discuss later.</p><h3 id="analysis"><a class="hsection" data-ref="analysis" data-hl="true" data-hsection-level="2" href="#analysis">4.1 Analysis</a></h3><section data-hsection="analysis"><p><span class="marginale">The math-averse reader can safely skip ahead to <a class="hsection" data-hsection-level="2" data-ref="old_gtrees" data-hl="true" href="#old_gtrees">Section&nbsp;4.2</a>, as long as they believe us when we say that <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> form trees of logarithmic height with high probability, and that each <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> contains <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> with high probability.</span>We now give a formal analysis of the performance-related properties of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>. Roughly speaking, we show that <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with a <a data-ref="geometric_distribution" data-preview-anchor="previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> of some probability <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> are similar to perfectly balanced <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="enclosing normalText"><span class="mord text"><span class="mord">-ary</span></span></span></span></span></span> trees with high probability: the height (in terms of <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>) stays within a constant factor of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>, and the maximal number of <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> per <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> stays within a constant factor of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>.</p><p>Throughout our analyses, we let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" id="ana_k"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span> be a natural number greater than or equal to two; <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span> is the intended average number of children per <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> (leaving us with an intended average of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> per <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a>). We let <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" id="ana_T"><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span></span></span></span></span> be a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" id="ana_n"><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span></span> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>. We then consider <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> for the <a data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true"><a href="#geometric_distribution"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span><span class="mclose">)</span></span></span></span> with <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="ana_p"><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, and set <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="ana_q"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> as this will yield the intended average <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> size.</p><h4 id="gtree_height"><a class="hsection" data-ref="gtree_height" data-hl="true" data-hsection-level="3" href="#gtree_height">4.1.1 G-Tree Height</a></h4><section data-hsection="gtree_height"><p>The <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of any <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> is a geometric random variable with parameter <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span></span></span></span>. The height of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span></span></span></span> is upper-bounded by the <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of its root node, since each child has a strictly lesser <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> than its parent.</p><p>The root rank, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="enclosing" id="ana_Mn"><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span></span></span></span></span> is the maximum of the <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> of all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span></span></span></span>, i.e., it is the maximum of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> independent samples of the <a data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true"><a href="#geometric_distribution"><span class="mord mathcal" style="margin-right:0.0593em;">G</span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span><span class="mclose">)</span></span></span></span>. While it is known that the expected value of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span></span></span></span> is roughly <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>, there is no simple closed form expression <a class="bib" data-ref="szpankowski1990yeteisenberg2008expectation" data-preview-anchor="/g_trees/previews/szpankowski1990yeteisenberg2008expectation.html?def§szpankowski1990yeteisenberg2008expectation" href="/g_trees/assets/references/szpankowski1990yet.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Eisenberg</span>, 2008; <span style="font-variant:small-caps;">Szpankowski</span> &#38; <span style="font-variant:small-caps;">Rego</span>, 1990)</span></a>.</p><p>To explicitly bound <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span></span></span></span>, fix any <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="enclosing" id="ana_r"><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="enclosing normalText"><span class="mord text"><span class="mord">.</span></span></span></span></span></span> Then, the probability that the <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of a <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" id="ana_g"><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span></span></span></span></span> is at least <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is at most <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>, i.e., <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="enclosing normalText"><span class="mord text"><span class="mord">.</span></span></span></span></span></span> By the union bound, the probability that there exists <em>some</em> <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> such that <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∃</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> and so for some positive constant <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7713em;"></span><span class="mord"><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span></span><a class="bib" data-ref="golovin2010b" data-preview-anchor="/g_trees/previews/golovin2010b.html?def§golovin2010b" href="/g_trees/assets/references/golovin2010b.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Golovin</span>, 2010)</span></a>.</p><p>Even for <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span></span></span></span>, the tail probability contribution is relatively small; we can estimate it by simplifying the geometric series:<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.1785em;vertical-align:-1.5271em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.809em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mrel mtight">=</span><span class="mopen mtight">⌈</span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="mclose mtight">)⌉</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5271em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mord"><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1324em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mord"><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌈</span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="mclose mtight">)⌉</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1324em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mord"><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2019em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="enclosing" data-ref="ana_p" data-preview-anchor="/g_trees/previews/ana_p.html?def§ana_p" data-hl="true"><a href="#ana_p"><span class="mord mathnormal">p</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2019em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mord">.</span></span></span></span></span>Hence, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> is at most <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>, with high probability.</p><p>By construction, the <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" id="height_fn"><span class="enclosing" data-ref="height_fn" data-preview-anchor="/g_trees/previews/height_fn.html?def§height_fn" data-hl="true"><a href="#height_fn"><span class="mord"><span class="mord mathrm">height</span></span></a></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mclose">)</span></span></span></span> of a geometric tree is less than or equal to its maximum rank <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span></span></span></span>. Like zip trees, geometric trees <em>compress</em> their depth where <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> are missing or skipped;<span class="marginale">While we don't bother with tight bounds on this compressed height, <a class="bib" data-ref="archibald2006number" data-preview-anchor="/g_trees/previews/archibald2006number.html?def§archibald2006number" href="/g_trees/assets/references/archibald2006number.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Archibald</span> <span style="font-variant:normal;">et al.</span></span>, 2006)</span></a> provides an expectation on the number of <em>distinct</em> <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> in a geometrically distributed random sample, which could provide slightly tighter bounds.</span> as such, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="height_fn" data-preview-anchor="/g_trees/previews/height_fn.html?def§height_fn" data-hl="true"><a href="#height_fn"><span class="mord"><span class="mord mathrm">height</span></span></a></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="ana_Mn" data-preview-anchor="/g_trees/previews/ana_Mn.html?def§ana_Mn" data-hl="true"><a href="#ana_Mn"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. Thus we have that the height of a geometric tree is in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span></span></span></span> with high probability. <a class="figure" data-ref="fig_stats_gheight" data-preview-anchor="/g_trees/previews/fig_stats_gheight.html?def§fig_stats_gheight" href="#fig_stats_gheight">Figure&nbsp;6</a> confirms our analysis with experimental data.</p><figure id="fig_stats_gheight"><h6 class="dataHeading">Maximum Rank</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></th><td>8.0 (3.48)</td><td>11.3 (4.00)</td><td>14.7 (3.88)</td><td>17.9 (3.27)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></th><td>4.2 (0.90)</td><td>5.9 (0.98)</td><td>7.5 (0.86)</td><td>9.2 (0.92)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16</span></span></span></span></th><td>2.4 (0.30)</td><td>3.2 (0.21)</td><td>4.1 (0.25)</td><td>4.9 (0.29)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">64</span></span></span></span></th><td>1.8 (0.19)</td><td>2.2 (0.19)</td><td>3.0 (0.12)</td><td>3.35 (0.24)</td></tr></tbody></table><h6 class="dataHeading">Height</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></th><td>6.7 (0.75)</td><td>9.9 (0.75)</td><td>13.2 (0.72)</td><td>16.7 (0.73)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></th><td>4.0 (0.51)</td><td>5.6 (0.51)</td><td>7.3 (0.44)</td><td>9.0 (0.47)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16</span></span></span></span></th><td>2.3 (0.24)</td><td>3.2 (0.18)</td><td>4.1 (0.25)</td><td>4.9 (0.24)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">64</span></span></span></span></th><td>1.8 (0.18)</td><td>2.2 (0.17)</td><td>3.0 (0.11)</td><td>3.3 (0.23)</td></tr></tbody></table><figcaption><p><a class="figure" data-ref="fig_stats_gheight" data-preview-anchor="/g_trees/previews/fig_stats_gheight.html?def§fig_stats_gheight" href="#fig_stats_gheight">Figure&nbsp;6</a>: G-Tree Maximum Ranks</p><p>Average maximal ranks and heights (in <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>) of 200 randomly generated <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, for various combinations of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. The numbers in parentheses give the <a href="https://en.wikipedia.org/wiki/Variance">variance</a>.</p></figcaption></figure></section><h4 id="gtree_node_size"><a class="hsection" data-ref="gtree_node_size" data-hl="true" data-hsection-level="3" href="#gtree_node_size">4.1.2 G-Node Size</a></h4><section data-hsection="gtree_node_size"><p>Given the geometric distribution of (independent) <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> over input values <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="gtree_s" data-preview-anchor="/g_trees/previews/gtree_s.html?def§gtree_s" data-hl="true"><a href="#gtree_s"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></a></span></span></span></span>, the expected number of values with <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is about <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span> times the expected number of values with <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, i.e., <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span><span class="mord">∣</span><span class="enclosing" data-ref="fn_rank" data-preview-anchor="/g_trees/previews/fn_rank.html?def§fn_rank" data-hl="true"><a href="#fn_rank"><span class="mord"><span class="mord mathrm">rank</span></span></a></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span></span></span></span>. Recall that each <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> in a geometric tree contains a set of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> with the same <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, and that the <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of the <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> is the maximum <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of its <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>. Thus, we can think of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> within <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span></span></span></span> as disjoint subsets formed by splitting the (sorted) items of <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> at values of <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>. In other words, the number of nodes with a given <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is a direct function of the number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> with <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>.</p><p>The above node layout implies that the size <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mord">∣</span></span></span></span> of a <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> is itself a random variable drawn from a geometric distribution, this time with <em>success</em> probability <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> and support <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">n</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">}</span></span></span></span>. The expected value is roughly <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>, and the observed size is at most <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span> times the expected value with probability at least <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1941em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span></span></span></span></span></span></span></span>. In other words, <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">c</span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1941em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span></span></span></span></span></span></span></span>. Setting <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span></span></span></span>, and using <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span></span></span></span>, we have that<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:8.6559em;vertical-align:-4.0779em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.5779em;"><span style="top:-6.5779em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_g" data-preview-anchor="/g_trees/previews/ana_g.html?def§ana_g" data-hl="true"><a href="#ana_g"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></a></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span><span style="top:-3.6em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mspace"> </span></span></span><span style="top:-0.9em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mspace"> </span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.0779em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.5779em;"><span style="top:-6.5779em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌈</span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="mclose mtight">)⌉</span><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.6em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.7279em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌈</span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2302em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2659em;"><span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="mclose mtight">)⌉</span><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span></span></span></span></span></span></span><span style="top:-0.9em;"><span class="pstrut" style="height:3.7279em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.0779em;"><span></span></span></span></span></span></span></span></span></span></span></span>which for large <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span>, where <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌈</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)⌉</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span></span></span></span>, we get<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">−</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.242em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>This bound demonstrates that the probability that the size of any <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> deviates from <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span> decreases exponentially with <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span>.</p><p><a class="figure" data-ref="fig_stats_gnode_size" data-preview-anchor="previews/fig_stats_gnode_size.html?def§fig_stats_gnode_size" href="#fig_stats_gnode_size">Figure&nbsp;7</a> shows experimental measurements of average <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> sizes. For low <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span>, nodes contain slightly too few items: items are spread-out, and there are not enough items to “fill up” all nodes. The variances are small; average <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> sizes are indeed as stable as our analysis suggests.</p><figure id="fig_stats_gnode_size"><h6 class="dataHeading">Average G-Node Size</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></th><td>1.9095 (0.0000334)</td><td>1.9940 (0.0000162)</td><td>1.9983 (0.0000006)</td><td>1.9998 (0.0000000)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></th><td>3.6374 (0.0000063)</td><td>3.9516 (0.0000036)</td><td>3.9942 (0.0000012)</td><td>4.0002 (0.0000008)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16</span></span></span></span></th><td>12.1596 (0.0257947)</td><td>15.2423 (0.0011409)</td><td>15.9084 (0.0001009)</td><td>15.9850 (0.0000016)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">64</span></span></span></span></th><td>30.6534 (0.0817688)</td><td>56.3768 (0.0023357)</td><td>62.6815 (0.0219051)</td><td>63.7859 (0.0235732)</td></tr></tbody></table><figcaption><p><a class="figure" data-ref="fig_stats_gnode_size" data-preview-anchor="/g_trees/previews/fig_stats_gnode_size.html?def§fig_stats_gnode_size" href="#fig_stats_gnode_size">Figure&nbsp;7</a>: G-Node Average Sizes</p><p>Average <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> sizes of 200 randomly generated <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, for various combinations of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. The numbers in parentheses give the <a href="https://en.wikipedia.org/wiki/Variance">variance</a>.</p></figcaption></figure></section><h4 id="gtree_size"><a class="hsection" data-ref="gtree_size" data-hl="true" data-hsection-level="3" href="#gtree_size">4.1.3 G-Tree Size</a></h4><section data-hsection="gtree_size"><p>The total expected number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> in a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> is intuitively <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mord">∣</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>. Given that <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> this can also be expressed as <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>. While this expectation is intuitive, it can be estimated more directly as the sum of the expected number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> at every possible <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> (plus a root node). Since the number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> at <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is equal to the number of <em><a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a></em> having <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, and since the <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> assignments for <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> are independent, the number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> with <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> in a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> can be modeled as a binomial random variable <dfn id="ana_Xr"><a data-ref="ana_Xr" data-preview-anchor="/g_trees/previews/ana_Xr.html?def§ana_Xr" data-hl="true" href="#ana_Xr"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></a></dfn>, with parameters <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> (the number of trials, i.e., the number of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>) and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span></span></span></span></span></span></span></span></span></span></span></span> (the probability of success, i.e., the probability that a <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> has <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>).<span class="marginale">To see why, consider that a binomial random variable describes the number of successes in a fixed number of independent trials, where each trial has the same probability of success. Here each <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> is an independent trial, the “success” is the event that a <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> has <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span>, and the probability of success is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span></span></span></span></span></span></span></span></span></span></span></span>.</span> Thus, the expected number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> at <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a href="#ana_r"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></a></span></span></span></span> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="enclosing" data-ref="ana_Xr" data-preview-anchor="/g_trees/previews/ana_Xr.html?def§ana_Xr" data-hl="true"><a href="#ana_Xr"><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span></span></span></span></span></span></span></span></span></span></span></span>, and by the linearity of expectation, the total expected number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> in a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> is a geometric series with sum<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mord">∣</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9185em;vertical-align:-1.2671em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.9185em;vertical-align:-1.2671em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∞</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_r" data-preview-anchor="/g_trees/previews/ana_r.html?def§ana_r" data-hl="true"><a class="mtight" href="#ana_r"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></a></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span>and recognizing that for <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> the rightmost infinite sum simplifies to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2286em;vertical-align:-0.4811em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7475em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="enclosing mtight" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a class="mtight" href="#ana_q"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a class="mtight" href="#ana_q"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>, we get<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">E</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mord">∣</span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.988em;vertical-align:-0.8804em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span></a></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="enclosing normalText"><span class="mord text"><span class="mord">.</span></span></span></span></span></span></span>To provide bounds, we can use the usual multiplicative form of a Chernoff bound for the sum of independent (but not identically distributed) Bernoulli random variables<span class="nowrap"><a class="bib" data-ref="dubhashiChernoff2009" data-preview-anchor="/g_trees/previews/dubhashiChernoff2009.html?def§dubhashiChernoff2009" href="https://doi.org/10.1017/CBO9780511581274"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Dubhashi</span> &#38; <span style="font-variant:small-caps;">Panconesi</span>, 2009)</span></a><span class="sidenoteCounter">2</span></span><span class="marginale"><span class="sidenoteCounter">2</span>Again, you'll probably want to look this up <a href="https://en.wikipedia.org/wiki/Chernoff_bound#Multiplicative_form_(relative_error)">on Wikipedia</a> rather than in a textbook.</span>. Then, for any <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord">∣</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></a></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4543em;vertical-align:-0.95em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.5043em;"><span style="top:-3.9029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span><span class="enclosing mtight" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a class="mtight" href="#ana_q"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">q</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span>or perhaps more conveniently, for <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> and recalling that <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="ana_q" data-preview-anchor="/g_trees/previews/ana_q.html?def§ana_q" data-hl="true"><a href="#ana_q"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>,<span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.836em;vertical-align:-0.686em;"></span><span class="mord amsrm">P</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord">∣</span><span class="enclosing" data-ref="ana_T" data-preview-anchor="/g_trees/previews/ana_T.html?def§ana_T" data-hl="true"><a href="#ana_T"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></a></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4411em;vertical-align:-0.95em;"></span><span class="mop">exp</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="enclosing normalText"><span class="mord text"><span class="mord">.</span></span></span></span></span></span></span>This provides an exponentially small probability that the total number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> in a geometric tree is much more than <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0404em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6954em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a class="mtight" href="#ana_k"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></a></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="enclosing mtight" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a class="mtight" href="#ana_n"><span class="mord mathnormal mtight">n</span></a></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>, and thus the <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> size is in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span><span class="mclose">)</span></span></span></span>. <a class="figure" data-ref="fig_stats_gnode_count" data-preview-anchor="/g_trees/previews/fig_stats_gnode_count.html?def§fig_stats_gnode_count" href="#fig_stats_gnode_count">Figure&nbsp;8</a> gives experimental measurements that confirm the analysis.</p><figure id="fig_stats_gnode_count"><h6 class="dataHeading">Average Number of G-Nodes</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></th><td>52.21 (25.081)</td><td>502.5 (257.2)</td><td>5002 (2394.5)</td><td>50001 (26339)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span></th><td>27.51 (19.086)</td><td>252.9 (191.70)</td><td>2504 (1826.1)</td><td>25004 (18939)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">16</span></span></span></span></th><td>8.33 (6.716)</td><td>65.46 (57.22)</td><td>628.2 (572.4)</td><td>6255.3 (6113.3)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">64</span></span></span></span></th><td>3.29 (2.213)</td><td>17.75 (15.25)</td><td>159.16 (160.2)</td><td>1564 (1486.8)</td></tr></tbody></table><figcaption><p><a class="figure" data-ref="fig_stats_gnode_count" data-preview-anchor="/g_trees/previews/fig_stats_gnode_count.html?def§fig_stats_gnode_count" href="#fig_stats_gnode_count">Figure&nbsp;8</a>: G-Node Counts</p><p>Average number of <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> in 200 randomly generated <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, for various combinations of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. The numbers in parentheses give the <a href="https://en.wikipedia.org/wiki/Variance">variance</a>.</p></figcaption></figure><p>This analysis provides some intuition for the practical efficiency and scalability of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>: the expected number of <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> is linear in the number of <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a>, and is very close to a balanced tree structure. By understanding the total number of nodes and their size distribution, we can optimize and parameterize <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> to minimize disk accesses, align nodes with disk block sizes, and design effective caching and buffer management strategies. This ensures that the tree operations are performed with high I/O efficiency, reducing latency and increasing throughput. Moreover, it helps in predicting performance, identifying bottlenecks, and managing storage costs by ensuring efficient space allocation and utilization. Combined with the fixed size of the <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> (see <a class="hsection" data-hsection-level="2" data-ref="new_gtrees" data-hl="true" href="#new_gtrees">Section&nbsp;4.3</a>) this makes <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> potentially well-suited for external memory models while retaining much of their simplicity in practice.</p></section></section><h3 id="old_gtrees"><a class="hsection" data-ref="old_gtrees" data-hl="true" data-hsection-level="2" href="#old_gtrees">4.2 Well-Known G-Trees</a></h3><section data-hsection="old_gtrees"><p>We now discuss how several well-known probabilistic data structures can be expressed as <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>.</p><h4 id="gtree_zip_trees"><a class="hsection" data-ref="gtree_zip_trees" data-hl="true" data-hsection-level="3" href="#gtree_zip_trees">4.2.1 Zip-Trees as G-Trees</a></h4><section data-hsection="gtree_zip_trees"><p>As we described in our derivation of the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, instantiating <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with sorted linked lists yields the <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>. Aside from mentioning <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> here for the sake of completeness, we want to point out an interesting implementation detail: whereas <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> store the <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> of every <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> in its <a data-ref="vertex" data-preview-anchor="previews/vertex.html?def§vertex" data-hl="true" href="#vertex">vertex</a>, a sorted linked list <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> only needs to store one <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> per linked list that it contains, i.e., one <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> per <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a>.</p></section><h4 id="gtree_zipzip_trees"><a class="hsection" data-ref="gtree_zipzip_trees" data-hl="true" data-hsection-level="3" href="#gtree_zipzip_trees">4.2.2 Zip-Zip-Trees and Beyond</a></h4><section data-hsection="gtree_zipzip_trees"><p>Instantiation of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> requires a set data structure. <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> <em>are</em> set data structures themselves. How about some recursion?</p><p>Instantiating <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>, i.e., with <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> instantiated with sorted linked lists, yields exactly the <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a>. <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">Zip-zip-trees</a><a class="bib" data-ref="gila2023zip" data-preview-anchor="previews/gila2023zip.html?def§gila2023zip" href="g_trees/assets/references/gila2023zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Gila</span> <span style="font-variant:normal;">et al.</span></span>, 2023)</span></a> were initially introduced as a modification of the tie-breaking algorithm of <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>. This modification is essentially an ad-hoc variation, whereas our description of <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a> highlights them as a (highly relevant) member of a family of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> obtained from recursive self-instantiation. In particular, once <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> and sorted linked lists have been implemented, the difference between implementing <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> and <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a> consists of a single type-level operation, whereas the algorithmic definition of <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a> requires manual adjustment of all tree manipulation algorithms.</p><p>More generally, we can instantiate <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> that are themselves recursively instantiated, to an arbitrary depth and choice of recursion anchor. Using sorted linked lists as recursion anchors yields a family of <dfn id="zipk_tree"><a data-ref="zipk_tree" data-preview-anchor="/g_trees/previews/zipk_tree.html?def§zipk_tree" data-hl="true" href="#zipk_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0888em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathit">zip</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8944em;"><span style="top:-3.1083em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>-trees</a></dfn> whose first two members are the <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> and the <a data-ref="zipzip" data-preview-anchor="/g_trees/previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a>.</p></section><h4 id="gtree_treaps"><a class="hsection" data-ref="gtree_treaps" data-hl="true" data-hsection-level="3" href="#gtree_treaps">4.2.3 Treaps as G-Trees</a></h4><section data-hsection="gtree_treaps"><p>We end this section with a fun observation: if we restrict each nested tree structure in the <a data-ref="zipk_tree" data-preview-anchor="previews/zipk_tree.html?def§zipk_tree" data-hl="true" href="#zipk_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1013em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord text"><span class="mord">zip</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9069em;"><span style="top:-3.1208em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>-trees</a> to store ranks in a single bit (i.e., we cap the <a data-ref="geometric_distribution" data-preview-anchor="previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> at two), we obtain exactly the <a data-ref="treap" data-preview-anchor="previews/treap.html?def§treap" data-hl="true" href="#treap">treaps</a> with k-bit <a data-ref="priority" data-preview-anchor="previews/priority.html?def§priority" data-hl="true" href="#priority">priorities</a>. We doubt that this has any practical applications, but it shows that the family of recursively instantiated <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> is interesting beyond just the <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a>.</p></section></section><h3 id="new_gtrees"><a class="hsection" data-ref="new_gtrees" data-hl="true" data-hsection-level="2" href="#new_gtrees">4.3 Novel G-Trees</a></h3><section data-hsection="new_gtrees"><p>Having shown that the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> encompass several useful and well-known data structures, we now give some members of the family that have <em>not</em> been independently described before. In particular, we tackle the problem of finding <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> data structures that are efficient on secondary storage (or in terms of cpu caches) by storing up to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> items in a single vertex. Previous solutions<a class="bib" data-ref="golovin2009bgolovin2010bbender2016antisafavi2023b" data-preview-anchor="previews/golovin2009bgolovin2010bbender2016antisafavi2023b.html?def§golovin2009bgolovin2010bbender2016antisafavi2023b" href="g_trees/assets/references/golovin2009b.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Bender</span> <span style="font-variant:normal;">et al.</span></span>, 2016; <span style="font-variant:small-caps;">Golovin</span>, 2009, 2010; <span style="font-variant:small-caps;">Safavi</span> &#38; <span style="font-variant:small-caps;">Seybold</span>, 2023)</span></a> all incur a significant overhead in terms of conceptual complexity compared to their binary counterparts. With <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, we merely need to change the underlying set datastructure <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> to one that stores <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> in blocks of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>.</p><p>A key intuition behind classic <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> is that of choosing <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> from a <a data-ref="geometric_distribution" data-preview-anchor="previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> with <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> because this is the distribution of the height of a randomly chosen vertex in a perfectly balanced binary <a data-ref="tree" data-preview-anchor="previews/tree.html?def§tree" data-hl="true" href="#tree">tree</a>. For <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-ary trees, the same intuition instructs us to draw <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> from a <a data-ref="geometric_distribution" data-preview-anchor="previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> with <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="enclosing normalText"><span class="mord text"><span class="mord">,</span></span></span></span></span></span> as this is the distribution of heights in a perfectly balanced <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-ary <a data-ref="tree" data-preview-anchor="previews/tree.html?def§tree" data-hl="true" href="#tree">tree</a>. Our <a class="hsection" data-hsection-level="2" data-ref="analysis" data-hl="true" href="#analysis">analysis</a> confirmes that — with high probability — the resulting trees are of logarithmic height and their <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> store <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a>.</p><p>The second key insight toward an efficient <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-ary data structure is, paradoxically, that there is no need to be clever about it. Sorted linked lists are naïve, inefficient data structures, yet <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> are efficient. We can be similarly naïve for our <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-ary construction.</p><p>We use a sorted linked list in which every node stores up to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>. We require all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> to be stored as early in the list as possible; this is the simplemost way of achieving <a data-ref="history_independent" data-preview-anchor="/g_trees/previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independence</a>. In other words, the only node to store fewer than <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> is the final node. We call such a list a <dfn id="k_list"><a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-list</a></dfn> (see <a class="figure" data-ref="fig_klist" data-preview-anchor="/g_trees/previews/fig_klist.html?def§fig_klist" href="#fig_klist">Figure&nbsp;9</a>).</p><figure id="fig_klist"><img alt="A rendering of a 3-list." src="/g_trees/assets/graphics/klist.svg" /><figcaption><p><a class="figure" data-ref="fig_klist" data-preview-anchor="/g_trees/previews/fig_klist.html?def§fig_klist" href="#fig_klist">Figure&nbsp;9</a>: A 3-List</p><p>The sorted <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span>-list</a> containing <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">23</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">26</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">32</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">35</span></span></span></span>. Sometimes, things are just that simple.</p></figcaption></figure><p>Instantiating <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with the <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> and a <a data-ref="geometric_distribution" data-preview-anchor="/g_trees/previews/geometric_distribution.html?def§geometric_distribution" data-hl="true" href="#geometric_distribution">geometric distribution</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="/g_trees/previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span></a></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> yields a family of data structures we call the <dfn id="kzip_tree"><a data-ref="kzip_tree" data-preview-anchor="/g_trees/previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-trees</a></dfn>. <a class="figure" data-ref="fig_2ziptree" data-preview-anchor="/g_trees/previews/fig_2ziptree.html?def§fig_2ziptree" href="#fig_2ziptree">Figure&nbsp;10</a> depicts the <a data-ref="kzip_tree" data-preview-anchor="/g_trees/previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>-zip-tree</a> for our running example set.</p><figure class="wide" id="fig_2ziptree"><img alt="A rendering of a 2-zip-tree." src="/g_trees/assets/graphics/kziptree.svg" /><figcaption><p><a class="figure" data-ref="fig_2ziptree" data-preview-anchor="/g_trees/previews/fig_2ziptree.html?def§fig_2ziptree" href="#fig_2ziptree">Figure&nbsp;10</a>: 2-Zip-Tree</p><p>A <a data-ref="kzip_tree" data-preview-anchor="/g_trees/previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span>-zip-tree</a>. Linked list pointers are <span style="color: #808080;">dashed</span>, child pointers are solid. The three layers of the layout correspond to the three different <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a>. Observe how contracting the linked lists effectively yields <a class="figure" data-ref="fig_gnodes" data-preview-anchor="/g_trees/previews/fig_gnodes.html?def§fig_gnodes" href="#fig_gnodes">Figure&nbsp;5</a>.</p></figcaption></figure><p>The <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> are inefficient data structures — inserting or deleting the first item requires <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> time in a <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-list</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> items. The <a data-ref="kzip_tree" data-preview-anchor="previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-trees</a> are nevertheless efficient, because the expected size of the <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>, and hence, the expected length of the <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a>, is constant for any <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="enclosing" data-ref="geo_p" data-preview-anchor="previews/geo_p.html?def§geo_p" data-hl="true"><a href="#geo_p"><span class="mord mathnormal">p</span></a></span></span></span></span>. More efficient alternatives to <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> exist, such as <a class="bib" data-ref="shao1994unrolling" data-preview-anchor="previews/shao1994unrolling.html?def§shao1994unrolling" href="g_trees/assets/references/shao1994unrolling.pdf"><span class="bibText">unrolled linked lists</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Shao</span> <span style="font-variant:normal;">et al.</span></span>, 1994)</span></a>. These are not <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a>, however.</p><p>What is the expected height of a <a data-ref="kzip_tree" data-preview-anchor="previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-tree</a>? Asymptotically, we know it to be in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>, since we have <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> different <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a>, each a list of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> (which has a length in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span>). <a class="figure" data-ref="fig_kzip_height" data-preview-anchor="previews/fig_kzip_height.html?def§fig_kzip_height" href="#fig_kzip_height">Figure&nbsp;11</a> gives experimental measures for some specific <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>. The <dfn>height amplification</dfn> we report is the height of each tree divided by the height of a perfectly-balanced <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>-ary tree on <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> vertices.</p><figure id="fig_kzip_height"><h6 class="dataHeading">Tree Height</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></th><td>15.29 (5.61)</td><td>26.59 (8.89)</td><td>38.20 (9.47)</td><td>50.58 (11.86)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></th><td>8.61 (2.40)</td><td>14.92 (3.38)</td><td>21.97 (4.41)</td><td>29.13 (4.93)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span></th><td>4.28 (0.98)</td><td>8.06 (2.04)</td><td>12.36 (2.43)</td><td>16.66 (2.45)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">63</span></span></span></span></th><td>2.37 (0.24)</td><td>5.05 (1.43)</td><td>8.43 (1.69)</td><td>12.08 (2.52)</td></tr></tbody></table><h6 class="dataHeading">Height Amplification</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></th><td>2.18 (0.11)</td><td>2.66 (0.09)</td><td>2.73 (0.05)</td><td>2.98 (0.04)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></th><td>2.15 (0.15)</td><td>2.98 (0.14)</td><td>3.14 (0.09)</td><td>3.24 (0.06)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span></th><td>2.14 (0.24)</td><td>2.69 (0.23)</td><td>3.09 (0.15)</td><td>3.33 (0.10)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">63</span></span></span></span></th><td>1.18 (0.06)</td><td>2.53 (0.36)</td><td>2.81 (0.19)</td><td>4.03 (0.28)</td></tr></tbody></table><figcaption><p><a class="figure" data-ref="fig_kzip_height" data-preview-anchor="/g_trees/previews/fig_kzip_height.html?def§fig_kzip_height" href="#fig_kzip_height">Figure&nbsp;11</a>: K-Zip-Tree Height</p><p>The heights of 200 randomly generated <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, i.e., the maximal number of pointers to traverse from the root to a leaf; for various combinations of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. The numbers in parentheses give the <a href="https://en.wikipedia.org/wiki/Variance">variance</a>.</p><p>The second table normalizes the heights by the heights of perfectly-balanced <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>-ary trees on <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> vertices.</p></figcaption></figure><p>Another concern of interest is space amplification: in the worst case, every <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> would be in its own <a data-ref="k_list" data-preview-anchor="previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-list</a>, resulting in a space amplification factor of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>. Intuitively, this occurs only rarely, however: the expected size of each <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> is <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>, and the probability for a <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> to have size <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> decreases exponentially in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>. Any overfull <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a> consists of one or more full linked-list vertices, plus exactly one underfull linked-list vertex. Hence, the overfull <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> contribute an amplification factor of at most two. Roughly half of the nodes will be overful, so we can expect a space amplification around <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.5</span></span></span></span>. <a class="figure" data-ref="fig_space_amplification" data-preview-anchor="previews/fig_space_amplification.html?def§fig_space_amplification" href="#fig_space_amplification">Figure&nbsp;12</a> backs up this intuition with experimental data.</p><figure id="fig_space_amplification"><h6 class="dataHeading">Space Amplification</h6><table><thead><tr><th></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">000</span></span></span></span></th></tr></thead><tbody><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></th><td>1 (0)</td><td>1 (0)</td><td>1 (0)</td><td>1 (0)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span></th><td>1.338 (0.0055)</td><td>1.302 (0.0006)</td><td>1.298 (0.0000)</td><td>1.297 (0.0000)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">15</span></span></span></span></th><td>1.743 (0.0786)</td><td>1.544 (0.0061)</td><td>1.515 (0.0006)</td><td>1.512 (0.0000)</td></tr><tr><th><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">63</span></span></span></span></th><td>2.431 (0.612)</td><td>1.669 (0.0316)</td><td>1.578 (0.0032)</td><td>1.565 (0.0003)</td></tr></tbody></table><figcaption><p><a class="figure" data-ref="fig_space_amplification" data-preview-anchor="/g_trees/previews/fig_space_amplification.html?def§fig_space_amplification" href="#fig_space_amplification">Figure&nbsp;12</a>: Space Amplification</p><p>Total number of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> slots divided by total number of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in 200 randomly generated <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, for various combinations of <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="enclosing" data-ref="ana_n" data-preview-anchor="/g_trees/previews/ana_n.html?def§ana_n" data-hl="true"><a href="#ana_n"><span class="mord mathnormal">n</span></a></span></span></span></span> and <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="enclosing" data-ref="ana_k" data-preview-anchor="/g_trees/previews/ana_k.html?def§ana_k" data-hl="true"><a href="#ana_k"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></a></span></span></span></span>. The numbers in parentheses give the <a href="https://en.wikipedia.org/wiki/Variance">variance</a>.</p></figcaption></figure><p>Recursive instantiation of <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with other <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> leads to the family of <a data-ref="zipk_tree" data-preview-anchor="/g_trees/previews/zipk_tree.html?def§zipk_tree" data-hl="true" href="#zipk_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1013em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord text"><span class="mord">zip</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9069em;"><span style="top:-3.1208em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>-trees</a> when using linked lists (i.e., <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>-lists</a>) as the recursion anchor. We can similarly use arbitrary <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> as the recursion anchor to obtain the <a data-ref="kzip_tree" data-preview-anchor="/g_trees/previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-trees</a>, the <dfn id="kzipzip_tree"><a data-ref="kzipzip_tree" data-preview-anchor="/g_trees/previews/kzipzip_tree.html?def§kzipzip_tree" data-hl="true" href="#kzipzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-zip-trees</a></dfn>, and so on.</p><p>Through some small adjustments, the definition of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> can be adapted to yield generalizations of <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> and <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> analogons of <a class="bib" data-ref="comer1979ubiquitous" data-preview-anchor="previews/comer1979ubiquitous.html?def§comer1979ubiquitous" href="g_trees/assets/references/comer1979ubiquitous.pdf"><span class="bibText">B<sup>+</sup>-trees</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Comer</span>, 1979)</span></a>. We sketch these extensions in <a class="hsection" data-hsection-level="1" data-ref="variants" data-hl="true" href="#variants">Appendix B</a>.</p></section></section><h2 id="implementation"><a class="hsection" data-ref="implementation" data-hl="true" data-hsection-level="1" href="#implementation">5 Algorithms</a></h2><section data-hsection="implementation"><p>We now present asymptotically efficient algorithms for working with <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>. To optimize for clarity of presentation, we describe purely functional algorithms: all functions return new values rather than mutating their inputs.</p><p>We explicitly distinguish between non-empty and possibly-empty <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> and internal set data structures, to clarify which cases can arise in our algorithms. To reinforce those distinctions, our pseudocode comes with pseudotypes. The typing also aids in keeping straight the multiple levels of parametric polymorphism (“generics”). Finally, pseudotypes allow us to explicitly define the functions that must be available on <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span> for our algorithms to work. </p><code class="pseudocode" id="interface_set"><div class="locGutter" data-l="1" data-i="0" id="interface_setL1"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="1" href="#interface_setL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Interface for non-empty sets of pairs of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> (of type <a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a>) and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a>. To be implemented by <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="/g_trees/previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span>.</div></div><div class="locGutter" data-l="2" data-i="0" id="interface_setL2"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="2" href="#interface_setL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">interface</span> <dfn id="c_neset"><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_neset_item"><a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a></dfn><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="3" data-i="1" id="interface_setL3"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="3" href="#interface_setL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Create a set containing a single <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> and its <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a>.</div></div><div class="locGutter" data-l="4" data-i="1" id="interface_setL4"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="4" href="#interface_setL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_neset_singleton"><a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a></dfn><span class="rb2 open">(</span><dfn id="c_neset_singleton_item"><a class="rustic value" data-ref="c_neset_singleton_item" data-preview-anchor="/g_trees/previews/c_neset_singleton_item.html?def§c_neset_singleton_item" data-hl="true" href="#c_neset_singleton_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a><span class="deemph">,</span> <dfn id="c_neset_singleton_subtree"><a class="rustic value" data-ref="c_neset_singleton_subtree" data-preview-anchor="/g_trees/previews/c_neset_singleton_subtree.html?def§c_neset_singleton_subtree" data-hl="true" href="#c_neset_singleton_subtree">subtree</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb0 open">&lt;</span><span class="kw">Self</span><span class="rb0 close">&gt;</span><span class="rb2 close">)</span> <span class="deemph">-></span> <span class="kw">Self</span></div></div><div class="locGutter" data-l="5" data-i="1" id="interface_setL5"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="5" href="#interface_setL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div></div><div class="locGutter" data-l="6" data-i="1" id="interface_setL6"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="6" href="#interface_setL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Split <a class="rustic value" data-ref="c_neset_split_self" data-preview-anchor="/g_trees/previews/c_neset_split_self.html?def§c_neset_split_self" data-hl="true" href="#c_neset_split_self">self</a> into the set of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a> strictly less than <a class="rustic value" data-ref="c_neset_split_key" data-preview-anchor="/g_trees/previews/c_neset_split_key.html?def§c_neset_split_key" data-hl="true" href="#c_neset_split_key">key</a>, the <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> of <a class="rustic value" data-ref="c_neset_split_key" data-preview-anchor="/g_trees/previews/c_neset_split_key.html?def§c_neset_split_key" data-hl="true" href="#c_neset_split_key">key</a> if <a class="rustic value" data-ref="c_neset_split_key" data-preview-anchor="/g_trees/previews/c_neset_split_key.html?def§c_neset_split_key" data-hl="true" href="#c_neset_split_key">key</a> is an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> in <a class="rustic value" data-ref="c_neset_split_self" data-preview-anchor="/g_trees/previews/c_neset_split_self.html?def§c_neset_split_self" data-hl="true" href="#c_neset_split_self">self</a>, and the set of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a> strictly greater than <a class="rustic value" data-ref="c_neset_split_key" data-preview-anchor="/g_trees/previews/c_neset_split_key.html?def§c_neset_split_key" data-hl="true" href="#c_neset_split_key">key</a>.</div></div><div class="locGutter" data-l="7" data-i="1" id="interface_setL7"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="7" href="#interface_setL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_neset_split"><a class="rustic function" data-ref="c_neset_split" data-preview-anchor="/g_trees/previews/c_neset_split.html?def§c_neset_split" data-hl="true" href="#c_neset_split">split</a></dfn><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="8" data-i="2" id="interface_setL8"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="8" href="#interface_setL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_neset_split_self"><a class="rustic value" data-ref="c_neset_split_self" data-preview-anchor="/g_trees/previews/c_neset_split_self.html?def§c_neset_split_self" data-hl="true" href="#c_neset_split_self">self</a></dfn><span class="deemph">:</span> <span class="kw">Self</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="9" data-i="2" id="interface_setL9"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="9" href="#interface_setL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_neset_split_key"><a class="rustic value" data-ref="c_neset_split_key" data-preview-anchor="/g_trees/previews/c_neset_split_key.html?def§c_neset_split_key" data-hl="true" href="#c_neset_split_key">key</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="10" data-i="1" id="interface_setL10"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="10" href="#interface_setL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">)</span> <span class="deemph">-></span> <span class="rb2 open">(</span><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb0 open">&lt;</span><span class="kw">Self</span><span class="rb0 close">&gt;</span><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="rb0 open">&lt;</span><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><span class="kw">Self</span><span class="rb1 close">&gt;</span><span class="rb0 close">&gt;</span><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb0 open">&lt;</span><span class="kw">Self</span><span class="rb0 close">&gt;</span><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="11" data-i="1" id="interface_setL11"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="11" href="#interface_setL11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div></div><div class="locGutter" data-l="12" data-i="1" id="interface_setL12"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="12" href="#interface_setL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Join two sets <a class="rustic value" data-ref="c_neset_join_left" data-preview-anchor="/g_trees/previews/c_neset_join_left.html?def§c_neset_join_left" data-hl="true" href="#c_neset_join_left">left</a> and <a class="rustic value" data-ref="c_neset_join_right" data-preview-anchor="/g_trees/previews/c_neset_join_right.html?def§c_neset_join_right" data-hl="true" href="#c_neset_join_right">right</a> into a single set, assuming that all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_neset_join_left" data-preview-anchor="/g_trees/previews/c_neset_join_left.html?def§c_neset_join_left" data-hl="true" href="#c_neset_join_left">left</a> are less than any <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_neset_join_right" data-preview-anchor="/g_trees/previews/c_neset_join_right.html?def§c_neset_join_right" data-hl="true" href="#c_neset_join_right">right</a>.</div></div><div class="locGutter" data-l="13" data-i="1" id="interface_setL13"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="13" href="#interface_setL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_neset_join"><a class="rustic function" data-ref="c_neset_join" data-preview-anchor="/g_trees/previews/c_neset_join.html?def§c_neset_join" data-hl="true" href="#c_neset_join">join</a></dfn><span class="rb2 open">(</span><dfn id="c_neset_join_left"><a class="rustic value" data-ref="c_neset_join_left" data-preview-anchor="/g_trees/previews/c_neset_join_left.html?def§c_neset_join_left" data-hl="true" href="#c_neset_join_left">left</a></dfn><span class="deemph">:</span> <span class="kw">Self</span><span class="deemph">,</span> <dfn id="c_neset_join_right"><a class="rustic value" data-ref="c_neset_join_right" data-preview-anchor="/g_trees/previews/c_neset_join_right.html?def§c_neset_join_right" data-hl="true" href="#c_neset_join_right">right</a></dfn><span class="deemph">:</span> <span class="kw">Self</span><span class="rb2 close">)</span> <span class="deemph">-></span> <span class="kw">Self</span></div></div><div class="locGutter" data-l="14" data-i="1" id="interface_setL14"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="14" href="#interface_setL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div></div><div class="locGutter" data-l="15" data-i="1" id="interface_setL15"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="15" href="#interface_setL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Split <a class="rustic value" data-ref="c_neset_remove_min_self" data-preview-anchor="/g_trees/previews/c_neset_remove_min_self.html?def§c_neset_remove_min_self" data-hl="true" href="#c_neset_remove_min_self">self</a> into the least <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> and its <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a>, and the remaining set.</div></div><div class="locGutter" data-l="16" data-i="1" id="interface_setL16"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="16" href="#interface_setL16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_neset_remove_min"><a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a></dfn><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="17" data-i="2" id="interface_setL17"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="17" href="#interface_setL17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_neset_remove_min_self"><a class="rustic value" data-ref="c_neset_remove_min_self" data-preview-anchor="/g_trees/previews/c_neset_remove_min_self.html?def§c_neset_remove_min_self" data-hl="true" href="#c_neset_remove_min_self">self</a></dfn><span class="deemph">:</span> <span class="kw">Self</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="18" data-i="1" id="interface_setL18"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="18" href="#interface_setL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">)</span> <span class="deemph">-></span> <span class="rb2 open">(</span><span class="rb0 open">(</span><a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><span class="kw">Self</span><span class="rb1 close">&gt;</span><span class="rb0 close">)</span><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb0 open">&lt;</span><span class="kw">Self</span><span class="rb0 close">&gt;</span><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="19" data-i="1" id="interface_setL19"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="19" href="#interface_setL19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div></div><div class="locGutter" data-l="20" data-i="1" id="interface_setL20"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="20" href="#interface_setL20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Insert an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> and its <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> into <a class="rustic value" data-ref="c_neset_remove_min_self" data-preview-anchor="/g_trees/previews/c_neset_remove_min_self.html?def§c_neset_remove_min_self" data-hl="true" href="#c_neset_remove_min_self">self</a>. The new <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> must be strictly less than any <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> in <a class="rustic value" data-ref="c_neset_remove_min_self" data-preview-anchor="/g_trees/previews/c_neset_remove_min_self.html?def§c_neset_remove_min_self" data-hl="true" href="#c_neset_remove_min_self">self</a>.</div></div><div class="locGutter" data-l="21" data-i="1" id="interface_setL21"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="21" href="#interface_setL21">21</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_neset_insert_min"><a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a></dfn><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="22" data-i="2" id="interface_setL22"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="22" href="#interface_setL22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_neset_insert_min_self"><a class="rustic value" data-ref="c_neset_insert_min_self" data-preview-anchor="/g_trees/previews/c_neset_insert_min_self.html?def§c_neset_insert_min_self" data-hl="true" href="#c_neset_insert_min_self">self</a></dfn><span class="deemph">:</span> <span class="kw">Self</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="23" data-i="2" id="interface_setL23"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="23" href="#interface_setL23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_neset_insert_min_new"><a class="rustic value" data-ref="c_neset_insert_min_new" data-preview-anchor="/g_trees/previews/c_neset_insert_min_new.html?def§c_neset_insert_min_new" data-hl="true" href="#c_neset_insert_min_new">new_min</a></dfn><span class="deemph">:</span> <span class="rb0 open">(</span><a class="rustic typeArg" data-ref="c_neset_item" data-preview-anchor="/g_trees/previews/c_neset_item.html?def§c_neset_item" data-hl="true" href="#c_neset_item">I</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><span class="kw">Self</span><span class="rb1 close">&gt;</span><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="24" data-i="1" id="interface_setL24"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="24" href="#interface_setL24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">)</span> <span class="deemph">-></span> <span class="kw">Self</span></div></div><div class="locGutter" data-l="25" data-i="0" id="interface_setL25"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="25" href="#interface_setL25">25</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="26" data-i="0" id="interface_setL26"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="26" href="#interface_setL26">26</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="27" data-i="0" id="interface_setL27"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="27" href="#interface_setL27">27</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">A set, possibly empty. Parameterized over a type of non-empty sets.</div></div><div class="locGutter" data-l="28" data-i="0" id="interface_setL28"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="28" href="#interface_setL28">28</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">enum</span> <dfn id="c_set"><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_set_s"><a class="rustic typeArg" data-ref="c_set_s" data-preview-anchor="/g_trees/previews/c_set_s.html?def§c_set_s" data-hl="true" href="#c_set_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="29" data-i="1" id="interface_setL29"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="29" href="#interface_setL29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_nonempty"><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a></dfn><span class="rb2 open">(</span><a class="rustic typeArg" data-ref="c_set_s" data-preview-anchor="/g_trees/previews/c_set_s.html?def§c_set_s" data-hl="true" href="#c_set_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="30" data-i="1" id="interface_setL30"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="30" href="#interface_setL30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_empty"><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a></dfn></div></div><div class="locGutter" data-l="31" data-i="0" id="interface_setL31"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="31" href="#interface_setL31">31</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="32" data-i="0" id="interface_setL32"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="32" href="#interface_setL32">32</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="33" data-i="0" id="interface_setL33"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="33" href="#interface_setL33">33</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">A <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a>.</div></div><div class="locGutter" data-l="34" data-i="0" id="interface_setL34"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="34" href="#interface_setL34">34</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">struct</span> <dfn id="c_gtree_node"><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_gtree_node_i"><a class="rustic typeArg" data-ref="c_gtree_node_i" data-preview-anchor="/g_trees/previews/c_gtree_node_i.html?def§c_gtree_node_i" data-hl="true" href="#c_gtree_node_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_gtree_node_s"><a class="rustic typeArg" data-ref="c_gtree_node_s" data-preview-anchor="/g_trees/previews/c_gtree_node_s.html?def§c_gtree_node_s" data-hl="true" href="#c_gtree_node_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_gtree_node_i" data-preview-anchor="/g_trees/previews/c_gtree_node_i.html?def§c_gtree_node_i" data-hl="true" href="#c_gtree_node_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="35" data-i="1" id="interface_setL35"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="35" href="#interface_setL35">35</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_gtree_node_rank"><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a></dfn><span class="deemph">:</span> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span><span class="deemph">,</span></div></div><div class="locGutter" data-l="36" data-i="1" id="interface_setL36"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="36" href="#interface_setL36">36</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">Nonzero number of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a>.</div></div><div class="locGutter" data-l="37" data-i="1" id="interface_setL37"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="37" href="#interface_setL37">37</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_gtree_node_set"><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_gtree_node_s" data-preview-anchor="/g_trees/previews/c_gtree_node_s.html?def§c_gtree_node_s" data-hl="true" href="#c_gtree_node_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="deemph">,</span></div></div><div class="locGutter" data-l="38" data-i="1" id="interface_setL38"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="38" href="#interface_setL38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div><div class="lineComment">The one <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a>.</div></div><div class="locGutter" data-l="39" data-i="1" id="interface_setL39"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="39" href="#interface_setL39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_gtree_node_right"><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_gtree_node_s" data-preview-anchor="/g_trees/previews/c_gtree_node_s.html?def§c_gtree_node_s" data-hl="true" href="#c_gtree_node_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="40" data-i="0" id="interface_setL40"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="40" href="#interface_setL40">40</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="41" data-i="0" id="interface_setL41"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="41" href="#interface_setL41">41</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="42" data-i="0" id="interface_setL42"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="42" href="#interface_setL42">42</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">A <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>, possibly empty.</div></div><div class="locGutter" data-l="43" data-i="0" id="interface_setL43"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="43" href="#interface_setL43">43</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">enum</span> <dfn id="c_gtree"><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_gtree_i"><a class="rustic typeArg" data-ref="c_gtree_i" data-preview-anchor="/g_trees/previews/c_gtree_i.html?def§c_gtree_i" data-hl="true" href="#c_gtree_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_gtree_s"><a class="rustic typeArg" data-ref="c_gtree_s" data-preview-anchor="/g_trees/previews/c_gtree_s.html?def§c_gtree_s" data-hl="true" href="#c_gtree_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_gtree_i" data-preview-anchor="/g_trees/previews/c_gtree_i.html?def§c_gtree_i" data-hl="true" href="#c_gtree_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="44" data-i="1" id="interface_setL44"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="44" href="#interface_setL44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_gtree_nonempty"><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a></dfn><span class="rb2 open">(</span><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_gtree_s" data-preview-anchor="/g_trees/previews/c_gtree_s.html?def§c_gtree_s" data-hl="true" href="#c_gtree_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb0 close">&gt;</span><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="45" data-i="1" id="interface_setL45"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="45" href="#interface_setL45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_gtree_empty"><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a></dfn></div></div><div class="locGutter" data-l="46" data-i="0" id="interface_setL46"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="46" href="#interface_setL46">46</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="47" data-i="0" id="interface_setL47"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="47" href="#interface_setL47">47</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="48" data-i="0" id="interface_setL48"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="48" href="#interface_setL48">48</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">An optional value.</div></div><div class="locGutter" data-l="49" data-i="0" id="interface_setL49"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="49" href="#interface_setL49">49</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">enum</span> <dfn id="Option"><a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a></dfn><span class="rb1 open">&lt;</span><dfn id="OptionV"><a class="rustic typeArg" data-ref="OptionV" data-preview-anchor="/g_trees/previews/OptionV.html?def§OptionV" data-hl="true" href="#OptionV">V</a></dfn><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="50" data-i="1" id="interface_setL50"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="50" href="#interface_setL50">50</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="OptionSome"><a class="rustic variant" data-ref="OptionSome" data-preview-anchor="/g_trees/previews/OptionSome.html?def§OptionSome" data-hl="true" href="#OptionSome">Some</a></dfn><span class="rb2 open">(</span><a class="rustic typeArg" data-ref="OptionV" data-preview-anchor="/g_trees/previews/OptionV.html?def§OptionV" data-hl="true" href="#OptionV">V</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="51" data-i="1" id="interface_setL51"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="51" href="#interface_setL51">51</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="OptionNone"><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a></dfn></div></div><div class="locGutter" data-l="52" data-i="0" id="interface_setL52"><div class="lineNumber"><a data-pseudocode="interface_set" data-ref="interface_set" data-hllines="52" href="#interface_setL52">52</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>The functions we require of a <a class="rustic interface" data-ref="c_neset" data-preview-anchor="previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a> are standard functions that are easily implemented in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span> time with typical set data <span class="nowrap">structures<span class="sidenoteCounter">3</span></span><span class="marginale"><span class="sidenoteCounter">3</span>Not that we needed an efficient implementation: since <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> have constant expected size, even <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> implementations do not hurt the asymptotic efficiency of our algorithms.</span>. The only choice worth commenting on is that of using a specialized <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a> function instead of a generic <code>insert</code> function. This choice is to allow for more efficient, specialized implementations, as well as to highlight that our algorithms interact with the internal set data structures in a surprisingly constrained manner.</p><p>Before giving our main algorithms, we define some helper functions:</p><code class="pseudocode" id="code_helpers"><div class="locGutter" data-l="1" data-i="0" id="code_helpersL1"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="1" href="#code_helpersL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Insert an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> and its <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> into a possibly empty set. The new <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> must be strictly less than any <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> in <a class="rustic value" data-ref="c_set_insert_min_set" data-preview-anchor="/g_trees/previews/c_set_insert_min_set.html?def§c_set_insert_min_set" data-hl="true" href="#c_set_insert_min_set">set</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_helpersL2"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="2" href="#code_helpersL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_set_insert_min"><a class="rustic function" data-ref="c_set_insert_min" data-preview-anchor="/g_trees/previews/c_set_insert_min.html?def§c_set_insert_min" data-hl="true" href="#c_set_insert_min">set_insert_min</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_set_insert_min_item"><a class="rustic typeArg" data-ref="c_set_insert_min_item" data-preview-anchor="/g_trees/previews/c_set_insert_min_item.html?def§c_set_insert_min_item" data-hl="true" href="#c_set_insert_min_item">I</a></dfn><span class="deemph">,</span> <dfn id="c_set_insert_min_s"><a class="rustic typeArg" data-ref="c_set_insert_min_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_s.html?def§c_set_insert_min_s" data-hl="true" href="#c_set_insert_min_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_set_insert_min_item" data-preview-anchor="/g_trees/previews/c_set_insert_min_item.html?def§c_set_insert_min_item" data-hl="true" href="#c_set_insert_min_item">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_helpersL3"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="3" href="#code_helpersL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_insert_min_set"><a class="rustic value" data-ref="c_set_insert_min_set" data-preview-anchor="/g_trees/previews/c_set_insert_min_set.html?def§c_set_insert_min_set" data-hl="true" href="#c_set_insert_min_set">set</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_set_insert_min_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_s.html?def§c_set_insert_min_s" data-hl="true" href="#c_set_insert_min_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_helpersL4"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="4" href="#code_helpersL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_insert_min_new"><a class="rustic value" data-ref="c_set_insert_min_new" data-preview-anchor="/g_trees/previews/c_set_insert_min_new.html?def§c_set_insert_min_new" data-hl="true" href="#c_set_insert_min_new">new_min</a></dfn><span class="deemph">:</span> <span class="rb2 open">(</span><a class="rustic typeArg" data-ref="c_set_insert_min_item" data-preview-anchor="/g_trees/previews/c_set_insert_min_item.html?def§c_set_insert_min_item" data-hl="true" href="#c_set_insert_min_item">I</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_set_insert_min_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_s.html?def§c_set_insert_min_s" data-hl="true" href="#c_set_insert_min_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb0 close">&gt;</span><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="0" id="code_helpersL5"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="5" href="#code_helpersL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic typeArg" data-ref="c_set_insert_min_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_s.html?def§c_set_insert_min_s" data-hl="true" href="#c_set_insert_min_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_helpersL6"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="6" href="#code_helpersL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="c_set_insert_min_set" data-preview-anchor="/g_trees/previews/c_set_insert_min_set.html?def§c_set_insert_min_set" data-hl="true" href="#c_set_insert_min_set">set</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="7" data-i="2" id="code_helpersL7"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="7" href="#code_helpersL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="8" data-i="3" id="code_helpersL8"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="8" href="#code_helpersL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="c_set_insert_min_new" data-preview-anchor="/g_trees/previews/c_set_insert_min_new.html?def§c_set_insert_min_new" data-hl="true" href="#c_set_insert_min_new">new_min</a><span class="deemph">.</span>0<span class="deemph">,</span></div></div><div class="locGutter" data-l="9" data-i="3" id="code_helpersL9"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="9" href="#code_helpersL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="c_set_insert_min_new" data-preview-anchor="/g_trees/previews/c_set_insert_min_new.html?def§c_set_insert_min_new" data-hl="true" href="#c_set_insert_min_new">new_min</a><span class="deemph">.</span>1<span class="deemph">,</span></div></div><div class="locGutter" data-l="10" data-i="2" id="code_helpersL10"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="10" href="#code_helpersL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="11" data-i="2" id="code_helpersL11"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="11" href="#code_helpersL11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_set_insert_min_set_s"><a class="rustic value" data-ref="c_set_insert_min_set_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_set_s.html?def§c_set_insert_min_set_s" data-hl="true" href="#c_set_insert_min_set_s">s</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="12" data-i="3" id="code_helpersL12"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="12" href="#code_helpersL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb1 open">(</span><a class="rustic value" data-ref="c_set_insert_min_set_s" data-preview-anchor="/g_trees/previews/c_set_insert_min_set_s.html?def§c_set_insert_min_set_s" data-hl="true" href="#c_set_insert_min_set_s">s</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_set_insert_min_new" data-preview-anchor="/g_trees/previews/c_set_insert_min_new.html?def§c_set_insert_min_new" data-hl="true" href="#c_set_insert_min_new">new_min</a><span class="rb1 close">)</span></div></div><div class="locGutter" data-l="13" data-i="2" id="code_helpersL13"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="13" href="#code_helpersL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span></div></div><div class="locGutter" data-l="14" data-i="1" id="code_helpersL14"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="14" href="#code_helpersL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="15" data-i="0" id="code_helpersL15"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="15" href="#code_helpersL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="16" data-i="0" id="code_helpersL16"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="16" href="#code_helpersL16">16</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="17" data-i="0" id="code_helpersL17"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="17" href="#code_helpersL17">17</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Replace the leftmost <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> of a <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a>.</div></div><div class="locGutter" data-l="18" data-i="0" id="code_helpersL18"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="18" href="#code_helpersL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_update_leftmost"><a class="rustic function" data-ref="c_update_leftmost" data-preview-anchor="/g_trees/previews/c_update_leftmost.html?def§c_update_leftmost" data-hl="true" href="#c_update_leftmost">update_leftmost</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_update_leftmost_i"><a class="rustic typeArg" data-ref="c_update_leftmost_i" data-preview-anchor="/g_trees/previews/c_update_leftmost_i.html?def§c_update_leftmost_i" data-hl="true" href="#c_update_leftmost_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_update_leftmost_s"><a class="rustic typeArg" data-ref="c_update_leftmost_s" data-preview-anchor="/g_trees/previews/c_update_leftmost_s.html?def§c_update_leftmost_s" data-hl="true" href="#c_update_leftmost_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_leftmost_i" data-preview-anchor="/g_trees/previews/c_update_leftmost_i.html?def§c_update_leftmost_i" data-hl="true" href="#c_update_leftmost_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="19" data-i="1" id="code_helpersL19"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="19" href="#code_helpersL19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_update_leftmost_node"><a class="rustic value" data-ref="c_update_leftmost_node" data-preview-anchor="/g_trees/previews/c_update_leftmost_node.html?def§c_update_leftmost_node" data-hl="true" href="#c_update_leftmost_node">node</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_leftmost_i" data-preview-anchor="/g_trees/previews/c_update_leftmost_i.html?def§c_update_leftmost_i" data-hl="true" href="#c_update_leftmost_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_leftmost_s" data-preview-anchor="/g_trees/previews/c_update_leftmost_s.html?def§c_update_leftmost_s" data-hl="true" href="#c_update_leftmost_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="20" data-i="1" id="code_helpersL20"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="20" href="#code_helpersL20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_update_leftmost_new"><a class="rustic value" data-ref="c_update_leftmost_new" data-preview-anchor="/g_trees/previews/c_update_leftmost_new.html?def§c_update_leftmost_new" data-hl="true" href="#c_update_leftmost_new">new_left</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_leftmost_i" data-preview-anchor="/g_trees/previews/c_update_leftmost_i.html?def§c_update_leftmost_i" data-hl="true" href="#c_update_leftmost_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_leftmost_s" data-preview-anchor="/g_trees/previews/c_update_leftmost_s.html?def§c_update_leftmost_s" data-hl="true" href="#c_update_leftmost_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="21" data-i="0" id="code_helpersL21"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="21" href="#code_helpersL21">21</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_leftmost_i" data-preview-anchor="/g_trees/previews/c_update_leftmost_i.html?def§c_update_leftmost_i" data-hl="true" href="#c_update_leftmost_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_leftmost_s" data-preview-anchor="/g_trees/previews/c_update_leftmost_s.html?def§c_update_leftmost_s" data-hl="true" href="#c_update_leftmost_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="22" data-i="1" id="code_helpersL22"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="22" href="#code_helpersL22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="23" data-i="2" id="code_helpersL23"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="23" href="#code_helpersL23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="c_update_leftmost_leftmost_item"><a class="rustic value" data-ref="c_update_leftmost_leftmost_item" data-preview-anchor="/g_trees/previews/c_update_leftmost_leftmost_item.html?def§c_update_leftmost_leftmost_item" data-hl="true" href="#c_update_leftmost_leftmost_item">leftmost_item</a></dfn><span class="deemph">,</span> <span class="deemph">_</span><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="24" data-i="2" id="code_helpersL24"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="24" href="#code_helpersL24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><dfn id="c_update_leftmost_others"><a class="rustic value" data-ref="c_update_leftmost_others" data-preview-anchor="/g_trees/previews/c_update_leftmost_others.html?def§c_update_leftmost_others" data-hl="true" href="#c_update_leftmost_others">other_pairs</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="25" data-i="1" id="code_helpersL25"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="25" href="#code_helpersL25">25</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_update_leftmost_node" data-preview-anchor="/g_trees/previews/c_update_leftmost_node.html?def§c_update_leftmost_node" data-hl="true" href="#c_update_leftmost_node">node</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="26" data-i="1" id="code_helpersL26"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="26" href="#code_helpersL26">26</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="27" data-i="2" id="code_helpersL27"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="27" href="#code_helpersL27">27</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_update_leftmost_node" data-preview-anchor="/g_trees/previews/c_update_leftmost_node.html?def§c_update_leftmost_node" data-hl="true" href="#c_update_leftmost_node">node</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="28" data-i="2" id="code_helpersL28"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="28" href="#code_helpersL28">28</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_insert_min" data-preview-anchor="/g_trees/previews/c_set_insert_min.html?def§c_set_insert_min" data-hl="true" href="#c_set_insert_min">set_insert_min</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="29" data-i="3" id="code_helpersL29"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="29" href="#code_helpersL29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="c_update_leftmost_others" data-preview-anchor="/g_trees/previews/c_update_leftmost_others.html?def§c_update_leftmost_others" data-hl="true" href="#c_update_leftmost_others">other_pairs</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="30" data-i="3" id="code_helpersL30"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="30" href="#code_helpersL30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="c_update_leftmost_leftmost_item" data-preview-anchor="/g_trees/previews/c_update_leftmost_leftmost_item.html?def§c_update_leftmost_leftmost_item" data-hl="true" href="#c_update_leftmost_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_update_leftmost_new" data-preview-anchor="/g_trees/previews/c_update_leftmost_new.html?def§c_update_leftmost_new" data-hl="true" href="#c_update_leftmost_new">new_left</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="31" data-i="2" id="code_helpersL31"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="31" href="#code_helpersL31">31</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="32" data-i="2" id="code_helpersL32"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="32" href="#code_helpersL32">32</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_update_leftmost_node" data-preview-anchor="/g_trees/previews/c_update_leftmost_node.html?def§c_update_leftmost_node" data-hl="true" href="#c_update_leftmost_node">node</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="33" data-i="1" id="code_helpersL33"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="33" href="#code_helpersL33">33</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="34" data-i="0" id="code_helpersL34"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="34" href="#code_helpersL34">34</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="35" data-i="0" id="code_helpersL35"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="35" href="#code_helpersL35">35</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="36" data-i="0" id="code_helpersL36"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="36" href="#code_helpersL36">36</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Replace the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of a <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a>.</div></div><div class="locGutter" data-l="37" data-i="0" id="code_helpersL37"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="37" href="#code_helpersL37">37</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_update_right"><a class="rustic function" data-ref="c_update_right" data-preview-anchor="/g_trees/previews/c_update_right.html?def§c_update_right" data-hl="true" href="#c_update_right">update_right</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_update_right_i"><a class="rustic typeArg" data-ref="c_update_right_i" data-preview-anchor="/g_trees/previews/c_update_right_i.html?def§c_update_right_i" data-hl="true" href="#c_update_right_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_update_right_s"><a class="rustic typeArg" data-ref="c_update_right_s" data-preview-anchor="/g_trees/previews/c_update_right_s.html?def§c_update_right_s" data-hl="true" href="#c_update_right_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_right_i" data-preview-anchor="/g_trees/previews/c_update_right_i.html?def§c_update_right_i" data-hl="true" href="#c_update_right_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="38" data-i="1" id="code_helpersL38"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="38" href="#code_helpersL38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_update_right_node"><a class="rustic value" data-ref="c_update_right_node" data-preview-anchor="/g_trees/previews/c_update_right_node.html?def§c_update_right_node" data-hl="true" href="#c_update_right_node">node</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_right_i" data-preview-anchor="/g_trees/previews/c_update_right_i.html?def§c_update_right_i" data-hl="true" href="#c_update_right_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_right_s" data-preview-anchor="/g_trees/previews/c_update_right_s.html?def§c_update_right_s" data-hl="true" href="#c_update_right_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="39" data-i="1" id="code_helpersL39"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="39" href="#code_helpersL39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_update_right_new"><a class="rustic value" data-ref="c_update_right_new" data-preview-anchor="/g_trees/previews/c_update_right_new.html?def§c_update_right_new" data-hl="true" href="#c_update_right_new">new_right</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_right_i" data-preview-anchor="/g_trees/previews/c_update_right_i.html?def§c_update_right_i" data-hl="true" href="#c_update_right_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_right_s" data-preview-anchor="/g_trees/previews/c_update_right_s.html?def§c_update_right_s" data-hl="true" href="#c_update_right_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="40" data-i="0" id="code_helpersL40"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="40" href="#code_helpersL40">40</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_update_right_i" data-preview-anchor="/g_trees/previews/c_update_right_i.html?def§c_update_right_i" data-hl="true" href="#c_update_right_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_update_right_s" data-preview-anchor="/g_trees/previews/c_update_right_s.html?def§c_update_right_s" data-hl="true" href="#c_update_right_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="41" data-i="1" id="code_helpersL41"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="41" href="#code_helpersL41">41</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="42" data-i="2" id="code_helpersL42"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="42" href="#code_helpersL42">42</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_update_right_node" data-preview-anchor="/g_trees/previews/c_update_right_node.html?def§c_update_right_node" data-hl="true" href="#c_update_right_node">node</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="43" data-i="2" id="code_helpersL43"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="43" href="#code_helpersL43">43</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_update_right_node" data-preview-anchor="/g_trees/previews/c_update_right_node.html?def§c_update_right_node" data-hl="true" href="#c_update_right_node">node</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="44" data-i="2" id="code_helpersL44"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="44" href="#code_helpersL44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_update_right_new" data-preview-anchor="/g_trees/previews/c_update_right_new.html?def§c_update_right_new" data-hl="true" href="#c_update_right_new">new_right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="45" data-i="1" id="code_helpersL45"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="45" href="#code_helpersL45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="46" data-i="0" id="code_helpersL46"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="46" href="#code_helpersL46">46</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="47" data-i="0" id="code_helpersL47"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="47" href="#code_helpersL47">47</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="48" data-i="0" id="code_helpersL48"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="48" href="#code_helpersL48">48</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">A (non-empty) <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a> has a root <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> that consists of a <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, a <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a>, and a non-empty set of pairs of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a>.<br />Occasionally, we need to construct a non-empty <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a> from a <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, a <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a>, and a <em>possibly empty</em> set of pairs of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> and their <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtrees</a>. If the set is empty, the lifted <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a> is simply the supplied <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a>.</div></div><div class="locGutter" data-l="49" data-i="0" id="code_helpersL49"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="49" href="#code_helpersL49">49</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_norm"><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_norm_i"><a class="rustic typeArg" data-ref="c_norm_i" data-preview-anchor="/g_trees/previews/c_norm_i.html?def§c_norm_i" data-hl="true" href="#c_norm_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_norm_s"><a class="rustic typeArg" data-ref="c_norm_s" data-preview-anchor="/g_trees/previews/c_norm_s.html?def§c_norm_s" data-hl="true" href="#c_norm_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_norm_i" data-preview-anchor="/g_trees/previews/c_norm_i.html?def§c_norm_i" data-hl="true" href="#c_norm_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="50" data-i="1" id="code_helpersL50"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="50" href="#code_helpersL50">50</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_norm_arg"><a class="rustic value" data-ref="c_norm_arg" data-preview-anchor="/g_trees/previews/c_norm_arg.html?def§c_norm_arg" data-hl="true" href="#c_norm_arg">s</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_norm_s" data-preview-anchor="/g_trees/previews/c_norm_s.html?def§c_norm_s" data-hl="true" href="#c_norm_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="51" data-i="1" id="code_helpersL51"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="51" href="#code_helpersL51">51</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_norm_right"><a class="rustic value" data-ref="c_norm_right" data-preview-anchor="/g_trees/previews/c_norm_right.html?def§c_norm_right" data-hl="true" href="#c_norm_right">right</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_norm_i" data-preview-anchor="/g_trees/previews/c_norm_i.html?def§c_norm_i" data-hl="true" href="#c_norm_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_norm_s" data-preview-anchor="/g_trees/previews/c_norm_s.html?def§c_norm_s" data-hl="true" href="#c_norm_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="52" data-i="1" id="code_helpersL52"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="52" href="#code_helpersL52">52</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_norm_rank"><a class="rustic value" data-ref="c_norm_rank" data-preview-anchor="/g_trees/previews/c_norm_rank.html?def§c_norm_rank" data-hl="true" href="#c_norm_rank">rank</a></dfn><span class="deemph">:</span> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span><span class="deemph">,</span></div></div><div class="locGutter" data-l="53" data-i="0" id="code_helpersL53"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="53" href="#code_helpersL53">53</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_norm_i" data-preview-anchor="/g_trees/previews/c_norm_i.html?def§c_norm_i" data-hl="true" href="#c_norm_i">I</a><span class="deemph">,</span> <a class="rustic typeArg" data-ref="c_norm_s" data-preview-anchor="/g_trees/previews/c_norm_s.html?def§c_norm_s" data-hl="true" href="#c_norm_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="54" data-i="1" id="code_helpersL54"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="54" href="#code_helpersL54">54</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="c_norm_arg" data-preview-anchor="/g_trees/previews/c_norm_arg.html?def§c_norm_arg" data-hl="true" href="#c_norm_arg">s</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="55" data-i="2" id="code_helpersL55"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="55" href="#code_helpersL55">55</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic value" data-ref="c_norm_right" data-preview-anchor="/g_trees/previews/c_norm_right.html?def§c_norm_right" data-hl="true" href="#c_norm_right">right</a></div></div><div class="locGutter" data-l="56" data-i="2" id="code_helpersL56"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="56" href="#code_helpersL56">56</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_norm_bla"><a class="rustic value" data-ref="c_norm_bla" data-preview-anchor="/g_trees/previews/c_norm_bla.html?def§c_norm_bla" data-hl="true" href="#c_norm_bla">set</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="57" data-i="3" id="code_helpersL57"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="57" href="#code_helpersL57">57</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="58" data-i="4" id="code_helpersL58"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="58" href="#code_helpersL58">58</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_norm_rank" data-preview-anchor="/g_trees/previews/c_norm_rank.html?def§c_norm_rank" data-hl="true" href="#c_norm_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="59" data-i="4" id="code_helpersL59"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="59" href="#code_helpersL59">59</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_norm_bla" data-preview-anchor="/g_trees/previews/c_norm_bla.html?def§c_norm_bla" data-hl="true" href="#c_norm_bla">set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="60" data-i="4" id="code_helpersL60"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="60" href="#code_helpersL60">60</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_norm_right" data-preview-anchor="/g_trees/previews/c_norm_right.html?def§c_norm_right" data-hl="true" href="#c_norm_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="61" data-i="3" id="code_helpersL61"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="61" href="#code_helpersL61">61</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="62" data-i="2" id="code_helpersL62"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="62" href="#code_helpersL62">62</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="63" data-i="1" id="code_helpersL63"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="63" href="#code_helpersL63">63</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="64" data-i="0" id="code_helpersL64"><div class="lineNumber"><a data-pseudocode="code_helpers" data-ref="code_helpers" data-hllines="64" href="#code_helpersL64">64</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>While it is possible to derive insertion and deletion algorithms by generalizing the original <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a> algorithms (see <a class="hsection" data-hsection-level="1" data-ref="explicit_implementations" data-hl="true" href="#explicit_implementations">Appendix C</a> for examples), we opt for a fully self-contained presentation here. Zipping and unzipping are similar to the join and split functions of <a class="bib" data-ref="blelloch2016just" data-preview-anchor="previews/blelloch2016just.html?def§blelloch2016just" href="g_trees/assets/references/blelloch2016just.pdf"><span class="bibText">join-based tree algorithms</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Blelloch</span> <span style="font-variant:normal;">et al.</span></span>, 2016)</span></a>. We consistently use zip and unzip terminology when operating on <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>, and join and split terminology when operating on the underlying set datastructure <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="enclosing" data-ref="gtree_g" data-preview-anchor="previews/gtree_g.html?def§gtree_g" data-hl="true"><a href="#gtree_g"><span class="mord mathfrak">S</span></a></span></span></span></span>.</p><p>We build our insertion and deletion algorithms from algorithms for unzipping and zipping <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>. Unzipping takes a key and splits a <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> into the tree of all <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> less than the key and the tree of all <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> greater than the key<span class="marginale">The key itself occurs in neither returned tree, even if it is part of the input tree.</span>. Zipping takes two trees, the first containing only <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> strictly lesser than any <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> of the second, and joins them together into a single tree. We call this version of zipping <code>zip2</code>, because it takes <em>two</em> arguments. We also use a <code>zip3</code> function, which additionally incorporates a single <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> into the tree that is strictly greater than all <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> of the first tree, and strictly less than all <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> of the second tree. Insertion and deletion can then be implemented as composition of unzipping and zipping (<code>zip3</code> and <code>zip2</code>, respectively) — see <a class="figure" data-ref="fig_insert_and_delete" data-preview-anchor="previews/fig_insert_and_delete.html?def§fig_insert_and_delete" href="#fig_insert_and_delete">Figure&nbsp;13</a>.</p><figure id="fig_insert_and_delete"><img style="max-width: 450px; margin: 0 auto;" alt="A G-tree, before and after inserting an item, with the unzipped tree as an intermediate step." src="/g_trees/assets/graphics/gtreeInsertDelete.svg" /><figcaption><p><a class="figure" data-ref="fig_insert_and_delete" data-preview-anchor="/g_trees/previews/fig_insert_and_delete.html?def§fig_insert_and_delete" href="#fig_insert_and_delete">Figure&nbsp;13</a>: Insertion and Deletion</p><p>Example of inserting or deleting <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">18</span></span></span></span> of <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span></span></span></span> via unzipping followed by zipping.</p></figcaption></figure><p>To unzip a <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>, <a class="rustic function" data-ref="c_neset_split" data-preview-anchor="previews/c_neset_split.html?def§c_neset_split" data-hl="true" href="#c_neset_split">split</a> the inner <a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a> of the root <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a>, and then performs a case distinction<span class="marginale">We give a more thorough description in the form of code comments.</span> to determine whether it is necessary to recurse:</p><code class="pseudocode" id="code_unzip"><div class="locGutter" data-l="1" data-i="0" id="code_unzipL1"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="1" href="#code_unzipL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Split <a class="rustic value" data-ref="c_unzip_t" data-preview-anchor="/g_trees/previews/c_unzip_t.html?def§c_unzip_t" data-hl="true" href="#c_unzip_t">t</a> into two trees of <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> strictly less and greater than <a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a> respectively.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_unzipL2"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="2" href="#code_unzipL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_unzip"><a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_unzip_i"><a class="rustic typeArg" data-ref="c_unzip_i" data-preview-anchor="/g_trees/previews/c_unzip_i.html?def§c_unzip_i" data-hl="true" href="#c_unzip_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_unzip_s"><a class="rustic typeArg" data-ref="c_unzip_s" data-preview-anchor="/g_trees/previews/c_unzip_s.html?def§c_unzip_s" data-hl="true" href="#c_unzip_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_unzip_i" data-preview-anchor="/g_trees/previews/c_unzip_i.html?def§c_unzip_i" data-hl="true" href="#c_unzip_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_unzipL3"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="3" href="#code_unzipL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_unzip_t"><a class="rustic value" data-ref="c_unzip_t" data-preview-anchor="/g_trees/previews/c_unzip_t.html?def§c_unzip_t" data-hl="true" href="#c_unzip_t">t</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_unzip_s" data-preview-anchor="/g_trees/previews/c_unzip_s.html?def§c_unzip_s" data-hl="true" href="#c_unzip_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_unzipL4"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="4" href="#code_unzipL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_unzip_key"><a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_unzip_i" data-preview-anchor="/g_trees/previews/c_unzip_i.html?def§c_unzip_i" data-hl="true" href="#c_unzip_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="0" id="code_unzipL5"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="5" href="#code_unzipL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <span class="rb1 open">(</span><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_unzip_s" data-preview-anchor="/g_trees/previews/c_unzip_s.html?def§c_unzip_s" data-hl="true" href="#c_unzip_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_unzip_s" data-preview-anchor="/g_trees/previews/c_unzip_s.html?def§c_unzip_s" data-hl="true" href="#c_unzip_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="rb1 close">)</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_unzipL6"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="6" href="#code_unzipL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="c_unzip_t" data-preview-anchor="/g_trees/previews/c_unzip_t.html?def§c_unzip_t" data-hl="true" href="#c_unzip_t">t</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="7" data-i="2" id="code_unzipL7"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="7" href="#code_unzipL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Unzipping the empty tree is trivial.</div></div><div class="locGutter" data-l="8" data-i="2" id="code_unzipL8"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="8" href="#code_unzipL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <span class="open">(</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="deemph">,</span> <a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="close">)</span></div></div><div class="locGutter" data-l="9" data-i="2" id="code_unzipL9"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="9" href="#code_unzipL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div></div><div class="locGutter" data-l="10" data-i="2" id="code_unzipL10"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="10" href="#code_unzipL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">For non-empty trees, split the inner set.</div></div><div class="locGutter" data-l="11" data-i="2" id="code_unzipL11"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="11" href="#code_unzipL11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_unzip_set"><a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <span class="kw">match</span> <a class="rustic function" data-ref="c_neset_split" data-preview-anchor="/g_trees/previews/c_neset_split.html?def§c_neset_split" data-hl="true" href="#c_neset_split">split</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a><span class="rb0 close">)</span> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="12" data-i="3" id="code_unzipL12"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="12" href="#code_unzipL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">If <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a> contains the split point (<a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a>), then everything up until the split point becomes the left return value, with the <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> of the split point becoming the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of the left return. Everything after the split point becomes the right return, with the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of the current node becoming the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of the right return. No further recursion.</div></div><div class="locGutter" data-l="13" data-i="3" id="code_unzipL13"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="13" href="#code_unzipL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span></div></div><div class="locGutter" data-l="14" data-i="4" id="code_unzipL14"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="14" href="#code_unzipL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="c_left_set_0"><a class="rustic value" data-ref="c_left_set_0" data-preview-anchor="/g_trees/previews/c_left_set_0.html?def§c_left_set_0" data-hl="true" href="#c_left_set_0">left_set</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="15" data-i="4" id="code_unzipL15"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="15" href="#code_unzipL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionSome" data-preview-anchor="/g_trees/previews/OptionSome.html?def§OptionSome" data-hl="true" href="#OptionSome">Some</a><span class="rb1 open">(</span><dfn id="c_left_subtree_of_key"><a class="rustic value" data-ref="c_left_subtree_of_key" data-preview-anchor="/g_trees/previews/c_left_subtree_of_key.html?def§c_left_subtree_of_key" data-hl="true" href="#c_left_subtree_of_key">left_subtree_of_key</a></dfn><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="16" data-i="4" id="code_unzipL16"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="16" href="#code_unzipL16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="c_right_set_0"><a class="rustic value" data-ref="c_right_set_0" data-preview-anchor="/g_trees/previews/c_right_set_0.html?def§c_right_set_0" data-hl="true" href="#c_right_set_0">right_set</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="17" data-i="3" id="code_unzipL17"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="17" href="#code_unzipL17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <span class="open">(</span></div></div><div class="locGutter" data-l="18" data-i="4" id="code_unzipL18"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="18" href="#code_unzipL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb1 open">(</span><a class="rustic value" data-ref="c_left_set_0" data-preview-anchor="/g_trees/previews/c_left_set_0.html?def§c_left_set_0" data-hl="true" href="#c_left_set_0">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_left_subtree_of_key" data-preview-anchor="/g_trees/previews/c_left_subtree_of_key.html?def§c_left_subtree_of_key" data-hl="true" href="#c_left_subtree_of_key">left_subtree_of_key</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="19" data-i="4" id="code_unzipL19"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="19" href="#code_unzipL19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb1 open">(</span><a class="rustic value" data-ref="c_right_set_0" data-preview-anchor="/g_trees/previews/c_right_set_0.html?def§c_right_set_0" data-hl="true" href="#c_right_set_0">right_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="20" data-i="3" id="code_unzipL20"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="20" href="#code_unzipL20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span></div></div><div class="locGutter" data-l="21" data-i="3" id="code_unzipL21"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="21" href="#code_unzipL21">21</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">If <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a> does not contain the split point, and all its <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> are less than the split point, then recursively split the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a>.</div></div><div class="locGutter" data-l="22" data-i="3" id="code_unzipL22"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="22" href="#code_unzipL22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><span class="deemph">_</span><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="23" data-i="4" id="code_unzipL23"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="23" href="#code_unzipL23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="c_left_0"><a class="rustic value" data-ref="c_left_0" data-preview-anchor="/g_trees/previews/c_left_0.html?def§c_left_0" data-hl="true" href="#c_left_0">left</a></dfn><span class="deemph">,</span> <dfn id="c_right_0"><a class="rustic value" data-ref="c_right_0" data-preview-anchor="/g_trees/previews/c_right_0.html?def§c_right_0" data-hl="true" href="#c_right_0">right</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="24" data-i="4" id="code_unzipL24"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="24" href="#code_unzipL24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <span class="open">(</span></div></div><div class="locGutter" data-l="25" data-i="5" id="code_unzipL25"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="25" href="#code_unzipL25">25</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span><a class="rustic function" data-ref="c_update_right" data-preview-anchor="/g_trees/previews/c_update_right.html?def§c_update_right" data-hl="true" href="#c_update_right">update_right</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_left_0" data-preview-anchor="/g_trees/previews/c_left_0.html?def§c_left_0" data-hl="true" href="#c_left_0">left</a><span class="rb0 close">)</span><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="26" data-i="5" id="code_unzipL26"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="26" href="#code_unzipL26">26</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="c_right_0" data-preview-anchor="/g_trees/previews/c_right_0.html?def§c_right_0" data-hl="true" href="#c_right_0">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="27" data-i="4" id="code_unzipL27"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="27" href="#code_unzipL27">27</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span></div></div><div class="locGutter" data-l="28" data-i="3" id="code_unzipL28"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="28" href="#code_unzipL28">28</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="29" data-i="3" id="code_unzipL29"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="29" href="#code_unzipL29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">If <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a> does not contain the split point, but it does contain <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> greater than the split point, then recursively split the <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">leftmost subtree</a> of those greater <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>.</div></div><div class="locGutter" data-l="30" data-i="3" id="code_unzipL30"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="30" href="#code_unzipL30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="c_left_set_1"><a class="rustic value" data-ref="c_left_set_1" data-preview-anchor="/g_trees/previews/c_left_set_1.html?def§c_left_set_1" data-hl="true" href="#c_left_set_1">left_set</a></dfn><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb1 open">(</span><dfn id="c_r_0"><a class="rustic value" data-ref="c_r_0" data-preview-anchor="/g_trees/previews/c_r_0.html?def§c_r_0" data-hl="true" href="#c_r_0">r</a></dfn><span class="rb1 close">)</span><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="31" data-i="4" id="code_unzipL31"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="31" href="#code_unzipL31">31</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="32" data-i="5" id="code_unzipL32"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="32" href="#code_unzipL32">32</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="r_leftmost_item"><a class="rustic value" data-ref="r_leftmost_item" data-preview-anchor="/g_trees/previews/r_leftmost_item.html?def§r_leftmost_item" data-hl="true" href="#r_leftmost_item">r_leftmost_item</a></dfn><span class="deemph">,</span> <dfn id="r_leftmost_subtree"><a class="rustic value" data-ref="r_leftmost_subtree" data-preview-anchor="/g_trees/previews/r_leftmost_subtree.html?def§r_leftmost_subtree" data-hl="true" href="#r_leftmost_subtree">r_leftmost_subtree</a></dfn><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="33" data-i="5" id="code_unzipL33"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="33" href="#code_unzipL33">33</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="r_remaining"><a class="rustic value" data-ref="r_remaining" data-preview-anchor="/g_trees/previews/r_remaining.html?def§r_remaining" data-hl="true" href="#r_remaining">r_remaining</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="34" data-i="4" id="code_unzipL34"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="34" href="#code_unzipL34">34</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_r_0" data-preview-anchor="/g_trees/previews/c_r_0.html?def§c_r_0" data-hl="true" href="#c_r_0">r</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="35" data-i="4" id="code_unzipL35"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="35" href="#code_unzipL35">35</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="36" data-i="5" id="code_unzipL36"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="36" href="#code_unzipL36">36</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="c_left_1"><a class="rustic value" data-ref="c_left_1" data-preview-anchor="/g_trees/previews/c_left_1.html?def§c_left_1" data-hl="true" href="#c_left_1">left</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="37" data-i="5" id="code_unzipL37"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="37" href="#code_unzipL37">37</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="c_right_1"><a class="rustic value" data-ref="c_right_1" data-preview-anchor="/g_trees/previews/c_right_1.html?def§c_right_1" data-hl="true" href="#c_right_1">right</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="38" data-i="4" id="code_unzipL38"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="38" href="#code_unzipL38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb2 open">(</span><a class="rustic value" data-ref="r_leftmost_subtree" data-preview-anchor="/g_trees/previews/r_leftmost_subtree.html?def§r_leftmost_subtree" data-hl="true" href="#r_leftmost_subtree">r_leftmost_subtree</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_key" data-preview-anchor="/g_trees/previews/c_unzip_key.html?def§c_unzip_key" data-hl="true" href="#c_unzip_key">key</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="39" data-i="4" id="code_unzipL39"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="39" href="#code_unzipL39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <span class="open">(</span></div></div><div class="locGutter" data-l="40" data-i="5" id="code_unzipL40"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="40" href="#code_unzipL40">40</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_left_set_1" data-preview-anchor="/g_trees/previews/c_left_set_1.html?def§c_left_set_1" data-hl="true" href="#c_left_set_1">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_left_1" data-preview-anchor="/g_trees/previews/c_left_1.html?def§c_left_1" data-hl="true" href="#c_left_1">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="41" data-i="5" id="code_unzipL41"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="41" href="#code_unzipL41">41</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="42" data-i="6" id="code_unzipL42"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="42" href="#code_unzipL42">42</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="43" data-i="6" id="code_unzipL43"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="43" href="#code_unzipL43">43</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_insert_min" data-preview-anchor="/g_trees/previews/c_set_insert_min.html?def§c_set_insert_min" data-hl="true" href="#c_set_insert_min">set_insert_min</a><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="44" data-i="7" id="code_unzipL44"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="44" href="#code_unzipL44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="r_remaining" data-preview-anchor="/g_trees/previews/r_remaining.html?def§r_remaining" data-hl="true" href="#r_remaining">r_remaining</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="45" data-i="7" id="code_unzipL45"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="45" href="#code_unzipL45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="r_leftmost_item" data-preview-anchor="/g_trees/previews/r_leftmost_item.html?def§r_leftmost_item" data-hl="true" href="#r_leftmost_item">r_leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_right_1" data-preview-anchor="/g_trees/previews/c_right_1.html?def§c_right_1" data-hl="true" href="#c_right_1">right</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="46" data-i="6" id="code_unzipL46"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="46" href="#code_unzipL46">46</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="47" data-i="6" id="code_unzipL47"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="47" href="#code_unzipL47">47</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_unzip_set" data-preview-anchor="/g_trees/previews/c_unzip_set.html?def§c_unzip_set" data-hl="true" href="#c_unzip_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="48" data-i="5" id="code_unzipL48"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="48" href="#code_unzipL48">48</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="49" data-i="4" id="code_unzipL49"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="49" href="#code_unzipL49">49</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span></div></div><div class="locGutter" data-l="50" data-i="3" id="code_unzipL50"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="50" href="#code_unzipL50">50</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="51" data-i="2" id="code_unzipL51"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="51" href="#code_unzipL51">51</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span></div></div><div class="locGutter" data-l="52" data-i="1" id="code_unzipL52"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="52" href="#code_unzipL52">52</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="53" data-i="0" id="code_unzipL53"><div class="lineNumber"><a data-pseudocode="code_unzip" data-ref="code_unzip" data-hllines="53" href="#code_unzipL53">53</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>Since the expected size of <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> is constant with high probability, we can treat all functions of the <a class="rustic interface" data-ref="c_neset" data-preview-anchor="previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a> interface as running in constant time. Each recursive call of the <a class="rustic function" data-ref="c_unzip" data-preview-anchor="previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a> function is to a <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> of strictly decreasing <a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a>, so the recursion depth is bounded by the height of the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>, which is logarithmic with high probability. Hence, the overall running time is in <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">))</span></span></span></span> with high probability.</p><p>We can similarly give a recursive algorithm<span class="marginale">Again, the main description takes the form of code comments.</span> for zipping together two <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with the same complexity properties:</p><code class="pseudocode" id="code_zip2"><div class="locGutter" data-l="1" data-i="0" id="code_zip2L1"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="1" href="#code_zip2L1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Join two trees <a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a> and <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a> into a single tree, assuming that all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a> are less than any <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_zip2L2"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="2" href="#code_zip2L2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_zip2"><a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_zip2_i"><a class="rustic typeArg" data-ref="c_zip2_i" data-preview-anchor="/g_trees/previews/c_zip2_i.html?def§c_zip2_i" data-hl="true" href="#c_zip2_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_zip2_s"><a class="rustic typeArg" data-ref="c_zip2_s" data-preview-anchor="/g_trees/previews/c_zip2_s.html?def§c_zip2_s" data-hl="true" href="#c_zip2_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip2_i" data-preview-anchor="/g_trees/previews/c_zip2_i.html?def§c_zip2_i" data-hl="true" href="#c_zip2_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_zip2L3"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="3" href="#code_zip2L3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip2_left"><a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip2_s" data-preview-anchor="/g_trees/previews/c_zip2_s.html?def§c_zip2_s" data-hl="true" href="#c_zip2_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_zip2L4"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="4" href="#code_zip2L4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip2_right"><a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip2_s" data-preview-anchor="/g_trees/previews/c_zip2_s.html?def§c_zip2_s" data-hl="true" href="#c_zip2_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="0" id="code_zip2L5"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="5" href="#code_zip2L5">5</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip2_s" data-preview-anchor="/g_trees/previews/c_zip2_s.html?def§c_zip2_s" data-hl="true" href="#c_zip2_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_zip2L6"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="6" href="#code_zip2L6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <span class="open">(</span><a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a><span class="close">)</span> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="7" data-i="2" id="code_zip2L7"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="7" href="#code_zip2L7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">If <a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a> is empty, then the join is the other tree.</div></div><div class="locGutter" data-l="8" data-i="2" id="code_zip2L8"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="8" href="#code_zip2L8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="deemph">,</span> <span class="deemph">_</span><span class="close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a></div></div><div class="locGutter" data-l="9" data-i="2" id="code_zip2L9"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="9" href="#code_zip2L9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">If <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a> is empty, then the join is the other tree.</div></div><div class="locGutter" data-l="10" data-i="2" id="code_zip2L10"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="10" href="#code_zip2L10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><span class="deemph">_</span><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a></div></div><div class="locGutter" data-l="11" data-i="2" id="code_zip2L11"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="11" href="#code_zip2L11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Neither tree is empty, so there is real work to do. What that entails depends on how the ranks of the root nodes of the two trees compare.</div></div><div class="locGutter" data-l="12" data-i="2" id="code_zip2L12"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="12" href="#code_zip2L12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_zip2_l"><a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a></dfn><span class="rb0 close">)</span><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_zip2_r"><a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a></dfn><span class="rb0 close">)</span><span class="close">)</span> <span class="deemph">=></span> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="13" data-i="3" id="code_zip2L13"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="13" href="#code_zip2L13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">if</span> <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> &lt; <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="14" data-i="4" id="code_zip2L14"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="14" href="#code_zip2L14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Zip <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a> into the leftmost <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> of <a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a>.</div></div><div class="locGutter" data-l="15" data-i="4" id="code_zip2L15"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="15" href="#code_zip2L15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="16" data-i="5" id="code_zip2L16"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="16" href="#code_zip2L16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><span class="deemph">_</span><span class="deemph">,</span> <dfn id="c_zip2_r_leftmost_subtree"><a class="rustic value" data-ref="c_zip2_r_leftmost_subtree" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_subtree.html?def§c_zip2_r_leftmost_subtree" data-hl="true" href="#c_zip2_r_leftmost_subtree">r_leftmost_subtree</a></dfn><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="17" data-i="5" id="code_zip2L17"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="17" href="#code_zip2L17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="deemph">_</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="18" data-i="4" id="code_zip2L18"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="18" href="#code_zip2L18">18</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="19" data-i="4" id="code_zip2L19"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="19" href="#code_zip2L19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="c_zip2_zipped_0"><a class="rustic value" data-ref="c_zip2_zipped_0" data-preview-anchor="/g_trees/previews/c_zip2_zipped_0.html?def§c_zip2_zipped_0" data-hl="true" href="#c_zip2_zipped_0">zipped</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_zip2_left" data-preview-anchor="/g_trees/previews/c_zip2_left.html?def§c_zip2_left" data-hl="true" href="#c_zip2_left">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_r_leftmost_subtree" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_subtree.html?def§c_zip2_r_leftmost_subtree" data-hl="true" href="#c_zip2_r_leftmost_subtree">r_leftmost_subtree</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="20" data-i="4" id="code_zip2L20"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="20" href="#code_zip2L20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="21" data-i="5" id="code_zip2L21"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="21" href="#code_zip2L21">21</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_update_leftmost" data-preview-anchor="/g_trees/previews/c_update_leftmost.html?def§c_update_leftmost" data-hl="true" href="#c_update_leftmost">update_leftmost</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_zipped_0" data-preview-anchor="/g_trees/previews/c_zip2_zipped_0.html?def§c_zip2_zipped_0" data-hl="true" href="#c_zip2_zipped_0">zipped</a><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="22" data-i="4" id="code_zip2L22"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="22" href="#code_zip2L22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="23" data-i="3" id="code_zip2L23"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="23" href="#code_zip2L23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="24" data-i="3" id="code_zip2L24"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="24" href="#code_zip2L24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">else</span> <span class="kw">if</span> <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> &gt; <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="25" data-i="4" id="code_zip2L25"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="25" href="#code_zip2L25">25</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Zip <a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a> into the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a>.</div></div><div class="locGutter" data-l="26" data-i="4" id="code_zip2L26"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="26" href="#code_zip2L26">26</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="c_zip2_zipped_1"><a class="rustic value" data-ref="c_zip2_zipped_1" data-preview-anchor="/g_trees/previews/c_zip2_zipped_1.html?def§c_zip2_zipped_1" data-hl="true" href="#c_zip2_zipped_1">zipped</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_right" data-preview-anchor="/g_trees/previews/c_zip2_right.html?def§c_zip2_right" data-hl="true" href="#c_zip2_right">right</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="27" data-i="4" id="code_zip2L27"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="27" href="#code_zip2L27">27</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="28" data-i="5" id="code_zip2L28"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="28" href="#code_zip2L28">28</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_update_right" data-preview-anchor="/g_trees/previews/c_update_right.html?def§c_update_right" data-hl="true" href="#c_update_right">update_right</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_zipped_1" data-preview-anchor="/g_trees/previews/c_zip2_zipped_1.html?def§c_zip2_zipped_1" data-hl="true" href="#c_zip2_zipped_1">zipped</a><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="29" data-i="4" id="code_zip2L29"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="29" href="#code_zip2L29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="30" data-i="3" id="code_zip2L30"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="30" href="#code_zip2L30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="31" data-i="3" id="code_zip2L31"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="31" href="#code_zip2L31">31</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">else</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="32" data-i="4" id="code_zip2L32"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="32" href="#code_zip2L32">32</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Equal ranks. Join the two inner sets, with the <a data-ref="gtree_right_subtree" data-preview-anchor="/g_trees/previews/gtree_right_subtree.html?def§gtree_right_subtree" data-hl="true" href="#gtree_right_subtree">right subtree</a> of the left node being zipped into the leftmost <a data-ref="gtree_left_subtree" data-preview-anchor="/g_trees/previews/gtree_left_subtree.html?def§gtree_left_subtree" data-hl="true" href="#gtree_left_subtree">left subtree</a> of the right node.</div></div><div class="locGutter" data-l="33" data-i="4" id="code_zip2L33"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="33" href="#code_zip2L33">33</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="34" data-i="5" id="code_zip2L34"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="34" href="#code_zip2L34">34</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="c_zip2_r_leftmost_item2"><a class="rustic value" data-ref="c_zip2_r_leftmost_item2" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_item2.html?def§c_zip2_r_leftmost_item2" data-hl="true" href="#c_zip2_r_leftmost_item2">r_leftmost_item</a></dfn><span class="deemph">,</span> <dfn id="c_zip2_r_leftmost_subtree2"><a class="rustic value" data-ref="c_zip2_r_leftmost_subtree2" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_subtree2.html?def§c_zip2_r_leftmost_subtree2" data-hl="true" href="#c_zip2_r_leftmost_subtree2">r_leftmost_subtree</a></dfn><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="35" data-i="5" id="code_zip2L35"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="35" href="#code_zip2L35">35</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="c_zip2_r_others"><a class="rustic value" data-ref="c_zip2_r_others" data-preview-anchor="/g_trees/previews/c_zip2_r_others.html?def§c_zip2_r_others" data-hl="true" href="#c_zip2_r_others">r_others</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="36" data-i="4" id="code_zip2L36"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="36" href="#code_zip2L36">36</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="37" data-i="4" id="code_zip2L37"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="37" href="#code_zip2L37">37</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="c_zip2_zipped_2"><a class="rustic value" data-ref="c_zip2_zipped_2" data-preview-anchor="/g_trees/previews/c_zip2_zipped_2.html?def§c_zip2_zipped_2" data-hl="true" href="#c_zip2_zipped_2">zipped</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_r_leftmost_subtree2" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_subtree2.html?def§c_zip2_r_leftmost_subtree2" data-hl="true" href="#c_zip2_r_leftmost_subtree2">r_leftmost_subtree</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="38" data-i="4" id="code_zip2L38"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="38" href="#code_zip2L38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="c_zip2_r_set"><a class="rustic value" data-ref="c_zip2_r_set" data-preview-anchor="/g_trees/previews/c_zip2_r_set.html?def§c_zip2_r_set" data-hl="true" href="#c_zip2_r_set">r_set</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="39" data-i="5" id="code_zip2L39"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="39" href="#code_zip2L39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="c_zip2_r_others" data-preview-anchor="/g_trees/previews/c_zip2_r_others.html?def§c_zip2_r_others" data-hl="true" href="#c_zip2_r_others">r_others</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="40" data-i="5" id="code_zip2L40"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="40" href="#code_zip2L40">40</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="c_zip2_r_leftmost_item2" data-preview-anchor="/g_trees/previews/c_zip2_r_leftmost_item2.html?def§c_zip2_r_leftmost_item2" data-hl="true" href="#c_zip2_r_leftmost_item2">r_leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_zipped_2" data-preview-anchor="/g_trees/previews/c_zip2_zipped_2.html?def§c_zip2_zipped_2" data-hl="true" href="#c_zip2_zipped_2">zipped</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="41" data-i="4" id="code_zip2L41"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="41" href="#code_zip2L41">41</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="42" data-i="4" id="code_zip2L42"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="42" href="#code_zip2L42">42</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div></div><div class="locGutter" data-l="43" data-i="4" id="code_zip2L43"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="43" href="#code_zip2L43">43</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="44" data-i="5" id="code_zip2L44"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="44" href="#code_zip2L44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="45" data-i="6" id="code_zip2L45"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="45" href="#code_zip2L45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="46" data-i="6" id="code_zip2L46"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="46" href="#code_zip2L46">46</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_join" data-preview-anchor="/g_trees/previews/c_neset_join.html?def§c_neset_join" data-hl="true" href="#c_neset_join">join</a><span class="rb1 open">(</span><a class="rustic value" data-ref="c_zip2_l" data-preview-anchor="/g_trees/previews/c_zip2_l.html?def§c_zip2_l" data-hl="true" href="#c_zip2_l">l</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip2_r_set" data-preview-anchor="/g_trees/previews/c_zip2_r_set.html?def§c_zip2_r_set" data-hl="true" href="#c_zip2_r_set">r_set</a><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="47" data-i="6" id="code_zip2L47"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="47" href="#code_zip2L47">47</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_zip2_r" data-preview-anchor="/g_trees/previews/c_zip2_r.html?def§c_zip2_r" data-hl="true" href="#c_zip2_r">r</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="48" data-i="5" id="code_zip2L48"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="48" href="#code_zip2L48">48</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="49" data-i="4" id="code_zip2L49"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="49" href="#code_zip2L49">49</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="50" data-i="3" id="code_zip2L50"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="50" href="#code_zip2L50">50</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="51" data-i="2" id="code_zip2L51"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="51" href="#code_zip2L51">51</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span></div></div><div class="locGutter" data-l="52" data-i="1" id="code_zip2L52"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="52" href="#code_zip2L52">52</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="53" data-i="0" id="code_zip2L53"><div class="lineNumber"><a data-pseudocode="code_zip2" data-ref="code_zip2" data-hllines="53" href="#code_zip2L53">53</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>To implement zipping of two <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> with an additional <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> in between them, we can simply convert that <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">item</a> into a singleton <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>, and then call <a class="rustic function" data-ref="c_zip2" data-preview-anchor="previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a> twice:</p><code class="pseudocode" id="code_zip3"><div class="locGutter" data-l="1" data-i="0" id="code_zip3L1"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="1" href="#code_zip3L1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Join two trees <a class="rustic value" data-ref="c_zip3_left" data-preview-anchor="/g_trees/previews/c_zip3_left.html?def§c_zip3_left" data-hl="true" href="#c_zip3_left">left</a> and <a class="rustic value" data-ref="c_zip3_right" data-preview-anchor="/g_trees/previews/c_zip3_right.html?def§c_zip3_right" data-hl="true" href="#c_zip3_right">right</a> and the item <a class="rustic value" data-ref="c_zip3_item" data-preview-anchor="/g_trees/previews/c_zip3_item.html?def§c_zip3_item" data-hl="true" href="#c_zip3_item">item</a> into a single tree, assuming that all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_zip3_left" data-preview-anchor="/g_trees/previews/c_zip3_left.html?def§c_zip3_left" data-hl="true" href="#c_zip3_left">left</a> are less than <a class="rustic value" data-ref="c_zip3_item" data-preview-anchor="/g_trees/previews/c_zip3_item.html?def§c_zip3_item" data-hl="true" href="#c_zip3_item">item</a>, and all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> in <a class="rustic value" data-ref="c_zip3_right" data-preview-anchor="/g_trees/previews/c_zip3_right.html?def§c_zip3_right" data-hl="true" href="#c_zip3_right">right</a> are greater than <a class="rustic value" data-ref="c_zip3_item" data-preview-anchor="/g_trees/previews/c_zip3_item.html?def§c_zip3_item" data-hl="true" href="#c_zip3_item">item</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_zip3L2"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="2" href="#code_zip3L2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_zip3"><a class="rustic function" data-ref="c_zip3" data-preview-anchor="/g_trees/previews/c_zip3.html?def§c_zip3" data-hl="true" href="#c_zip3">zip3</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_zip3_i"><a class="rustic typeArg" data-ref="c_zip3_i" data-preview-anchor="/g_trees/previews/c_zip3_i.html?def§c_zip3_i" data-hl="true" href="#c_zip3_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_zip3_s"><a class="rustic typeArg" data-ref="c_zip3_s" data-preview-anchor="/g_trees/previews/c_zip3_s.html?def§c_zip3_s" data-hl="true" href="#c_zip3_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip3_i" data-preview-anchor="/g_trees/previews/c_zip3_i.html?def§c_zip3_i" data-hl="true" href="#c_zip3_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_zip3L3"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="3" href="#code_zip3L3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip3_left"><a class="rustic value" data-ref="c_zip3_left" data-preview-anchor="/g_trees/previews/c_zip3_left.html?def§c_zip3_left" data-hl="true" href="#c_zip3_left">left</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip3_s" data-preview-anchor="/g_trees/previews/c_zip3_s.html?def§c_zip3_s" data-hl="true" href="#c_zip3_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_zip3L4"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="4" href="#code_zip3L4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip3_item"><a class="rustic value" data-ref="c_zip3_item" data-preview-anchor="/g_trees/previews/c_zip3_item.html?def§c_zip3_item" data-hl="true" href="#c_zip3_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_zip3_i" data-preview-anchor="/g_trees/previews/c_zip3_i.html?def§c_zip3_i" data-hl="true" href="#c_zip3_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="1" id="code_zip3L5"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="5" href="#code_zip3L5">5</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip3_rank"><a class="rustic value" data-ref="c_zip3_rank" data-preview-anchor="/g_trees/previews/c_zip3_rank.html?def§c_zip3_rank" data-hl="true" href="#c_zip3_rank">rank</a></dfn><span class="deemph">:</span> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span><span class="deemph">,</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_zip3L6"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="6" href="#code_zip3L6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_zip3_right"><a class="rustic value" data-ref="c_zip3_right" data-preview-anchor="/g_trees/previews/c_zip3_right.html?def§c_zip3_right" data-hl="true" href="#c_zip3_right">right</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip3_s" data-preview-anchor="/g_trees/previews/c_zip3_s.html?def§c_zip3_s" data-hl="true" href="#c_zip3_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="7" data-i="0" id="code_zip3L7"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="7" href="#code_zip3L7">7</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_zip3_s" data-preview-anchor="/g_trees/previews/c_zip3_s.html?def§c_zip3_s" data-hl="true" href="#c_zip3_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="8" data-i="1" id="code_zip3L8"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="8" href="#code_zip3L8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">let</span> <dfn id="c_zip3_mid"><a class="rustic value" data-ref="c_zip3_mid" data-preview-anchor="/g_trees/previews/c_zip3_mid.html?def§c_zip3_mid" data-hl="true" href="#c_zip3_mid">mid</a></dfn> <span class="deemph">:=</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="9" data-i="2" id="code_zip3L9"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="9" href="#code_zip3L9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="10" data-i="3" id="code_zip3L10"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="10" href="#code_zip3L10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="c_zip3_rank" data-preview-anchor="/g_trees/previews/c_zip3_rank.html?def§c_zip3_rank" data-hl="true" href="#c_zip3_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="11" data-i="3" id="code_zip3L11"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="11" href="#code_zip3L11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb1 open">(</span><a class="rustic value" data-ref="c_zip3_item" data-preview-anchor="/g_trees/previews/c_zip3_item.html?def§c_zip3_item" data-hl="true" href="#c_zip3_item">item</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="12" data-i="3" id="code_zip3L12"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="12" href="#code_zip3L12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="13" data-i="2" id="code_zip3L13"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="13" href="#code_zip3L13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="14" data-i="1" id="code_zip3L14"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="14" href="#code_zip3L14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="15" data-i="1" id="code_zip3L15"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="15" href="#code_zip3L15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div></div></div><div class="locGutter" data-l="16" data-i="1" id="code_zip3L16"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="16" href="#code_zip3L16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">return</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb2 open">(</span><a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_zip3_left" data-preview-anchor="/g_trees/previews/c_zip3_left.html?def§c_zip3_left" data-hl="true" href="#c_zip3_left">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip3_mid" data-preview-anchor="/g_trees/previews/c_zip3_mid.html?def§c_zip3_mid" data-hl="true" href="#c_zip3_mid">mid</a><span class="rb0 close">)</span><span class="deemph">,</span> <a class="rustic value" data-ref="c_zip3_right" data-preview-anchor="/g_trees/previews/c_zip3_right.html?def§c_zip3_right" data-hl="true" href="#c_zip3_right">right</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="17" data-i="0" id="code_zip3L17"><div class="lineNumber"><a data-pseudocode="code_zip3" data-ref="code_zip3" data-hllines="17" href="#code_zip3L17">17</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>With <a class="rustic function" data-ref="c_unzip" data-preview-anchor="previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a>, <a class="rustic function" data-ref="c_zip2" data-preview-anchor="previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a>, and <a class="rustic function" data-ref="c_zip3" data-preview-anchor="previews/c_zip3.html?def§c_zip3" data-hl="true" href="#c_zip3">zip3</a> in place, insertion and deletion in expected logarithmic time become trivial:</p><code class="pseudocode" id="code_insert_delete"><div class="locGutter" data-l="1" data-i="0" id="code_insert_deleteL1"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="1" href="#code_insert_deleteL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Insert an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> at a given <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> into a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_insert_deleteL2"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="2" href="#code_insert_deleteL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_insert"><a class="rustic function" data-ref="c_insert" data-preview-anchor="/g_trees/previews/c_insert.html?def§c_insert" data-hl="true" href="#c_insert">insert</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_insert_i"><a class="rustic typeArg" data-ref="c_insert_i" data-preview-anchor="/g_trees/previews/c_insert_i.html?def§c_insert_i" data-hl="true" href="#c_insert_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_insert_s"><a class="rustic typeArg" data-ref="c_insert_s" data-preview-anchor="/g_trees/previews/c_insert_s.html?def§c_insert_s" data-hl="true" href="#c_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_insert_i" data-preview-anchor="/g_trees/previews/c_insert_i.html?def§c_insert_i" data-hl="true" href="#c_insert_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_insert_deleteL3"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="3" href="#code_insert_deleteL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_insert_t"><a class="rustic value" data-ref="c_insert_t" data-preview-anchor="/g_trees/previews/c_insert_t.html?def§c_insert_t" data-hl="true" href="#c_insert_t">t</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_insert_s" data-preview-anchor="/g_trees/previews/c_insert_s.html?def§c_insert_s" data-hl="true" href="#c_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_insert_deleteL4"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="4" href="#code_insert_deleteL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_insert_item"><a class="rustic value" data-ref="c_insert_item" data-preview-anchor="/g_trees/previews/c_insert_item.html?def§c_insert_item" data-hl="true" href="#c_insert_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_insert_i" data-preview-anchor="/g_trees/previews/c_insert_i.html?def§c_insert_i" data-hl="true" href="#c_insert_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="1" id="code_insert_deleteL5"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="5" href="#code_insert_deleteL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_insert_rank"><a class="rustic value" data-ref="c_insert_rank" data-preview-anchor="/g_trees/previews/c_insert_rank.html?def§c_insert_rank" data-hl="true" href="#c_insert_rank">rank</a></dfn><span class="deemph">:</span> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span><span class="deemph">,</span></div></div><div class="locGutter" data-l="6" data-i="0" id="code_insert_deleteL6"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="6" href="#code_insert_deleteL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_insert_s" data-preview-anchor="/g_trees/previews/c_insert_s.html?def§c_insert_s" data-hl="true" href="#c_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="7" data-i="1" id="code_insert_deleteL7"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="7" href="#code_insert_deleteL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="c_insert_left"><a class="rustic value" data-ref="c_insert_left" data-preview-anchor="/g_trees/previews/c_insert_left.html?def§c_insert_left" data-hl="true" href="#c_insert_left">left</a></dfn><span class="deemph">,</span> <dfn id="c_insert_right"><a class="rustic value" data-ref="c_insert_right" data-preview-anchor="/g_trees/previews/c_insert_right.html?def§c_insert_right" data-hl="true" href="#c_insert_right">right</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_insert_t" data-preview-anchor="/g_trees/previews/c_insert_t.html?def§c_insert_t" data-hl="true" href="#c_insert_t">t</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_insert_item" data-preview-anchor="/g_trees/previews/c_insert_item.html?def§c_insert_item" data-hl="true" href="#c_insert_item">item</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="8" data-i="1" id="code_insert_deleteL8"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="8" href="#code_insert_deleteL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">return</span> <a class="rustic function" data-ref="c_zip3" data-preview-anchor="/g_trees/previews/c_zip3.html?def§c_zip3" data-hl="true" href="#c_zip3">zip3</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_insert_left" data-preview-anchor="/g_trees/previews/c_insert_left.html?def§c_insert_left" data-hl="true" href="#c_insert_left">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_insert_item" data-preview-anchor="/g_trees/previews/c_insert_item.html?def§c_insert_item" data-hl="true" href="#c_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_insert_rank" data-preview-anchor="/g_trees/previews/c_insert_rank.html?def§c_insert_rank" data-hl="true" href="#c_insert_rank">rank</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_insert_right" data-preview-anchor="/g_trees/previews/c_insert_right.html?def§c_insert_right" data-hl="true" href="#c_insert_right">right</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="9" data-i="0" id="code_insert_deleteL9"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="9" href="#code_insert_deleteL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="10" data-i="0" id="code_insert_deleteL10"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="10" href="#code_insert_deleteL10">10</a></div><div class="fold"></div></div><div class="locContent"><div></div></div><div class="locGutter" data-l="11" data-i="0" id="code_insert_deleteL11"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="11" href="#code_insert_deleteL11">11</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Delete an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> from a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>.</div></div><div class="locGutter" data-l="12" data-i="0" id="code_insert_deleteL12"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="12" href="#code_insert_deleteL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_delete"><a class="rustic function" data-ref="c_delete" data-preview-anchor="/g_trees/previews/c_delete.html?def§c_delete" data-hl="true" href="#c_delete">delete</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_delete_i"><a class="rustic typeArg" data-ref="c_delete_i" data-preview-anchor="/g_trees/previews/c_delete_i.html?def§c_delete_i" data-hl="true" href="#c_delete_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_delete_s"><a class="rustic typeArg" data-ref="c_delete_s" data-preview-anchor="/g_trees/previews/c_delete_s.html?def§c_delete_s" data-hl="true" href="#c_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_delete_i" data-preview-anchor="/g_trees/previews/c_delete_i.html?def§c_delete_i" data-hl="true" href="#c_delete_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="13" data-i="1" id="code_insert_deleteL13"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="13" href="#code_insert_deleteL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_delete_t"><a class="rustic value" data-ref="c_delete_t" data-preview-anchor="/g_trees/previews/c_delete_t.html?def§c_delete_t" data-hl="true" href="#c_delete_t">t</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_delete_s" data-preview-anchor="/g_trees/previews/c_delete_s.html?def§c_delete_s" data-hl="true" href="#c_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="14" data-i="1" id="code_insert_deleteL14"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="14" href="#code_insert_deleteL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_delete_item"><a class="rustic value" data-ref="c_delete_item" data-preview-anchor="/g_trees/previews/c_delete_item.html?def§c_delete_item" data-hl="true" href="#c_delete_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_delete_i" data-preview-anchor="/g_trees/previews/c_delete_i.html?def§c_delete_i" data-hl="true" href="#c_delete_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="15" data-i="0" id="code_insert_deleteL15"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="15" href="#code_insert_deleteL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="c_delete_s" data-preview-anchor="/g_trees/previews/c_delete_s.html?def§c_delete_s" data-hl="true" href="#c_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="16" data-i="1" id="code_insert_deleteL16"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="16" href="#code_insert_deleteL16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="c_delete_left"><a class="rustic value" data-ref="c_delete_left" data-preview-anchor="/g_trees/previews/c_delete_left.html?def§c_delete_left" data-hl="true" href="#c_delete_left">left</a></dfn><span class="deemph">,</span> <dfn id="c_delete_right"><a class="rustic value" data-ref="c_delete_right" data-preview-anchor="/g_trees/previews/c_delete_right.html?def§c_delete_right" data-hl="true" href="#c_delete_right">right</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_delete_t" data-preview-anchor="/g_trees/previews/c_delete_t.html?def§c_delete_t" data-hl="true" href="#c_delete_t">t</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_delete_item" data-preview-anchor="/g_trees/previews/c_delete_item.html?def§c_delete_item" data-hl="true" href="#c_delete_item">item</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="17" data-i="1" id="code_insert_deleteL17"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="17" href="#code_insert_deleteL17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">return</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb2 open">(</span><a class="rustic value" data-ref="c_delete_left" data-preview-anchor="/g_trees/previews/c_delete_left.html?def§c_delete_left" data-hl="true" href="#c_delete_left">left</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_delete_right" data-preview-anchor="/g_trees/previews/c_delete_right.html?def§c_delete_right" data-hl="true" href="#c_delete_right">right</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="18" data-i="0" id="code_insert_deleteL18"><div class="lineNumber"><a data-pseudocode="code_insert_delete" data-ref="code_insert_delete" data-hllines="18" href="#code_insert_deleteL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>We want to emphasize that our choice of algorithms optimizes for elegance, not for (non-asymptotic) efficiency. Implementations based on in-place mutations will outperform our immutable algorithms. A direct implementation of <a class="rustic function" data-ref="c_zip3" data-preview-anchor="previews/c_zip3.html?def§c_zip3" data-hl="true" href="#c_zip3">zip3</a> will outperform the reduction to two applications of <a class="rustic function" data-ref="c_zip2" data-preview-anchor="previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a>. Iterative implementations might outperform recursive implementations. And finally, direct implementations of insertion and deletion should outperform those based off unzipping and zipping the full trees. The <a class="bib" data-ref="tarjan2021zip" data-preview-anchor="previews/tarjan2021zip.html?def§tarjan2021zip" href="g_trees/assets/references/tarjan2021zip.pdf"><span class="bibText">original zip-tree paper</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Tarjan</span> <span style="font-variant:normal;">et al.</span></span>, 2021)</span></a> contains examples of direct algorithms that zip and unzip only parts of a tree; our algorithms can be adapted to work analogously, and we provide variants for <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> in <a class="hsection" data-hsection-level="1" data-ref="explicit_implementations" data-hl="true" href="#explicit_implementations">Appendix C</a>.</p></section><h2 id="conclusion"><a class="hsection" data-ref="conclusion" data-hl="true" data-hsection-level="1" href="#conclusion">6 Conclusion</a></h2><section data-hsection="conclusion"><p>We have generalized the <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a> to the rich family of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>. <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> must be instantiated with a concrete set data structure; using a linked list yields the <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>, and direct recursive self-instantiation yields the <a data-ref="zipzip" data-preview-anchor="previews/zipzip.html?def§zipzip" data-hl="true" href="#zipzip">zip-zip-trees</a>. All <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> are <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> if the underlying set data structure is <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a>, and admit the same <a class="hsection" data-hsection-level="1" data-ref="implementation" data-hl="true" href="#implementation">efficient algorithms</a> for mutating them. We have <a class="hsection" data-hsection-level="2" data-ref="analysis" data-hl="true" href="#analysis">proven</a> the <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> to be similar to perfectly balanced search trees with high probability, a property that makes them asymptotically and practically efficient.</p><p>Beyond merely generalizing existing data structures, we have defined the <a data-ref="kzip_tree" data-preview-anchor="previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-trees</a>, a conceptually simple family of <a data-ref="history_independent" data-preview-anchor="previews/history_independent.html?def§history_independent" data-hl="true" href="#history_independent">history-independent</a> data structures that store up to <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> in a single vertex. Such data structures make more efficient use of hardware caches than binary trees, allowing the <a data-ref="kzip_tree" data-preview-anchor="previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-zip-trees</a> to <a class="figure" data-ref="fig_search_performance" data-preview-anchor="previews/fig_search_performance.html?def§fig_search_performance" href="#fig_search_performance">outperform</a> the binary <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip trees</a>.</p></section><h2 id="bibliography"><a class="hsection" data-ref="bibliography" data-hl="true" data-hsection-level="1" href="#bibliography">References</a></h2><section data-hsection="bibliography"><div class="csl-bib-body hangingindent"><div id="aggarwal1988input"><a data-ref="aggarwal1988input" href="g_trees/assets/references/aggarwal1988input.pdf">  <span style="font-variant:small-caps;">Aggarwal, Alok</span> ; <span style="font-variant:small-caps;">Vitter, S, Jeffrey</span>: The input/output complexity of sorting and related problems. In: <i>Communications of the ACM</i> vol. 31, ACM New York, NY, USA (1988), Nr. 9, pp. 1116–1127</a></div><br /><div id="archibald2006number"><a data-ref="archibald2006number" href="g_trees/assets/references/archibald2006number.pdf">  <span style="font-variant:small-caps;">Archibald, Margaret</span> ; <span style="font-variant:small-caps;">Knopfmacher, Arnold</span> ; <span style="font-variant:small-caps;">Prodinger, Helmut</span>: The number of distinct values in a geometrically distributed sample. In: <i>European Journal of Combinatorics</i> vol. 27 (2006), Nr. 7, pp. 1059–1081. — Eurocomb ’03 - Graphs and Combinatorial Structures</a></div><br /><div id="auvolat2019merkle"><a data-ref="auvolat2019merkle" href="g_trees/assets/references/auvolat2019merkle.pdf">  <span style="font-variant:small-caps;">Auvolat, Alex</span> ; <span style="font-variant:small-caps;">Taïani, François</span>: Merkle search trees: Efficient state-based CRDTs in open networks. In: <i>2019 38th Symposium on Reliable Distributed Systems (SRDS)</i> : IEEE, 2019, pp. 221–22109</a></div><br /><div id="bender2016anti"><a data-ref="bender2016anti" href="g_trees/assets/references/bender2016anti.pdf">  <span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Bender, Michael A</span> ; <span style="font-variant:small-caps;">Berry, Jonathan W</span> ; <span style="font-variant:small-caps;">Johnson, Rob</span> ; <span style="font-variant:small-caps;">Kroeger, Thomas M</span> ; <span style="font-variant:small-caps;">McCauley, Samuel</span> ; <span style="font-variant:small-caps;">Phillips, Cynthia A</span> ; <span style="font-variant:small-caps;">Simon, Bertrand</span> ; <span style="font-variant:small-caps;">Singh, Shikha</span> ; et al.</span>: Anti-persistence on persistent storage: History-independent sparse tables and dictionaries. In: <i>Proceedings of the 35th ACM SIGMOD-SIGACT-SIGAI Symposium on Principles of Database Systems</i>, 2016, pp. 289–302</a></div><br /><div id="blelloch2016just"><a data-ref="blelloch2016just" href="g_trees/assets/references/blelloch2016just.pdf">  <span style="font-variant:small-caps;">Blelloch, Guy E</span> ; <span style="font-variant:small-caps;">Ferizovic, Daniel</span> ; <span style="font-variant:small-caps;">Sun, Yihan</span>: Just join for parallel ordered sets. In: <i>Proceedings of the 28th ACM Symposium on Parallelism in Algorithms and Architectures</i>, 2016, pp. 253–264</a></div><br /><div id="boodman2016prolly"><a data-ref="boodman2016prolly" href="https://github.com/attic-labs/noms/blob/master/doc/intro.md#prolly-trees-probabilistic-b-trees">  <span style="font-variant:small-caps;">Boodman, Aaron</span> ; <span style="font-variant:small-caps;">Weinstein, Rafael</span> ; <span style="font-variant:small-caps;">Arvidsson, Erik</span> ; <span style="font-variant:small-caps;">Masone, Chris</span> ; <span style="font-variant:small-caps;">Willhite, Dan</span> ; <span style="font-variant:small-caps;">Kalman, Benjamin</span>: Prolly Trees: Probabilistic B-Trees.</a></div><br /><div id="comer1979ubiquitous"><a data-ref="comer1979ubiquitous" href="g_trees/assets/references/comer1979ubiquitous.pdf">  <span style="font-variant:small-caps;">Comer, Douglas</span>: The Ubiquitous B-tree. In: <i>ACM Computing Surveys (CSUR)</i> vol. 11, ACM New York, NY, USA (1979), Nr. 2, pp. 121–137</a></div><br /><div id="driscoll1994fully"><a data-ref="driscoll1994fully" href="g_trees/assets/references/driscoll1994fully.pdf">  <span style="font-variant:small-caps;">Driscoll, James R</span> ; <span style="font-variant:small-caps;">Sleator, Daniel DK</span> ; <span style="font-variant:small-caps;">Tarjan, Robert E</span>: Fully persistent lists with catenation. In: <i>Journal of the ACM (JACM)</i> vol. 41, ACM New York, NY, USA (1994), Nr. 5, pp. 943–959</a></div><br /><div id="dubhashiChernoff2009"><a data-ref="dubhashiChernoff2009" href="https://doi.org/10.1017/CBO9780511581274">  <span style="font-variant:small-caps;">Dubhashi, Devdatt P.</span> ; <span style="font-variant:small-caps;">Panconesi, Alessandro</span>: Chernoff-Hoeffding Bounds. In: <i>Concentration of Measure for the Analysis of Randomized Algorithms</i> : Cambridge University Press, 2009, pp. 1–15</a></div><br /><div id="eisenberg2008expectation"><a data-ref="eisenberg2008expectation" href="g_trees/assets/references/eisenberg2008expectation.pdf">  <span style="font-variant:small-caps;">Eisenberg, Bennett</span>: On the expectation of the maximum of IID geometric random variables. In: <i>Statistics &#38; Probability Letters</i> vol. 78, Elsevier (2008), Nr. 2, pp. 135–143</a></div><br /><div id="forbes2011statistical"><a data-ref="forbes2011statistical" href="https://link.springer.com/book/10.1007/1-84628-168-7">  <span style="font-variant:small-caps;">Forbes, Catherine</span> ; <span style="font-variant:small-caps;">Evans, Merran</span> ; <span style="font-variant:small-caps;">Hastings, Nicholas</span> ; <span style="font-variant:small-caps;">Peacock, Brian</span>: <i>Statistical distributions</i> : John Wiley &#38; Sons, 2011</a></div><br /><div id="frigo1999cache"><a data-ref="frigo1999cache" href="g_trees/assets/references/frigo1999cache.pdf">  <span style="font-variant:small-caps;">Frigo, Matteo</span> ; <span style="font-variant:small-caps;">Leiserson, Charles E</span> ; <span style="font-variant:small-caps;">Prokop, Harald</span> ; <span style="font-variant:small-caps;">Ramachandran, Sridhar</span>: Cache-oblivious algorithms. In: <i>40th Annual Symposium on Foundations of Computer Science (Cat. No. 99CB37039)</i> : IEEE, 1999, pp. 285–297</a></div><br /><div id="gila2023zip"><a data-ref="gila2023zip" href="g_trees/assets/references/gila2023zip.pdf">  <span style="font-variant:small-caps;">Gila, Ofek</span> ; <span style="font-variant:small-caps;">Goodrich, Michael T</span> ; <span style="font-variant:small-caps;">Tarjan, Robert E</span>: Zip-Zip Trees: Making Zip Trees More Balanced, Biased, Compact, or Persistent. In: <i>Algorithms and Data Structures Symposium</i> : Springer, 2023, pp. 474–492</a></div><br /><div id="golovin2009b"><a data-ref="golovin2009b" href="g_trees/assets/references/golovin2009b.pdf">  <span style="font-variant:small-caps;">Golovin, Daniel</span>: B-treaps: A uniquely represented alternative to B-trees. In: <i>International Colloquium on Automata, Languages, and Programming</i> : Springer, 2009, pp. 487–499</a></div><br /><div id="golovin2010b"><a data-ref="golovin2010b" href="g_trees/assets/references/golovin2010b.pdf">  <span style="font-variant:small-caps;">Golovin, Daniel</span>: The B-skip-list: A simpler uniquely represented alternative to B-trees. In: <i>arXiv preprint arXiv:1005.0662</i> (2010)</a></div><br /><div id="merkle1989certified"><a data-ref="merkle1989certified" href="g_trees/assets/references/merkle1989certified.pdf">  <span style="font-variant:small-caps;">Merkle, Ralph C</span>: A certified digital signature. In: <i>Conference on the Theory and Application of Cryptology</i> : Springer, 1989, pp. 218–238</a></div><br /><div id="messeguer1997skip"><a data-ref="messeguer1997skip" href="g_trees/assets/references/messeguer1997skip.pdf">  <span style="font-variant:small-caps;">Messeguer, Xavier</span>: Skip trees, an alternative data structure to skip lists in a concurrent approach. In: <i>RAIRO-Theoretical Informatics and Applications</i> vol. 31, EDP Sciences (1997), Nr. 3, pp. 251–269</a></div><br /><div id="naor2001anti"><a data-ref="naor2001anti" href="g_trees/assets/references/naor2001anti.pdf">  <span style="font-variant:small-caps;">Naor, Moni</span> ; <span style="font-variant:small-caps;">Teague, Vanessa</span>: Anti-persistence: History independent data structures. In: <i>Proceedings of the thirty-third annual ACM symposium on Theory of computing</i>, 2001, pp. 492–501</a></div><br /><div id="pugh1990skip"><a data-ref="pugh1990skip" href="g_trees/assets/references/pugh1990skip.pdf">  <span style="font-variant:small-caps;">Pugh, William</span>: Skip lists: a probabilistic alternative to balanced trees. In: <i>Communications of the ACM</i> vol. 33, ACM New York, NY, USA (1990), Nr. 6, pp. 668–676</a></div><br /><div id="pugh1989incremental"><a data-ref="pugh1989incremental" href="g_trees/assets/references/pugh1989incremental.pdf">  <span style="font-variant:small-caps;">Pugh, William</span> ; <span style="font-variant:small-caps;">Teitelbaum, Tim</span>: Incremental computation via function caching. In: <i>Proceedings of the 16th ACM SIGPLAN-SIGACT symposium on Principles of programming languages</i>, 1989, pp. 315–328</a></div><br /><div id="safavi2023b"><a data-ref="safavi2023b" href="g_trees/assets/references/safavi2023b.pdf">  <span style="font-variant:small-caps;">Safavi, Roodabeh</span> ; <span style="font-variant:small-caps;">Seybold, Martin P</span>: B-Treaps Revised: Write Efficient Randomized Block Search Trees with High Load. In: <i>arXiv preprint arXiv:2303.04722</i> (2023)</a></div><br /><div id="seidel1996randomized"><a data-ref="seidel1996randomized" href="g_trees/assets/references/seidel1996randomized.pdf">  <span style="font-variant:small-caps;">Seidel, Raimund</span> ; <span style="font-variant:small-caps;">Aragon, Cecilia R</span>: Randomized search trees. In: <i>Algorithmica</i> vol. 16, Springer (1996), Nr. 4, pp. 464–497</a></div><br /><div id="shao1994unrolling"><a data-ref="shao1994unrolling" href="g_trees/assets/references/shao1994unrolling.pdf">  <span style="font-variant:small-caps;">Shao, Zhong</span> ; <span style="font-variant:small-caps;">Reppy, John H</span> ; <span style="font-variant:small-caps;">Appel, Andrew W</span>: Unrolling lists. In: <i>Proceedings of the 1994 ACM conference on LISP and functional programming</i>, 1994, pp. 185–195</a></div><br /><div id="snyder1977uniquely"><a data-ref="snyder1977uniquely" href="https://ieeexplore.ieee.org/document/4567936">  <span style="font-variant:small-caps;">Snyder, Lawrence</span>: On uniquely represented data strauctures. In: <i>18th Annual Symposium on Foundations of Computer Science (sfcs 1977)</i> : IEEE, 1977, pp. 142–146</a></div><br /><div id="spiegel2009dense"><a data-ref="spiegel2009dense" href="g_trees/assets/references/spiegel2009dense.pdf">  <span style="font-variant:small-caps;">Spiegel, Michael</span> ; <span style="font-variant:small-caps;">Reynolds Jr, Paul F</span>: The Dense Skip Tree: A Cache-Conscious Randomized Data Structure, Citeseer (2009)</a></div><br /><div id="szpankowski1990yet"><a data-ref="szpankowski1990yet" href="g_trees/assets/references/szpankowski1990yet.pdf">  <span style="font-variant:small-caps;">Szpankowski, Wojciech</span> ; <span style="font-variant:small-caps;">Rego, Vernon</span>: Yet another application of a binomial recurrence. Order statistics. In: <i>Computing</i> vol. 43, Springer (1990), Nr. 4, pp. 401–410</a></div><br /><div id="tarjan2021zip"><a data-ref="tarjan2021zip" href="g_trees/assets/references/tarjan2021zip.pdf">  <span style="font-variant:small-caps;">Tarjan, Robert E</span> ; <span style="font-variant:small-caps;">Levy, Caleb</span> ; <span style="font-variant:small-caps;">Timmel, Stephen</span>: Zip trees. In: <i>ACM Transactions on Algorithms (TALG)</i> vol. 17, ACM New York, NY (2021), Nr. 4, pp. 1–12</a></div></div></section><h2 id="experiments"><a class="hsection" data-ref="experiments" data-hl="true" data-hsection-level="1" href="#experiments">Appendix A: Code</a></h2><section data-hsection="experiments"><p>We have published the code powering our experiments <a href="https://github.com/g-trees/gtree_experiments">on github</a> (under the MIT license). The implementation written is in <a href="https://www.rust-lang.org/">rust</a>, and can be built with the <a href="https://doc.rust-lang.org/cargo/">cargo package manager</a>. Run <code>cargo run --bin stats</code> to replicate the experiments for <a class="figure" data-ref="fig_stats_gheight" data-preview-anchor="previews/fig_stats_gheight.html?def§fig_stats_gheight" href="#fig_stats_gheight">Figure&nbsp;6</a>, <a class="figure" data-ref="fig_stats_gnode_size" data-preview-anchor="previews/fig_stats_gnode_size.html?def§fig_stats_gnode_size" href="#fig_stats_gnode_size">Figure&nbsp;7</a>, <a class="figure" data-ref="fig_stats_gnode_count" data-preview-anchor="previews/fig_stats_gnode_count.html?def§fig_stats_gnode_count" href="#fig_stats_gnode_count">Figure&nbsp;8</a>, <a class="figure" data-ref="fig_kzip_height" data-preview-anchor="previews/fig_kzip_height.html?def§fig_kzip_height" href="#fig_kzip_height">Figure&nbsp;11</a>, and <a class="figure" data-ref="fig_space_amplification" data-preview-anchor="previews/fig_space_amplification.html?def§fig_space_amplification" href="#fig_space_amplification">Figure&nbsp;12</a>. Run <code>cargo bench</code> to recreate the benchmark for <a class="figure" data-ref="fig_search_performance" data-preview-anchor="previews/fig_search_performance.html?def§fig_search_performance" href="#fig_search_performance">Figure&nbsp;1</a>.</p></section><h2 id="variants"><a class="hsection" data-ref="variants" data-hl="true" data-hsection-level="1" href="#variants">Appendix B: G-Tree Variants</a></h2><section data-hsection="variants"><p>We now sketch several variants of <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> that might be useful in practice. Highlights include a <a data-ref="gtree" data-preview-anchor="previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>-analogon of the <a class="bib" data-ref="comer1979ubiquitous" data-preview-anchor="previews/comer1979ubiquitous.html?def§comer1979ubiquitous" href="g_trees/assets/references/comer1979ubiquitous.pdf"><span class="bibText">B<sup>+</sup>-tree</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Comer</span>, 1979)</span></a>, and a cache-efficient generalization of the <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a>.</p><p>When search trees store not only keys but key-value pairs, some usecases benefit from storing all key-value pairs in leaves of the tree. To support efficient lookup of the leaves, the inner vertices of the tree store duplicates of certain keys. We can easily adapt <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> to this behavior by placing <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> not only in the tree layer corresponding to their <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> but also on all lower layers. <a class="figure" data-ref="fig_leafy_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_gtree.html?def§fig_leafy_gtree" href="#fig_leafy_gtree">Figure&nbsp;14</a> depicts such a <dfn id="naive_leafy_gtree"><a data-ref="naive_leafy_gtree" data-preview-anchor="/g_trees/previews/naive_leafy_gtree.html?def§naive_leafy_gtree" data-hl="true" href="#naive_leafy_gtree">naïve leafy G-tree</a></dfn>, and <a class="figure" data-ref="fig_leafy_1zip" data-preview-anchor="/g_trees/previews/fig_leafy_1zip.html?def§fig_leafy_1zip" href="#fig_leafy_1zip">Figure&nbsp;15</a> and <a class="figure" data-ref="fig_leafy_2zip" data-preview-anchor="/g_trees/previews/fig_leafy_2zip.html?def§fig_leafy_2zip" href="#fig_leafy_2zip">Figure&nbsp;16</a> show concrete instantiations with a <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list">1-list</a> (a <dfn id="naive_leafy_zip_tree"><a data-ref="naive_leafy_zip_tree" data-preview-anchor="/g_trees/previews/naive_leafy_zip_tree.html?def§naive_leafy_zip_tree" data-hl="true" href="#naive_leafy_zip_tree">naïve leafy zip-tree</a></dfn>) and a <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list">2-list</a> (a <dfn id="naive_leafy_2zip_tree"><a data-ref="naive_leafy_2zip_tree" data-preview-anchor="/g_trees/previews/naive_leafy_2zip_tree.html?def§naive_leafy_2zip_tree" data-hl="true" href="#naive_leafy_2zip_tree">naïve leafy 2-zip-tree</a></dfn>) respectively. We <span class="nowrap">arbitrarily<span class="sidenoteCounter">4</span></span><span class="marginale"><span class="sidenoteCounter">4</span>Spoiler: the ordering is arbitrary <em>in principle</em>, but our choice will surface a deep connection to <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> in a few paragraphs.</span> choose to sort <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> of lower <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> to the right of their copies of higher <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>.</p><figure class="wide" id="fig_leafy_gtree"><img src="/g_trees/assets/graphics/leafGtree.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_gtree.html?def§fig_leafy_gtree" href="#fig_leafy_gtree">Figure&nbsp;14</a>: Naïve Leafy G-Tree</p><p>An example <a data-ref="naive_leafy_gtree" data-preview-anchor="/g_trees/previews/naive_leafy_gtree.html?def§naive_leafy_gtree" data-hl="true" href="#naive_leafy_gtree">naïve leafy G-tree</a> that stores the same <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> as the <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a> in <a class="figure" data-ref="fig_gnodes" data-preview-anchor="/g_trees/previews/fig_gnodes.html?def§fig_gnodes" href="#fig_gnodes">Figure&nbsp;5</a>.</p></figcaption></figure><figure class="wide" id="fig_leafy_1zip"><img src="/g_trees/assets/graphics/leafGtreeOfLists.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_1zip" data-preview-anchor="/g_trees/previews/fig_leafy_1zip.html?def§fig_leafy_1zip" href="#fig_leafy_1zip">Figure&nbsp;15</a>: Naïve Leafy Zip-Tree</p><p>An example <a data-ref="naive_leafy_zip_tree" data-preview-anchor="/g_trees/previews/naive_leafy_zip_tree.html?def§naive_leafy_zip_tree" data-hl="true" href="#naive_leafy_zip_tree">naïve leafy zip-tree</a>, a concrete instantiation of the <a data-ref="naive_leafy_gtree" data-preview-anchor="/g_trees/previews/naive_leafy_gtree.html?def§naive_leafy_gtree" data-hl="true" href="#naive_leafy_gtree">naïve leafy G-tree</a> in <a class="figure" data-ref="fig_leafy_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_gtree.html?def§fig_leafy_gtree" href="#fig_leafy_gtree">Figure&nbsp;14</a>. Compare also with <a class="figure" data-ref="fig_ziptree_lists" data-preview-anchor="/g_trees/previews/fig_ziptree_lists.html?def§fig_ziptree_lists" href="#fig_ziptree_lists">Figure&nbsp;4</a>, which depicts the <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a> for the same <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>.</p></figcaption></figure><figure class="wide" id="fig_leafy_2zip"><img src="/g_trees/assets/graphics/leafGtree2Lists.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_2zip" data-preview-anchor="/g_trees/previews/fig_leafy_2zip.html?def§fig_leafy_2zip" href="#fig_leafy_2zip">Figure&nbsp;16</a>: Naïve Leafy 2-Zip-Tree</p><p>An example <a data-ref="naive_leafy_2zip_tree" data-preview-anchor="/g_trees/previews/naive_leafy_2zip_tree.html?def§naive_leafy_2zip_tree" data-hl="true" href="#naive_leafy_2zip_tree">naïve leafy 2-zip-tree</a>, a concrete instantiation of the <a data-ref="naive_leafy_gtree" data-preview-anchor="/g_trees/previews/naive_leafy_gtree.html?def§naive_leafy_gtree" data-hl="true" href="#naive_leafy_gtree">naïve leafy G-tree</a> in <a class="figure" data-ref="fig_leafy_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_gtree.html?def§fig_leafy_gtree" href="#fig_leafy_gtree">Figure&nbsp;14</a>. Compare also with <a class="figure" data-ref="fig_2ziptree" data-preview-anchor="/g_trees/previews/fig_2ziptree.html?def§fig_2ziptree" href="#fig_2ziptree">Figure&nbsp;10</a>, which depicts the <a data-ref="kzip_tree" data-preview-anchor="/g_trees/previews/kzip_tree.html?def§kzip_tree" data-hl="true" href="#kzip_tree">2-zip-tree</a> for the same <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a>.</p></figcaption></figure><p>The figures clearly show a deficiency of this naïve approach: almost all <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> have a single pointer to the layer below, except for the first <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> of each <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>, which needs two pointers. We can restore uniformity by adding a dummy element <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">⊥</span></span></span></span> at the start of each layer. <a class="figure" data-ref="fig_leafy_bot_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_bot_gtree.html?def§fig_leafy_bot_gtree" href="#fig_leafy_bot_gtree">Figure&nbsp;17</a> gives an example of the resulting (proper) <dfn id="leafy_gtree"><a data-ref="leafy_gtree" data-preview-anchor="/g_trees/previews/leafy_gtree.html?def§leafy_gtree" data-hl="true" href="#leafy_gtree">leafy G-tree</a></dfn>; <a class="figure" data-ref="fig_leafy_bot_1zip" data-preview-anchor="/g_trees/previews/fig_leafy_bot_1zip.html?def§fig_leafy_bot_1zip" href="#fig_leafy_bot_1zip">Figure&nbsp;18</a> shows a <dfn id="leafy_zip_tree"><a data-ref="leafy_zip_tree" data-preview-anchor="/g_trees/previews/leafy_zip_tree.html?def§leafy_zip_tree" data-hl="true" href="#leafy_zip_tree">leafy zip-tree</a></dfn>, and <a class="figure" data-ref="fig_leafy_bot_2zip" data-preview-anchor="/g_trees/previews/fig_leafy_bot_2zip.html?def§fig_leafy_bot_2zip" href="#fig_leafy_bot_2zip">Figure&nbsp;19</a> shows a <dfn id="leafy_2zip_tree"><a data-ref="leafy_2zip_tree" data-preview-anchor="/g_trees/previews/leafy_2zip_tree.html?def§leafy_2zip_tree" data-hl="true" href="#leafy_2zip_tree">leafy 2-zip-tree</a></dfn>.</p><figure class="wide" id="fig_leafy_bot_gtree"><img src="/g_trees/assets/graphics/leafBotGtree.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_bot_gtree" data-preview-anchor="/g_trees/previews/fig_leafy_bot_gtree.html?def§fig_leafy_bot_gtree" href="#fig_leafy_bot_gtree">Figure&nbsp;17</a>: Leafy G-Tree</p></figcaption></figure><figure class="wide" id="fig_leafy_bot_1zip"><img src="/g_trees/assets/graphics/leafBot1zip.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_bot_1zip" data-preview-anchor="/g_trees/previews/fig_leafy_bot_1zip.html?def§fig_leafy_bot_1zip" href="#fig_leafy_bot_1zip">Figure&nbsp;18</a>: Leafy Zip-Tree</p></figcaption></figure><figure class="wide" id="fig_leafy_bot_2zip"><img src="/g_trees/assets/graphics/leafBot2zip.svg" /><figcaption><p><a class="figure" data-ref="fig_leafy_bot_2zip" data-preview-anchor="/g_trees/previews/fig_leafy_bot_2zip.html?def§fig_leafy_bot_2zip" href="#fig_leafy_bot_2zip">Figure&nbsp;19</a>: Leafy 2-Zip-Tree</p></figcaption></figure><p>The reader familiar with <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> should immediately see that <a class="figure" data-ref="fig_leafy_bot_1zip" data-preview-anchor="previews/fig_leafy_bot_1zip.html?def§fig_leafy_bot_1zip" href="#fig_leafy_bot_1zip">Figure&nbsp;18</a> — the rendering of a <a data-ref="leafy_zip_tree" data-preview-anchor="previews/leafy_zip_tree.html?def§leafy_zip_tree" data-hl="true" href="#leafy_zip_tree">leafy zip-tree</a> — essentially shows a <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a>, except that some of the edges within the same layer are missing. <a class="figure" data-ref="fig_linked_leafy_bot_1zip" data-preview-anchor="previews/fig_linked_leafy_bot_1zip.html?def§fig_linked_leafy_bot_1zip" href="#fig_linked_leafy_bot_1zip">Figure&nbsp;21</a> shows a proper <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a> with the same <a data-ref="item" data-preview-anchor="previews/item.html?def§item" data-hl="true" href="#item">items</a> and <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">ranks</a> for comparison. Characterizing the “missing” edges from the perspective of <a data-ref="leafy_gtree" data-preview-anchor="previews/leafy_gtree.html?def§leafy_gtree" data-hl="true" href="#leafy_gtree">leafy G-trees</a> is trivial: there are no edges between vertices of equal <a data-ref="rank" data-preview-anchor="previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a> that belong to different <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a>.</p><p>Characterizing the missing edges from the perspective of <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> is quite instructive. Consider the algorithm for searching in a <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a>: start in the topmost layer, follow pointers within a layer until overshooting the search target, drop down a layer when you would overshoot. The “missing” edges are exactly the edges that are always guaranteed to overshoot — if they did not overshoot, the search would never have descended into this part of the <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a> in the first place. Search in a <a data-ref="leafy_zip_tree" data-preview-anchor="previews/leafy_zip_tree.html?def§leafy_zip_tree" data-hl="true" href="#leafy_zip_tree">leafy zip-tree</a> encounters a null pointer at the end of each <a data-ref="gnode" data-preview-anchor="previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-node</a>, whereas search in a <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a> blindly dereferences a pointer and performs a comparison whose result is already predetermined.</p><p>As far as we are aware, this observation of two classes of next-pointers in <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> — those that always overshoot in a search, and those which might not overshoot in some searches — is novel. The fact that <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> get to conflate the two classes and algorithmically handle them in a uniform way might well be the underlying reason why <a data-ref="skip_list" data-preview-anchor="previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> are so appealing compared to binary search trees.</p><p>We can easily augment the <a data-ref="leafy_gtree" data-preview-anchor="/g_trees/previews/leafy_gtree.html?def§leafy_gtree" data-hl="true" href="#leafy_gtree">leafy G-trees</a> to generalize the <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> by adding pointers between successive <a data-ref="gnode" data-preview-anchor="/g_trees/previews/gnode.html?def§gnode" data-hl="true" href="#gnode">G-nodes</a> of equal <a data-ref="rank" data-preview-anchor="/g_trees/previews/rank.html?def§rank" data-hl="true" href="#rank">rank</a>. <a class="figure" data-ref="fig_linked_leafy_bot_gtree" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_gtree.html?def§fig_linked_leafy_bot_gtree" href="#fig_linked_leafy_bot_gtree">Figure&nbsp;20</a> shows the resulting <dfn id="linked_leafy_gtree"><a data-ref="linked_leafy_gtree" data-preview-anchor="/g_trees/previews/linked_leafy_gtree.html?def§linked_leafy_gtree" data-hl="true" href="#linked_leafy_gtree">linked leafy G-tree</a></dfn> for our running example. <a class="figure" data-ref="fig_linked_leafy_bot_1zip" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_1zip.html?def§fig_linked_leafy_bot_1zip" href="#fig_linked_leafy_bot_1zip">Figure&nbsp;21</a> instantiates with a linked list, obtaining a <dfn id="linked_leafy_zip_tree"><a data-ref="linked_leafy_zip_tree" data-preview-anchor="/g_trees/previews/linked_leafy_zip_tree.html?def§linked_leafy_zip_tree" data-hl="true" href="#linked_leafy_zip_tree">linked leafy zip-tree</a></dfn>, i.e., a <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-list</a>. <a class="figure" data-ref="fig_linked_leafy_bot_2zip" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_2zip.html?def§fig_linked_leafy_bot_2zip" href="#fig_linked_leafy_bot_2zip">Figure&nbsp;22</a> shows the instantiation with a <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list">2-list</a>, yielding a <dfn id="linked_leafy_2zip_tree"><a data-ref="linked_leafy_2zip_tree" data-preview-anchor="/g_trees/previews/linked_leafy_2zip_tree.html?def§linked_leafy_2zip_tree" data-hl="true" href="#linked_leafy_2zip_tree">linked leafy 2-zip-tree</a></dfn>. Instantiating the <a data-ref="linked_leafy_zip_tree" data-preview-anchor="/g_trees/previews/linked_leafy_zip_tree.html?def§linked_leafy_zip_tree" data-hl="true" href="#linked_leafy_zip_tree">linked leafy zip-trees</a> with <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>-lists</a> gives a family of generalizations of <a data-ref="skip_list" data-preview-anchor="/g_trees/previews/skip_list.html?def§skip_list" data-hl="true" href="#skip_list">skip-lists</a> that store <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> per vertex. Finding such a family could easily be reason for a dedicated publication, were it not for the fact that the powerful framework of geometric trees gives us this family essentially for free.</p><figure class="wide" id="fig_linked_leafy_bot_gtree"><img src="/g_trees/assets/graphics/linkedLeafBotGtree.svg" /><figcaption><p><a class="figure" data-ref="fig_linked_leafy_bot_gtree" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_gtree.html?def§fig_linked_leafy_bot_gtree" href="#fig_linked_leafy_bot_gtree">Figure&nbsp;20</a>: Linked Leafy G-Tree</p></figcaption></figure><figure class="wide" id="fig_linked_leafy_bot_1zip"><img src="/g_trees/assets/graphics/linkedLeafBot1zip.svg" /><figcaption><p><a class="figure" data-ref="fig_linked_leafy_bot_1zip" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_1zip.html?def§fig_linked_leafy_bot_1zip" href="#fig_linked_leafy_bot_1zip">Figure&nbsp;21</a>: Linked Leafy Zip-Tree aka Skip-List</p></figcaption></figure><figure class="wide" id="fig_linked_leafy_bot_2zip"><img src="/g_trees/assets/graphics/linkedLeafBot2zip.svg" /><figcaption><p><a class="figure" data-ref="fig_linked_leafy_bot_2zip" data-preview-anchor="/g_trees/previews/fig_linked_leafy_bot_2zip.html?def§fig_linked_leafy_bot_2zip" href="#fig_linked_leafy_bot_2zip">Figure&nbsp;22</a>: Linked Leafy 2-Zip-Tree aka 2-Skip-List</p></figcaption></figure><p>To conclude, we point out that linking only the <em>leaves</em> of a <a data-ref="leafy_gtree" data-preview-anchor="/g_trees/previews/leafy_gtree.html?def§leafy_gtree" data-hl="true" href="#leafy_gtree">leafy G-tree</a> yields a family analogous to the <a class="bib" data-ref="comer1979ubiquitous" data-preview-anchor="/g_trees/previews/comer1979ubiquitous.html?def§comer1979ubiquitous" href="/g_trees/assets/references/comer1979ubiquitous.pdf"><span class="bibText">B<sup>+</sup>-trees</span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;">Comer</span>, 1979)</span></a>. <a class="figure" data-ref="fig_gplus_gtree" data-preview-anchor="/g_trees/previews/fig_gplus_gtree.html?def§fig_gplus_gtree" href="#fig_gplus_gtree">Figure&nbsp;23</a> shows such a <dfn id="gplus_tree"><a data-ref="gplus_tree" data-preview-anchor="/g_trees/previews/gplus_tree.html?def§gplus_tree" data-hl="true" href="#gplus_tree">G<sup>+</sup>-tree</a></dfn>; <a class="figure" data-ref="fig_gplus_1zip" data-preview-anchor="/g_trees/previews/fig_gplus_1zip.html?def§fig_gplus_1zip" href="#fig_gplus_1zip">Figure&nbsp;24</a> shows an instantiation with a linked list (a <dfn id="zipplus_tree"><a data-ref="zipplus_tree" data-preview-anchor="/g_trees/previews/zipplus_tree.html?def§zipplus_tree" data-hl="true" href="#zipplus_tree">zip<sup>+</sup>-tree</a></dfn>), and <a class="figure" data-ref="fig_gplus_2zip" data-preview-anchor="/g_trees/previews/fig_gplus_2zip.html?def§fig_gplus_2zip" href="#fig_gplus_2zip">Figure&nbsp;25</a> shows an instantiation with a <a data-ref="k_list" data-preview-anchor="/g_trees/previews/k_list.html?def§k_list" data-hl="true" href="#k_list">2-list</a> (a <dfn id="zip2plus_tree"><a data-ref="zip2plus_tree" data-preview-anchor="/g_trees/previews/zip2plus_tree.html?def§zip2plus_tree" data-hl="true" href="#zip2plus_tree">2-zip<sup>+</sup>-tree</a></dfn>).</p><figure class="wide" id="fig_gplus_gtree"><img src="/g_trees/assets/graphics/gPlusGtree.svg" /><figcaption><p><a class="figure" data-ref="fig_gplus_gtree" data-preview-anchor="/g_trees/previews/fig_gplus_gtree.html?def§fig_gplus_gtree" href="#fig_gplus_gtree">Figure&nbsp;23</a>: G<sup>+</sup>-Tree</p></figcaption></figure><figure class="wide" id="fig_gplus_1zip"><img src="/g_trees/assets/graphics/gPlus1zip.svg" /><figcaption><p><a class="figure" data-ref="fig_gplus_1zip" data-preview-anchor="/g_trees/previews/fig_gplus_1zip.html?def§fig_gplus_1zip" href="#fig_gplus_1zip">Figure&nbsp;24</a>: Zip<sup>+</sup>-Tree</p></figcaption></figure><figure class="wide" id="fig_gplus_2zip"><img src="/g_trees/assets/graphics/gPlus2zip.svg" /><figcaption><p><a class="figure" data-ref="fig_gplus_2zip" data-preview-anchor="/g_trees/previews/fig_gplus_2zip.html?def§fig_gplus_2zip" href="#fig_gplus_2zip">Figure&nbsp;25</a>: 2-Zip<sup>+</sup>-Tree</p></figcaption></figure></section><h2 id="explicit_implementations"><a class="hsection" data-ref="explicit_implementations" data-hl="true" data-hsection-level="1" href="#explicit_implementations">Appendix C: Explicit Insertion and Deletion</a></h2><section data-hsection="explicit_implementations"><p>As alluded to in <a class="hsection" data-hsection-level="1" data-ref="implementation" data-hl="true" href="#implementation">Section&nbsp;5</a>, it is possible to derive direct insertion and deletion functions for <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a> that are analgous to Algorithm 1 from the original <a data-ref="zip_tree" data-preview-anchor="/g_trees/previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a> paper. For completeness, we provide pseudocode for purely functional variants of these functions for <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-trees</a>. The functions leverage the previously defined <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a> and various helper functions.</p><p>We also define an additional helper function which joins a possibly empty <a class="rustic type" data-ref="c_set" data-preview-anchor="previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a> with a greater <a class="rustic interface" data-ref="c_neset" data-preview-anchor="previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a>.:</p><code class="pseudocode" id="code_explicit_helpers"><div class="locGutter" data-l="1" data-i="0" id="code_explicit_helpersL1"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="1" href="#code_explicit_helpersL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Join a (possibly empty) <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a> with a greater <a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_explicit_helpersL2"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="2" href="#code_explicit_helpersL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="c_set_join"><a class="rustic function" data-ref="c_set_join" data-preview-anchor="/g_trees/previews/c_set_join.html?def§c_set_join" data-hl="true" href="#c_set_join">set_join</a></dfn><span class="rb1 open">&lt;</span><dfn id="c_set_join_i"><a class="rustic typeArg" data-ref="c_set_join_i" data-preview-anchor="/g_trees/previews/c_set_join_i.html?def§c_set_join_i" data-hl="true" href="#c_set_join_i">I</a></dfn><span class="deemph">,</span> <dfn id="c_set_join_s"><a class="rustic typeArg" data-ref="c_set_join_s" data-preview-anchor="/g_trees/previews/c_set_join_s.html?def§c_set_join_s" data-hl="true" href="#c_set_join_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="c_set_join_i" data-preview-anchor="/g_trees/previews/c_set_join_i.html?def§c_set_join_i" data-hl="true" href="#c_set_join_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_explicit_helpersL3"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="3" href="#code_explicit_helpersL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_join_left"><a class="rustic value" data-ref="c_set_join_left" data-preview-anchor="/g_trees/previews/c_set_join_left.html?def§c_set_join_left" data-hl="true" href="#c_set_join_left">left</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="c_set_join_s" data-preview-anchor="/g_trees/previews/c_set_join_s.html?def§c_set_join_s" data-hl="true" href="#c_set_join_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_explicit_helpersL4"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="4" href="#code_explicit_helpersL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="c_set_join_right"><a class="rustic value" data-ref="c_set_join_right" data-preview-anchor="/g_trees/previews/c_set_join_right.html?def§c_set_join_right" data-hl="true" href="#c_set_join_right">right</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="c_set_join_s" data-preview-anchor="/g_trees/previews/c_set_join_s.html?def§c_set_join_s" data-hl="true" href="#c_set_join_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="0" id="code_explicit_helpersL5"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="5" href="#code_explicit_helpersL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic typeArg" data-ref="c_set_join_s" data-preview-anchor="/g_trees/previews/c_set_join_s.html?def§c_set_join_s" data-hl="true" href="#c_set_join_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_explicit_helpersL6"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="6" href="#code_explicit_helpersL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="c_set_join_left" data-preview-anchor="/g_trees/previews/c_set_join_left.html?def§c_set_join_left" data-hl="true" href="#c_set_join_left">left</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="7" data-i="2" id="code_explicit_helpersL7"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="7" href="#code_explicit_helpersL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic value" data-ref="c_set_join_right" data-preview-anchor="/g_trees/previews/c_set_join_right.html?def§c_set_join_right" data-hl="true" href="#c_set_join_right">right</a></div></div><div class="locGutter" data-l="8" data-i="2" id="code_explicit_helpersL8"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="8" href="#code_explicit_helpersL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="c_set_join_l"><a class="rustic value" data-ref="c_set_join_l" data-preview-anchor="/g_trees/previews/c_set_join_l.html?def§c_set_join_l" data-hl="true" href="#c_set_join_l">l</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <a class="rustic function" data-ref="c_neset_join" data-preview-anchor="/g_trees/previews/c_neset_join.html?def§c_neset_join" data-hl="true" href="#c_neset_join">join</a><span class="rb0 open">(</span><a class="rustic value" data-ref="c_set_join_l" data-preview-anchor="/g_trees/previews/c_set_join_l.html?def§c_set_join_l" data-hl="true" href="#c_set_join_l">l</a><span class="deemph">,</span> <a class="rustic value" data-ref="c_set_join_right" data-preview-anchor="/g_trees/previews/c_set_join_right.html?def§c_set_join_right" data-hl="true" href="#c_set_join_right">right</a><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="9" data-i="1" id="code_explicit_helpersL9"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="9" href="#code_explicit_helpersL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="10" data-i="0" id="code_explicit_helpersL10"><div class="lineNumber"><a data-pseudocode="code_explicit_helpers" data-ref="code_explicit_helpers" data-hllines="10" href="#code_explicit_helpersL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>The following explicit <a class="rustic function" data-ref="x_delete" data-preview-anchor="previews/x_delete.html?def§x_delete" data-hl="true" href="#x_delete">delete</a> pseudocode follows a very similar structure to Algorithm 1 from <a class="bib" data-ref="tarjan2021zip" data-preview-anchor="previews/tarjan2021zip.html?def§tarjan2021zip" href="g_trees/assets/references/tarjan2021zip.pdf"><span class="bibText"></span>&nbsp;<span class="bibCitation">(<span style="font-variant:small-caps;"><span style="font-variant:small-caps;">Tarjan</span> <span style="font-variant:normal;">et al.</span></span>, 2021)</span></a>, though we use pattern matching here for consistency.</p><code class="pseudocode" id="code_explicit_delete"><div class="locGutter" data-l="1" data-i="0" id="code_explicit_deleteL1"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="1" href="#code_explicit_deleteL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Delete an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> from a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_explicit_deleteL2"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="2" href="#code_explicit_deleteL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="x_delete"><a class="rustic function" data-ref="x_delete" data-preview-anchor="/g_trees/previews/x_delete.html?def§x_delete" data-hl="true" href="#x_delete">delete</a></dfn><span class="rb1 open">&lt;</span><dfn id="x_delete_i"><a class="rustic typeArg" data-ref="x_delete_i" data-preview-anchor="/g_trees/previews/x_delete_i.html?def§x_delete_i" data-hl="true" href="#x_delete_i">I</a></dfn><span class="deemph">,</span> <dfn id="x_delete_s"><a class="rustic typeArg" data-ref="x_delete_s" data-preview-anchor="/g_trees/previews/x_delete_s.html?def§x_delete_s" data-hl="true" href="#x_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="x_delete_i" data-preview-anchor="/g_trees/previews/x_delete_i.html?def§x_delete_i" data-hl="true" href="#x_delete_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_explicit_deleteL3"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="3" href="#code_explicit_deleteL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="x_delete_t"><a class="rustic value" data-ref="x_delete_t" data-preview-anchor="/g_trees/previews/x_delete_t.html?def§x_delete_t" data-hl="true" href="#x_delete_t">t</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="x_delete_s" data-preview-anchor="/g_trees/previews/x_delete_s.html?def§x_delete_s" data-hl="true" href="#x_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_explicit_deleteL4"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="4" href="#code_explicit_deleteL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="x_delete_item"><a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="x_delete_i" data-preview-anchor="/g_trees/previews/x_delete_i.html?def§x_delete_i" data-hl="true" href="#x_delete_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="0" id="code_explicit_deleteL5"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="5" href="#code_explicit_deleteL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="x_delete_s" data-preview-anchor="/g_trees/previews/x_delete_s.html?def§x_delete_s" data-hl="true" href="#x_delete_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="6" data-i="1" id="code_explicit_deleteL6"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="6" href="#code_explicit_deleteL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="x_delete_t" data-preview-anchor="/g_trees/previews/x_delete_t.html?def§x_delete_t" data-hl="true" href="#x_delete_t">t</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="7" data-i="2" id="code_explicit_deleteL7"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="7" href="#code_explicit_deleteL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Deletion in the empty tree is trivial.</div></div><div class="locGutter" data-l="8" data-i="2" id="code_explicit_deleteL8"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="8" href="#code_explicit_deleteL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a></div></div><div class="locGutter" data-l="9" data-i="2" id="code_explicit_deleteL9"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="9" href="#code_explicit_deleteL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div></div><div class="locGutter" data-l="10" data-i="2" id="code_explicit_deleteL10"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="10" href="#code_explicit_deleteL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">For non-empty trees, split the inner set.</div></div><div class="locGutter" data-l="11" data-i="2" id="code_explicit_deleteL11"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="11" href="#code_explicit_deleteL11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="x_delete_set"><a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <span class="kw">match</span> <a class="rustic function" data-ref="c_neset_split" data-preview-anchor="/g_trees/previews/c_neset_split.html?def§c_neset_split" data-hl="true" href="#c_neset_split">split</a><span class="rb0 open">(</span><a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a><span class="rb0 close">)</span> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="12" data-i="3" id="code_explicit_deleteL12"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="12" href="#code_explicit_deleteL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">The target <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a> was found. Simply exclude it and zip the left and right subtrees together.</div></div><div class="locGutter" data-l="13" data-i="3" id="code_explicit_deleteL13"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="13" href="#code_explicit_deleteL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span></div></div><div class="locGutter" data-l="14" data-i="4" id="code_explicit_deleteL14"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="14" href="#code_explicit_deleteL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="x_left_set_0"><a class="rustic value" data-ref="x_left_set_0" data-preview-anchor="/g_trees/previews/x_left_set_0.html?def§x_left_set_0" data-hl="true" href="#x_left_set_0">left_set</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="15" data-i="4" id="code_explicit_deleteL15"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="15" href="#code_explicit_deleteL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionSome" data-preview-anchor="/g_trees/previews/OptionSome.html?def§OptionSome" data-hl="true" href="#OptionSome">Some</a><span class="rb1 open">(</span><dfn id="x_left_subtree_of_key"><a class="rustic value" data-ref="x_left_subtree_of_key" data-preview-anchor="/g_trees/previews/x_left_subtree_of_key.html?def§x_left_subtree_of_key" data-hl="true" href="#x_left_subtree_of_key">left_subtree_of_key</a></dfn><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="16" data-i="4" id="code_explicit_deleteL16"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="16" href="#code_explicit_deleteL16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="x_right_set_0"><a class="rustic value" data-ref="x_right_set_0" data-preview-anchor="/g_trees/previews/x_right_set_0.html?def§x_right_set_0" data-hl="true" href="#x_right_set_0">right_set</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="17" data-i="3" id="code_explicit_deleteL17"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="17" href="#code_explicit_deleteL17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic function" data-ref="c_zip2" data-preview-anchor="/g_trees/previews/c_zip2.html?def§c_zip2" data-hl="true" href="#c_zip2">zip2</a><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="18" data-i="4" id="code_explicit_deleteL18"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="18" href="#code_explicit_deleteL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb2 open">(</span><a class="rustic value" data-ref="x_left_set_0" data-preview-anchor="/g_trees/previews/x_left_set_0.html?def§x_left_set_0" data-hl="true" href="#x_left_set_0">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_left_subtree_of_key" data-preview-anchor="/g_trees/previews/x_left_subtree_of_key.html?def§x_left_subtree_of_key" data-hl="true" href="#x_left_subtree_of_key">left_subtree_of_key</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="19" data-i="4" id="code_explicit_deleteL19"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="19" href="#code_explicit_deleteL19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb2 open">(</span><a class="rustic value" data-ref="x_right_set_0" data-preview-anchor="/g_trees/previews/x_right_set_0.html?def§x_right_set_0" data-hl="true" href="#x_right_set_0">right_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="20" data-i="3" id="code_explicit_deleteL20"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="20" href="#code_explicit_deleteL20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">)</span></div></div><div class="locGutter" data-l="21" data-i="3" id="code_explicit_deleteL21"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="21" href="#code_explicit_deleteL21">21</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">The target <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a> is strictly greater than all items in <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a>, recurse into the <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a> subtree and build from the left.</div></div><div class="locGutter" data-l="22" data-i="3" id="code_explicit_deleteL22"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="22" href="#code_explicit_deleteL22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="x_left_set_1"><a class="rustic value" data-ref="x_left_set_1" data-preview-anchor="/g_trees/previews/x_left_set_1.html?def§x_left_set_1" data-hl="true" href="#x_left_set_1">left_set</a></dfn><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="23" data-i="4" id="code_explicit_deleteL23"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="23" href="#code_explicit_deleteL23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="24" data-i="5" id="code_explicit_deleteL24"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="24" href="#code_explicit_deleteL24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="x_left_set_1" data-preview-anchor="/g_trees/previews/x_left_set_1.html?def§x_left_set_1" data-hl="true" href="#x_left_set_1">left_set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="25" data-i="5" id="code_explicit_deleteL25"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="25" href="#code_explicit_deleteL25">25</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="x_delete" data-preview-anchor="/g_trees/previews/x_delete.html?def§x_delete" data-hl="true" href="#x_delete">delete</a><span class="rb0 open">(</span><a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="26" data-i="5" id="code_explicit_deleteL26"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="26" href="#code_explicit_deleteL26">26</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="27" data-i="4" id="code_explicit_deleteL27"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="27" href="#code_explicit_deleteL27">27</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="28" data-i="3" id="code_explicit_deleteL28"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="28" href="#code_explicit_deleteL28">28</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="29" data-i="3" id="code_explicit_deleteL29"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="29" href="#code_explicit_deleteL29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">The target <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a> is strictly less than the <a class="rustic value" data-ref="x_leftmost_item" data-preview-anchor="/g_trees/previews/x_leftmost_item.html?def§x_leftmost_item" data-hl="true" href="#x_leftmost_item">leftmost_item</a> of <a class="rustic value" data-ref="x_r_0" data-preview-anchor="/g_trees/previews/x_r_0.html?def§x_r_0" data-hl="true" href="#x_r_0">r</a>, recurse down the left and build from the right.</div></div><div class="locGutter" data-l="30" data-i="3" id="code_explicit_deleteL30"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="30" href="#code_explicit_deleteL30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="x_left_set_2"><a class="rustic value" data-ref="x_left_set_2" data-preview-anchor="/g_trees/previews/x_left_set_2.html?def§x_left_set_2" data-hl="true" href="#x_left_set_2">left_set</a></dfn><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb1 open">(</span><dfn id="x_r_0"><a class="rustic value" data-ref="x_r_0" data-preview-anchor="/g_trees/previews/x_r_0.html?def§x_r_0" data-hl="true" href="#x_r_0">r</a></dfn><span class="rb1 close">)</span><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="31" data-i="4" id="code_explicit_deleteL31"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="31" href="#code_explicit_deleteL31">31</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="32" data-i="5" id="code_explicit_deleteL32"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="32" href="#code_explicit_deleteL32">32</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="x_leftmost_item"><a class="rustic value" data-ref="x_leftmost_item" data-preview-anchor="/g_trees/previews/x_leftmost_item.html?def§x_leftmost_item" data-hl="true" href="#x_leftmost_item">leftmost_item</a></dfn><span class="deemph">,</span> <dfn id="x_leftmost_subtree"><a class="rustic value" data-ref="x_leftmost_subtree" data-preview-anchor="/g_trees/previews/x_leftmost_subtree.html?def§x_leftmost_subtree" data-hl="true" href="#x_leftmost_subtree">leftmost_subtree</a></dfn><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="33" data-i="5" id="code_explicit_deleteL33"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="33" href="#code_explicit_deleteL33">33</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="x_remaining"><a class="rustic value" data-ref="x_remaining" data-preview-anchor="/g_trees/previews/x_remaining.html?def§x_remaining" data-hl="true" href="#x_remaining">remaining</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="34" data-i="4" id="code_explicit_deleteL34"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="34" href="#code_explicit_deleteL34">34</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="x_r_0" data-preview-anchor="/g_trees/previews/x_r_0.html?def§x_r_0" data-hl="true" href="#x_r_0">r</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="35" data-i="4" id="code_explicit_deleteL35"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="35" href="#code_explicit_deleteL35">35</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="x_new_right"><a class="rustic value" data-ref="x_new_right" data-preview-anchor="/g_trees/previews/x_new_right.html?def§x_new_right" data-hl="true" href="#x_new_right">new_right</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="x_remaining" data-preview-anchor="/g_trees/previews/x_remaining.html?def§x_remaining" data-hl="true" href="#x_remaining">remaining</a><span class="deemph">,</span> <span class="open">(</span></div></div><div class="locGutter" data-l="36" data-i="5" id="code_explicit_deleteL36"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="36" href="#code_explicit_deleteL36">36</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="x_leftmost_item" data-preview-anchor="/g_trees/previews/x_leftmost_item.html?def§x_leftmost_item" data-hl="true" href="#x_leftmost_item">leftmost_item</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="37" data-i="5" id="code_explicit_deleteL37"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="37" href="#code_explicit_deleteL37">37</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="x_delete" data-preview-anchor="/g_trees/previews/x_delete.html?def§x_delete" data-hl="true" href="#x_delete">delete</a><span class="rb0 open">(</span><a class="rustic value" data-ref="x_leftmost_subtree" data-preview-anchor="/g_trees/previews/x_leftmost_subtree.html?def§x_leftmost_subtree" data-hl="true" href="#x_leftmost_subtree">leftmost_subtree</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_delete_item" data-preview-anchor="/g_trees/previews/x_delete_item.html?def§x_delete_item" data-hl="true" href="#x_delete_item">item</a><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="38" data-i="4" id="code_explicit_deleteL38"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="38" href="#code_explicit_deleteL38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="39" data-i="4" id="code_explicit_deleteL39"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="39" href="#code_explicit_deleteL39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="40" data-i="5" id="code_explicit_deleteL40"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="40" href="#code_explicit_deleteL40">40</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="41" data-i="6" id="code_explicit_deleteL41"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="41" href="#code_explicit_deleteL41">41</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_join" data-preview-anchor="/g_trees/previews/c_set_join.html?def§c_set_join" data-hl="true" href="#c_set_join">set_join</a><span class="rb1 open">(</span><a class="rustic value" data-ref="x_left_set_2" data-preview-anchor="/g_trees/previews/x_left_set_2.html?def§x_left_set_2" data-hl="true" href="#x_left_set_2">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="x_new_right" data-preview-anchor="/g_trees/previews/x_new_right.html?def§x_new_right" data-hl="true" href="#x_new_right">new_right</a><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="42" data-i="6" id="code_explicit_deleteL42"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="42" href="#code_explicit_deleteL42">42</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="43" data-i="6" id="code_explicit_deleteL43"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="43" href="#code_explicit_deleteL43">43</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="x_delete_set" data-preview-anchor="/g_trees/previews/x_delete_set.html?def§x_delete_set" data-hl="true" href="#x_delete_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="44" data-i="5" id="code_explicit_deleteL44"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="44" href="#code_explicit_deleteL44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="45" data-i="4" id="code_explicit_deleteL45"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="45" href="#code_explicit_deleteL45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="46" data-i="3" id="code_explicit_deleteL46"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="46" href="#code_explicit_deleteL46">46</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="47" data-i="2" id="code_explicit_deleteL47"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="47" href="#code_explicit_deleteL47">47</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span></div></div><div class="locGutter" data-l="48" data-i="1" id="code_explicit_deleteL48"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="48" href="#code_explicit_deleteL48">48</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="49" data-i="0" id="code_explicit_deleteL49"><div class="lineNumber"><a data-pseudocode="code_explicit_delete" data-ref="code_explicit_delete" data-hllines="49" href="#code_explicit_deleteL49">49</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code><p>While the explicit insert function requires a bit more code, it also follows the same <em>general structure</em> of its original <a data-ref="zip_tree" data-preview-anchor="previews/zip_tree.html?def§zip_tree" data-hl="true" href="#zip_tree">zip tree</a> counterpart. The bulk of the additional code is devoted to operations on the inner set, whereas the matched patterns remain mostly equivalent.</p><code class="pseudocode" id="code_explicit_insert"><div class="locGutter" data-l="1" data-i="0" id="code_explicit_insertL1"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="1" href="#code_explicit_insertL1">1</a></div><div class="fold"></div></div><div class="locContent"><div></div><div class="lineComment">Insert an <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">item</a> into a <a data-ref="gtree" data-preview-anchor="/g_trees/previews/gtree.html?def§gtree" data-hl="true" href="#gtree">G-tree</a>.</div></div><div class="locGutter" data-l="2" data-i="0" id="code_explicit_insertL2"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="2" href="#code_explicit_insertL2">2</a></div><div class="fold"></div></div><div class="locContent"><div><span class="kw2">fn</span> <dfn id="y_insert"><a class="rustic function" data-ref="y_insert" data-preview-anchor="/g_trees/previews/y_insert.html?def§y_insert" data-hl="true" href="#y_insert">insert</a></dfn><span class="rb1 open">&lt;</span><dfn id="y_insert_i"><a class="rustic typeArg" data-ref="y_insert_i" data-preview-anchor="/g_trees/previews/y_insert_i.html?def§y_insert_i" data-hl="true" href="#y_insert_i">I</a></dfn><span class="deemph">,</span> <dfn id="y_insert_s"><a class="rustic typeArg" data-ref="y_insert_s" data-preview-anchor="/g_trees/previews/y_insert_s.html?def§y_insert_s" data-hl="true" href="#y_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a></dfn><span class="deemph">:</span> <span class="rb2 open"></span><a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a><span class="rb0 open">&lt;</span><a class="rustic typeArg" data-ref="y_insert_i" data-preview-anchor="/g_trees/previews/y_insert_i.html?def§y_insert_i" data-hl="true" href="#y_insert_i">I</a><span class="rb0 close">&gt;</span><span class="rb2 close"></span><span class="rb1 close">&gt;</span><span class="rb1 open">(</span></div></div><div class="locGutter" data-l="3" data-i="1" id="code_explicit_insertL3"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="3" href="#code_explicit_insertL3">3</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="y_insert_t"><a class="rustic value" data-ref="y_insert_t" data-preview-anchor="/g_trees/previews/y_insert_t.html?def§y_insert_t" data-hl="true" href="#y_insert_t">t</a></dfn><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb2 open">&lt;</span><a class="rustic typeArg" data-ref="y_insert_s" data-preview-anchor="/g_trees/previews/y_insert_s.html?def§y_insert_s" data-hl="true" href="#y_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb2 close">&gt;</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="4" data-i="1" id="code_explicit_insertL4"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="4" href="#code_explicit_insertL4">4</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="y_insert_item"><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a></dfn><span class="deemph">:</span> <a class="rustic typeArg" data-ref="y_insert_i" data-preview-anchor="/g_trees/previews/y_insert_i.html?def§y_insert_i" data-hl="true" href="#y_insert_i">I</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="5" data-i="1" id="code_explicit_insertL5"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="5" href="#code_explicit_insertL5">5</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><dfn id="y_insert_rank"><a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a></dfn><span class="deemph">:</span> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span></span></span></span><span class="deemph">,</span></div></div><div class="locGutter" data-l="6" data-i="0" id="code_explicit_insertL6"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="6" href="#code_explicit_insertL6">6</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">)</span> <span class="deemph">-></span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="rb1 open">&lt;</span><a class="rustic typeArg" data-ref="y_insert_s" data-preview-anchor="/g_trees/previews/y_insert_s.html?def§y_insert_s" data-hl="true" href="#y_insert_s"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6914em;"></span><span class="mord mathfrak">S</span></span></span></span></a><span class="rb1 close">&gt;</span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="7" data-i="1" id="code_explicit_insertL7"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="7" href="#code_explicit_insertL7">7</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="kw">match</span> <a class="rustic value" data-ref="y_insert_t" data-preview-anchor="/g_trees/previews/y_insert_t.html?def§y_insert_t" data-hl="true" href="#y_insert_t">t</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="8" data-i="2" id="code_explicit_insertL8"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="8" href="#code_explicit_insertL8">8</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Insertion into the empty tree is trivial.</div></div><div class="locGutter" data-l="9" data-i="2" id="code_explicit_insertL9"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="9" href="#code_explicit_insertL9">9</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="10" data-i="3" id="code_explicit_insertL10"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="10" href="#code_explicit_insertL10">10</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="11" data-i="4" id="code_explicit_insertL11"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="11" href="#code_explicit_insertL11">11</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="12" data-i="4" id="code_explicit_insertL12"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="12" href="#code_explicit_insertL12">12</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_empty" data-preview-anchor="/g_trees/previews/c_gtree_empty.html?def§c_gtree_empty" data-hl="true" href="#c_gtree_empty">Empty</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="13" data-i="4" id="code_explicit_insertL13"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="13" href="#code_explicit_insertL13">13</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="14" data-i="3" id="code_explicit_insertL14"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="14" href="#code_explicit_insertL14">14</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="15" data-i="2" id="code_explicit_insertL15"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="15" href="#code_explicit_insertL15">15</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="16" data-i="2" id="code_explicit_insertL16"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="16" href="#code_explicit_insertL16">16</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div></div><div class="locGutter" data-l="17" data-i="2" id="code_explicit_insertL17"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="17" href="#code_explicit_insertL17">17</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">For non-empty trees, split the inner set.</div></div><div class="locGutter" data-l="18" data-i="2" id="code_explicit_insertL18"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="18" href="#code_explicit_insertL18">18</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span><dfn id="y_insert_set"><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a></dfn><span class="rb0 close">)</span> <span class="deemph">=></span> <span class="kw">match</span> <a class="rustic function" data-ref="c_neset_split" data-preview-anchor="/g_trees/previews/c_neset_split.html?def§c_neset_split" data-hl="true" href="#c_neset_split">split</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="rb0 close">)</span> <span class="rb0 open">{</span></div></div><div class="locGutter" data-l="19" data-i="3" id="code_explicit_insertL19"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="19" href="#code_explicit_insertL19">19</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">Found the <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a>, nothing more to do.</div></div><div class="locGutter" data-l="20" data-i="3" id="code_explicit_insertL20"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="20" href="#code_explicit_insertL20">20</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><span class="deemph">_</span><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionSome" data-preview-anchor="/g_trees/previews/OptionSome.html?def§OptionSome" data-hl="true" href="#OptionSome">Some</a><span class="rb1 open">(</span><span class="deemph">_</span><span class="rb1 close">)</span><span class="deemph">,</span> <span class="deemph">_</span><span class="close">)</span> <span class="deemph">=></span> <span class="kw">return</span> <a class="rustic value" data-ref="y_insert_t" data-preview-anchor="/g_trees/previews/y_insert_t.html?def§y_insert_t" data-hl="true" href="#y_insert_t">t</a></div></div><div class="locGutter" data-l="21" data-i="3" id="code_explicit_insertL21"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="21" href="#code_explicit_insertL21">21</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">The <a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a> of the current <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> contains no <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> greater than <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a>.</div></div><div class="locGutter" data-l="22" data-i="3" id="code_explicit_insertL22"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="22" href="#code_explicit_insertL22">22</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="y_left_set_1"><a class="rustic value" data-ref="y_left_set_1" data-preview-anchor="/g_trees/previews/y_left_set_1.html?def§y_left_set_1" data-hl="true" href="#y_left_set_1">left_set</a></dfn><span class="deemph">,</span> <a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span> <a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_empty" data-preview-anchor="/g_trees/previews/c_set_empty.html?def§c_set_empty" data-hl="true" href="#c_set_empty">Empty</a><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="23" data-i="4" id="code_explicit_insertL23"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="23" href="#code_explicit_insertL23">23</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">if</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a> &lt; <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="24" data-i="5" id="code_explicit_insertL24"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="24" href="#code_explicit_insertL24">24</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="25" data-i="6" id="code_explicit_insertL25"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="25" href="#code_explicit_insertL25">25</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="26" data-i="7" id="code_explicit_insertL26"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="26" href="#code_explicit_insertL26">26</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="27" data-i="7" id="code_explicit_insertL27"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="27" href="#code_explicit_insertL27">27</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic function" data-ref="y_insert" data-preview-anchor="/g_trees/previews/y_insert.html?def§y_insert" data-hl="true" href="#y_insert">insert</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="28" data-i="7" id="code_explicit_insertL28"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="28" href="#code_explicit_insertL28">28</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="29" data-i="6" id="code_explicit_insertL29"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="29" href="#code_explicit_insertL29">29</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="30" data-i="5" id="code_explicit_insertL30"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="30" href="#code_explicit_insertL30">30</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="31" data-i="4" id="code_explicit_insertL31"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="31" href="#code_explicit_insertL31">31</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span> <span class="kw">else</span> <span class="kw">if</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span></span></span></span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="32" data-i="5" id="code_explicit_insertL32"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="32" href="#code_explicit_insertL32">32</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="y_l_1"><a class="rustic value" data-ref="y_l_1" data-preview-anchor="/g_trees/previews/y_l_1.html?def§y_l_1" data-hl="true" href="#y_l_1">l</a></dfn><span class="deemph">,</span> <dfn id="y_r_1"><a class="rustic value" data-ref="y_r_1" data-preview-anchor="/g_trees/previews/y_r_1.html?def§y_r_1" data-hl="true" href="#y_r_1">r</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="33" data-i="5" id="code_explicit_insertL33"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="33" href="#code_explicit_insertL33">33</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="34" data-i="6" id="code_explicit_insertL34"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="34" href="#code_explicit_insertL34">34</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="35" data-i="7" id="code_explicit_insertL35"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="35" href="#code_explicit_insertL35">35</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_join" data-preview-anchor="/g_trees/previews/c_set_join.html?def§c_set_join" data-hl="true" href="#c_set_join">set_join</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="36" data-i="8" id="code_explicit_insertL36"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="36" href="#code_explicit_insertL36">36</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_left_set_1" data-preview-anchor="/g_trees/previews/y_left_set_1.html?def§y_left_set_1" data-hl="true" href="#y_left_set_1">left_set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="37" data-i="8" id="code_explicit_insertL37"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="37" href="#code_explicit_insertL37">37</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_l_1" data-preview-anchor="/g_trees/previews/y_l_1.html?def§y_l_1" data-hl="true" href="#y_l_1">l</a><span class="rb0 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="38" data-i="7" id="code_explicit_insertL38"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="38" href="#code_explicit_insertL38">38</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="39" data-i="7" id="code_explicit_insertL39"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="39" href="#code_explicit_insertL39">39</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_r_1" data-preview-anchor="/g_trees/previews/y_r_1.html?def§y_r_1" data-hl="true" href="#y_r_1">r</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="40" data-i="7" id="code_explicit_insertL40"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="40" href="#code_explicit_insertL40">40</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="41" data-i="6" id="code_explicit_insertL41"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="41" href="#code_explicit_insertL41">41</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="42" data-i="5" id="code_explicit_insertL42"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="42" href="#code_explicit_insertL42">42</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="43" data-i="4" id="code_explicit_insertL43"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="43" href="#code_explicit_insertL43">43</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span> <span class="kw">else</span> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="44" data-i="5" id="code_explicit_insertL44"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="44" href="#code_explicit_insertL44">44</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="y_l_2"><a class="rustic value" data-ref="y_l_2" data-preview-anchor="/g_trees/previews/y_l_2.html?def§y_l_2" data-hl="true" href="#y_l_2">l</a></dfn><span class="deemph">,</span> <dfn id="y_r_2"><a class="rustic value" data-ref="y_r_2" data-preview-anchor="/g_trees/previews/y_r_2.html?def§y_r_2" data-hl="true" href="#y_r_2">r</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="45" data-i="5" id="code_explicit_insertL45"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="45" href="#code_explicit_insertL45">45</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_left_subtree1"><a class="rustic value" data-ref="y_left_subtree1" data-preview-anchor="/g_trees/previews/y_left_subtree1.html?def§y_left_subtree1" data-hl="true" href="#y_left_subtree1">left_subtree</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="46" data-i="6" id="code_explicit_insertL46"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="46" href="#code_explicit_insertL46">46</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_left_set_1" data-preview-anchor="/g_trees/previews/y_left_set_1.html?def§y_left_set_1" data-hl="true" href="#y_left_set_1">left_set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="47" data-i="6" id="code_explicit_insertL47"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="47" href="#code_explicit_insertL47">47</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_l_2" data-preview-anchor="/g_trees/previews/y_l_2.html?def§y_l_2" data-hl="true" href="#y_l_2">l</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="48" data-i="6" id="code_explicit_insertL48"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="48" href="#code_explicit_insertL48">48</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="49" data-i="5" id="code_explicit_insertL49"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="49" href="#code_explicit_insertL49">49</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="50" data-i="5" id="code_explicit_insertL50"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="50" href="#code_explicit_insertL50">50</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="51" data-i="6" id="code_explicit_insertL51"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="51" href="#code_explicit_insertL51">51</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="52" data-i="7" id="code_explicit_insertL52"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="52" href="#code_explicit_insertL52">52</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_left_subtree1" data-preview-anchor="/g_trees/previews/y_left_subtree1.html?def§y_left_subtree1" data-hl="true" href="#y_left_subtree1">left_subtree</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="53" data-i="7" id="code_explicit_insertL53"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="53" href="#code_explicit_insertL53">53</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_r_2" data-preview-anchor="/g_trees/previews/y_r_2.html?def§y_r_2" data-hl="true" href="#y_r_2">r</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="54" data-i="7" id="code_explicit_insertL54"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="54" href="#code_explicit_insertL54">54</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="55" data-i="6" id="code_explicit_insertL55"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="55" href="#code_explicit_insertL55">55</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="56" data-i="5" id="code_explicit_insertL56"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="56" href="#code_explicit_insertL56">56</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="57" data-i="4" id="code_explicit_insertL57"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="57" href="#code_explicit_insertL57">57</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="58" data-i="3" id="code_explicit_insertL58"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="58" href="#code_explicit_insertL58">58</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="59" data-i="3" id="code_explicit_insertL59"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="59" href="#code_explicit_insertL59">59</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div></div><div class="lineComment">The <a class="rustic interface" data-ref="c_neset" data-preview-anchor="/g_trees/previews/c_neset.html?def§c_neset" data-hl="true" href="#c_neset">NonemptySet</a> of the current <a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> does contain <a data-ref="item" data-preview-anchor="/g_trees/previews/item.html?def§item" data-hl="true" href="#item">items</a> greater than <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a>.</div></div><div class="locGutter" data-l="60" data-i="3" id="code_explicit_insertL60"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="60" href="#code_explicit_insertL60">60</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span></div></div><div class="locGutter" data-l="61" data-i="4" id="code_explicit_insertL61"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="61" href="#code_explicit_insertL61">61</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="y_left_set_2"><a class="rustic value" data-ref="y_left_set_2" data-preview-anchor="/g_trees/previews/y_left_set_2.html?def§y_left_set_2" data-hl="true" href="#y_left_set_2">left_set</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="62" data-i="4" id="code_explicit_insertL62"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="62" href="#code_explicit_insertL62">62</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="Option" data-preview-anchor="/g_trees/previews/Option.html?def§Option" data-hl="true" href="#Option">Option</a><span class="deemph">::</span><a class="rustic variant" data-ref="OptionNone" data-preview-anchor="/g_trees/previews/OptionNone.html?def§OptionNone" data-hl="true" href="#OptionNone">None</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="63" data-i="4" id="code_explicit_insertL63"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="63" href="#code_explicit_insertL63">63</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_set" data-preview-anchor="/g_trees/previews/c_set.html?def§c_set" data-hl="true" href="#c_set">Set</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_set_nonempty" data-preview-anchor="/g_trees/previews/c_set_nonempty.html?def§c_set_nonempty" data-hl="true" href="#c_set_nonempty">NonEmpty</a><span class="rb1 open">(</span><dfn id="y_right_set_2"><a class="rustic value" data-ref="y_right_set_2" data-preview-anchor="/g_trees/previews/y_right_set_2.html?def§y_right_set_2" data-hl="true" href="#y_right_set_2">right_set</a></dfn><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="64" data-i="3" id="code_explicit_insertL64"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="64" href="#code_explicit_insertL64">64</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">=></span> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="65" data-i="4" id="code_explicit_insertL65"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="65" href="#code_explicit_insertL65">65</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span></div></div><div class="locGutter" data-l="66" data-i="5" id="code_explicit_insertL66"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="66" href="#code_explicit_insertL66">66</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><dfn id="y_leftmost_item"><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a></dfn><span class="deemph">,</span> <dfn id="y_leftmost_subtree"><a class="rustic value" data-ref="y_leftmost_subtree" data-preview-anchor="/g_trees/previews/y_leftmost_subtree.html?def§y_leftmost_subtree" data-hl="true" href="#y_leftmost_subtree">leftmost_subtree</a></dfn><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="67" data-i="5" id="code_explicit_insertL67"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="67" href="#code_explicit_insertL67">67</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><dfn id="y_remaining"><a class="rustic value" data-ref="y_remaining" data-preview-anchor="/g_trees/previews/y_remaining.html?def§y_remaining" data-hl="true" href="#y_remaining">remaining</a></dfn><span class="deemph">,</span></div></div><div class="locGutter" data-l="68" data-i="4" id="code_explicit_insertL68"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="68" href="#code_explicit_insertL68">68</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_remove_min" data-preview-anchor="/g_trees/previews/c_neset_remove_min.html?def§c_neset_remove_min" data-hl="true" href="#c_neset_remove_min">remove_min</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_right_set_2" data-preview-anchor="/g_trees/previews/y_right_set_2.html?def§y_right_set_2" data-hl="true" href="#y_right_set_2">right_set</a><span class="rb2 close">)</span></div></div><div class="locGutter" data-l="69" data-i="4" id="code_explicit_insertL69"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="69" href="#code_explicit_insertL69">69</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">if</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a> &lt; <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="70" data-i="5" id="code_explicit_insertL70"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="70" href="#code_explicit_insertL70">70</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_new_subtree"><a class="rustic value" data-ref="y_new_subtree" data-preview-anchor="/g_trees/previews/y_new_subtree.html?def§y_new_subtree" data-hl="true" href="#y_new_subtree">new_subtree</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="y_insert" data-preview-anchor="/g_trees/previews/y_insert.html?def§y_insert" data-hl="true" href="#y_insert">insert</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="71" data-i="6" id="code_explicit_insertL71"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="71" href="#code_explicit_insertL71">71</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_leftmost_subtree" data-preview-anchor="/g_trees/previews/y_leftmost_subtree.html?def§y_leftmost_subtree" data-hl="true" href="#y_leftmost_subtree">leftmost_subtree</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="72" data-i="6" id="code_explicit_insertL72"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="72" href="#code_explicit_insertL72">72</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="73" data-i="6" id="code_explicit_insertL73"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="73" href="#code_explicit_insertL73">73</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="74" data-i="5" id="code_explicit_insertL74"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="74" href="#code_explicit_insertL74">74</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="75" data-i="5" id="code_explicit_insertL75"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="75" href="#code_explicit_insertL75">75</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_new_right"><a class="rustic value" data-ref="y_new_right" data-preview-anchor="/g_trees/previews/y_new_right.html?def§y_new_right" data-hl="true" href="#y_new_right">new_right</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_set_insert_min" data-preview-anchor="/g_trees/previews/c_set_insert_min.html?def§c_set_insert_min" data-hl="true" href="#c_set_insert_min">set_insert_min</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="76" data-i="6" id="code_explicit_insertL76"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="76" href="#code_explicit_insertL76">76</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_remaining" data-preview-anchor="/g_trees/previews/y_remaining.html?def§y_remaining" data-hl="true" href="#y_remaining">remaining</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="77" data-i="6" id="code_explicit_insertL77"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="77" href="#code_explicit_insertL77">77</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_new_subtree" data-preview-anchor="/g_trees/previews/y_new_subtree.html?def§y_new_subtree" data-hl="true" href="#y_new_subtree">new_subtree</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="78" data-i="5" id="code_explicit_insertL78"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="78" href="#code_explicit_insertL78">78</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="79" data-i="5" id="code_explicit_insertL79"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="79" href="#code_explicit_insertL79">79</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="80" data-i="6" id="code_explicit_insertL80"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="80" href="#code_explicit_insertL80">80</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="81" data-i="7" id="code_explicit_insertL81"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="81" href="#code_explicit_insertL81">81</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_join" data-preview-anchor="/g_trees/previews/c_set_join.html?def§c_set_join" data-hl="true" href="#c_set_join">set_join</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_left_set_2" data-preview-anchor="/g_trees/previews/y_left_set_2.html?def§y_left_set_2" data-hl="true" href="#y_left_set_2">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_new_right" data-preview-anchor="/g_trees/previews/y_new_right.html?def§y_new_right" data-hl="true" href="#y_new_right">new_right</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="82" data-i="7" id="code_explicit_insertL82"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="82" href="#code_explicit_insertL82">82</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="83" data-i="7" id="code_explicit_insertL83"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="83" href="#code_explicit_insertL83">83</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="84" data-i="6" id="code_explicit_insertL84"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="84" href="#code_explicit_insertL84">84</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="85" data-i="5" id="code_explicit_insertL85"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="85" href="#code_explicit_insertL85">85</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="86" data-i="4" id="code_explicit_insertL86"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="86" href="#code_explicit_insertL86">86</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span> <span class="kw">else</span> <span class="kw">if</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a> <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span></span></span></span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="87" data-i="5" id="code_explicit_insertL87"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="87" href="#code_explicit_insertL87">87</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="y_l_3"><a class="rustic value" data-ref="y_l_3" data-preview-anchor="/g_trees/previews/y_l_3.html?def§y_l_3" data-hl="true" href="#y_l_3">l</a></dfn><span class="deemph">,</span> <dfn id="y_r_3"><a class="rustic value" data-ref="y_r_3" data-preview-anchor="/g_trees/previews/y_r_3.html?def§y_r_3" data-hl="true" href="#y_r_3">r</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="88" data-i="5" id="code_explicit_insertL88"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="88" href="#code_explicit_insertL88">88</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_new_right2"><a class="rustic value" data-ref="y_new_right2" data-preview-anchor="/g_trees/previews/y_new_right2.html?def§y_new_right2" data-hl="true" href="#y_new_right2">new_right</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="89" data-i="6" id="code_explicit_insertL89"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="89" href="#code_explicit_insertL89">89</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb1 open">(</span><a class="rustic value" data-ref="y_remaining" data-preview-anchor="/g_trees/previews/y_remaining.html?def§y_remaining" data-hl="true" href="#y_remaining">remaining</a><span class="deemph">,</span> <span class="open">(</span><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_r_3" data-preview-anchor="/g_trees/previews/y_r_3.html?def§y_r_3" data-hl="true" href="#y_r_3">r</a><span class="close">)</span><span class="rb1 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="90" data-i="6" id="code_explicit_insertL90"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="90" href="#code_explicit_insertL90">90</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_l_3" data-preview-anchor="/g_trees/previews/y_l_3.html?def§y_l_3" data-hl="true" href="#y_l_3">l</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="91" data-i="5" id="code_explicit_insertL91"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="91" href="#code_explicit_insertL91">91</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="92" data-i="5" id="code_explicit_insertL92"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="92" href="#code_explicit_insertL92">92</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="93" data-i="6" id="code_explicit_insertL93"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="93" href="#code_explicit_insertL93">93</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="94" data-i="7" id="code_explicit_insertL94"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="94" href="#code_explicit_insertL94">94</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_set_join" data-preview-anchor="/g_trees/previews/c_set_join.html?def§c_set_join" data-hl="true" href="#c_set_join">set_join</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_left_set_2" data-preview-anchor="/g_trees/previews/y_left_set_2.html?def§y_left_set_2" data-hl="true" href="#y_left_set_2">left_set</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_new_right2" data-preview-anchor="/g_trees/previews/y_new_right2.html?def§y_new_right2" data-hl="true" href="#y_new_right2">new_right</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="95" data-i="7" id="code_explicit_insertL95"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="95" href="#code_explicit_insertL95">95</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="96" data-i="7" id="code_explicit_insertL96"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="96" href="#code_explicit_insertL96">96</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="97" data-i="6" id="code_explicit_insertL97"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="97" href="#code_explicit_insertL97">97</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="98" data-i="5" id="code_explicit_insertL98"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="98" href="#code_explicit_insertL98">98</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="99" data-i="4" id="code_explicit_insertL99"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="99" href="#code_explicit_insertL99">99</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span> <span class="kw">else</span> <span class="rb2 open">{</span></div></div><div class="locGutter" data-l="100" data-i="5" id="code_explicit_insertL100"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="100" href="#code_explicit_insertL100">100</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <span class="open">(</span><dfn id="y_l_4"><a class="rustic value" data-ref="y_l_4" data-preview-anchor="/g_trees/previews/y_l_4.html?def§y_l_4" data-hl="true" href="#y_l_4">l</a></dfn><span class="deemph">,</span> <dfn id="y_r_4"><a class="rustic value" data-ref="y_r_4" data-preview-anchor="/g_trees/previews/y_r_4.html?def§y_r_4" data-hl="true" href="#y_r_4">r</a></dfn><span class="close">)</span> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_unzip" data-preview-anchor="/g_trees/previews/c_unzip.html?def§c_unzip" data-hl="true" href="#c_unzip">unzip</a><span class="rb0 open">(</span><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="101" data-i="5" id="code_explicit_insertL101"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="101" href="#code_explicit_insertL101">101</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_left_subtree2"><a class="rustic value" data-ref="y_left_subtree2" data-preview-anchor="/g_trees/previews/y_left_subtree2.html?def§y_left_subtree2" data-hl="true" href="#y_left_subtree2">left_subtree</a></dfn> <span class="deemph">:=</span> <a class="rustic function" data-ref="c_norm" data-preview-anchor="/g_trees/previews/c_norm.html?def§c_norm" data-hl="true" href="#c_norm">lift</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="102" data-i="6" id="code_explicit_insertL102"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="102" href="#code_explicit_insertL102">102</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_left_set_2" data-preview-anchor="/g_trees/previews/y_left_set_2.html?def§y_left_set_2" data-hl="true" href="#y_left_set_2">left_set</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="103" data-i="6" id="code_explicit_insertL103"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="103" href="#code_explicit_insertL103">103</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_l_4" data-preview-anchor="/g_trees/previews/y_l_4.html?def§y_l_4" data-hl="true" href="#y_l_4">l</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="104" data-i="6" id="code_explicit_insertL104"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="104" href="#code_explicit_insertL104">104</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="105" data-i="5" id="code_explicit_insertL105"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="105" href="#code_explicit_insertL105">105</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="106" data-i="5" id="code_explicit_insertL106"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="106" href="#code_explicit_insertL106">106</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">let</span> <dfn id="y_right_subtree2"><a class="rustic value" data-ref="y_right_subtree2" data-preview-anchor="/g_trees/previews/y_right_subtree2.html?def§y_right_subtree2" data-hl="true" href="#y_right_subtree2">right_subtree</a></dfn> <span class="deemph">:=</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="107" data-i="6" id="code_explicit_insertL107"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="107" href="#code_explicit_insertL107">107</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="108" data-i="7" id="code_explicit_insertL108"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="108" href="#code_explicit_insertL108">108</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_insert_min" data-preview-anchor="/g_trees/previews/c_neset_insert_min.html?def§c_neset_insert_min" data-hl="true" href="#c_neset_insert_min">insert_min</a><span class="rb2 open">(</span></div></div><div class="locGutter" data-l="109" data-i="8" id="code_explicit_insertL109"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="109" href="#code_explicit_insertL109">109</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic value" data-ref="y_remaining" data-preview-anchor="/g_trees/previews/y_remaining.html?def§y_remaining" data-hl="true" href="#y_remaining">remaining</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="110" data-i="8" id="code_explicit_insertL110"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="110" href="#code_explicit_insertL110">110</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="open">(</span><a class="rustic value" data-ref="y_leftmost_item" data-preview-anchor="/g_trees/previews/y_leftmost_item.html?def§y_leftmost_item" data-hl="true" href="#y_leftmost_item">leftmost_item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_r_4" data-preview-anchor="/g_trees/previews/y_r_4.html?def§y_r_4" data-hl="true" href="#y_r_4">r</a><span class="close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="111" data-i="7" id="code_explicit_insertL111"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="111" href="#code_explicit_insertL111">111</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="112" data-i="7" id="code_explicit_insertL112"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="112" href="#code_explicit_insertL112">112</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="113" data-i="7" id="code_explicit_insertL113"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="113" href="#code_explicit_insertL113">113</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_set" data-preview-anchor="/g_trees/previews/y_insert_set.html?def§y_insert_set" data-hl="true" href="#y_insert_set">s</a><span class="deemph">.</span><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="114" data-i="6" id="code_explicit_insertL114"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="114" href="#code_explicit_insertL114">114</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="115" data-i="5" id="code_explicit_insertL115"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="115" href="#code_explicit_insertL115">115</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="116" data-i="5" id="code_explicit_insertL116"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="116" href="#code_explicit_insertL116">116</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="kw">return</span> <a class="rustic type" data-ref="c_gtree" data-preview-anchor="/g_trees/previews/c_gtree.html?def§c_gtree" data-hl="true" href="#c_gtree">GTree</a><span class="deemph">::</span><a class="rustic variant" data-ref="c_gtree_nonempty" data-preview-anchor="/g_trees/previews/c_gtree_nonempty.html?def§c_gtree_nonempty" data-hl="true" href="#c_gtree_nonempty">NonEmpty</a><span class="rb0 open">(</span></div></div><div class="locGutter" data-l="117" data-i="6" id="code_explicit_insertL117"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="117" href="#code_explicit_insertL117">117</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic type" data-ref="c_gtree_node" data-preview-anchor="/g_trees/previews/c_gtree_node.html?def§c_gtree_node" data-hl="true" href="#c_gtree_node">GTreeNode</a> <span class="rb1 open">{</span></div></div><div class="locGutter" data-l="118" data-i="7" id="code_explicit_insertL118"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="118" href="#code_explicit_insertL118">118</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_set" data-preview-anchor="/g_trees/previews/c_gtree_node_set.html?def§c_gtree_node_set" data-hl="true" href="#c_gtree_node_set">set</a><span class="deemph">:</span> <a class="rustic function" data-ref="c_neset_singleton" data-preview-anchor="/g_trees/previews/c_neset_singleton.html?def§c_neset_singleton" data-hl="true" href="#c_neset_singleton">singleton</a><span class="rb2 open">(</span><a class="rustic value" data-ref="y_insert_item" data-preview-anchor="/g_trees/previews/y_insert_item.html?def§y_insert_item" data-hl="true" href="#y_insert_item">item</a><span class="deemph">,</span> <a class="rustic value" data-ref="y_left_subtree2" data-preview-anchor="/g_trees/previews/y_left_subtree2.html?def§y_left_subtree2" data-hl="true" href="#y_left_subtree2">left_subtree</a><span class="rb2 close">)</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="119" data-i="7" id="code_explicit_insertL119"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="119" href="#code_explicit_insertL119">119</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_right" data-preview-anchor="/g_trees/previews/c_gtree_node_right.html?def§c_gtree_node_right" data-hl="true" href="#c_gtree_node_right">right</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_right_subtree2" data-preview-anchor="/g_trees/previews/y_right_subtree2.html?def§y_right_subtree2" data-hl="true" href="#y_right_subtree2">right_subtree</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="120" data-i="7" id="code_explicit_insertL120"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="120" href="#code_explicit_insertL120">120</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><a class="rustic field" data-ref="c_gtree_node_rank" data-preview-anchor="/g_trees/previews/c_gtree_node_rank.html?def§c_gtree_node_rank" data-hl="true" href="#c_gtree_node_rank">rank</a><span class="deemph">:</span> <a class="rustic value" data-ref="y_insert_rank" data-preview-anchor="/g_trees/previews/y_insert_rank.html?def§y_insert_rank" data-hl="true" href="#y_insert_rank">rank</a><span class="deemph">,</span></div></div><div class="locGutter" data-l="121" data-i="6" id="code_explicit_insertL121"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="121" href="#code_explicit_insertL121">121</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span><span class="deemph">,</span></div></div><div class="locGutter" data-l="122" data-i="5" id="code_explicit_insertL122"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="122" href="#code_explicit_insertL122">122</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">)</span></div></div><div class="locGutter" data-l="123" data-i="4" id="code_explicit_insertL123"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="123" href="#code_explicit_insertL123">123</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="124" data-i="3" id="code_explicit_insertL124"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="124" href="#code_explicit_insertL124">124</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><div class="indent"> </div><span class="rb1 close">}</span></div></div><div class="locGutter" data-l="125" data-i="2" id="code_explicit_insertL125"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="125" href="#code_explicit_insertL125">125</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><div class="indent"> </div><span class="rb0 close">}</span></div></div><div class="locGutter" data-l="126" data-i="1" id="code_explicit_insertL126"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="126" href="#code_explicit_insertL126">126</a></div><div class="fold"></div></div><div class="locContent"><div><div class="indent"> </div><span class="rb2 close">}</span></div></div><div class="locGutter" data-l="127" data-i="0" id="code_explicit_insertL127"><div class="lineNumber"><a data-pseudocode="code_explicit_insert" data-ref="code_explicit_insert" data-hllines="127" href="#code_explicit_insertL127">127</a></div><div class="fold"></div></div><div class="locContent"><div><span class="rb1 close">}</span></div></div></code></section></section></div></body></html>